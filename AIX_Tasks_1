date
exit or Ctrl + d 
uptime
oslevel													-->Reports the latest installed maintenance level of the system.
oslevel -s												-->Find out the current OS level of the system.
oslevel -qr												-->Checking on known maintenance levels:
oslevel -r												-->determines the highest recommended maintenance level reached for the current version of AIX.
oslevel -sq												-->
oslevel -lr 											-->5100-04: lists which fileset updates are missing if after installing ML 04 on 5100-03 the command oslevel -r still shows 5100-03.
uname													-->Displays the name of the current operating system.
uname -x												-->displays the operating system in use, the host name, the machine ID number of the hardware, the release number of the operating system, the operating system version and the system model name.
uname -s												-->Get the machine OS
uname -a 												-->displays the machine ID and version banner.
uname -M												-->Get the AIX machine name
uname -m												-->Getting an AIX machine's serial number.
uname -aMu												-->
ifconfig -a 											-->
ifconfig eno down										-->
netstat -na |more										-->
netstat -nr 											-->
du -sg * |sort -nr |head								-->Check the occupied space in FS
pwdadm -c <user_name>									-->
pwdadm -f ADMCHG username								-->Force a user to change their password on their next login
															Note that this works with some sshd's and not others
hostname
hostname newhostname 									-->temprory change
pwdadm -q user_name										-->check the last changed passwd
perl -le "print scalar localtime "						-->Check the last pwd change in human readble formate
lsuser user_name										-->check the user attributes
lsuser -a account_locked user_name						-->check the user has been locked or not.
lsuser -a time_last_login user_name						-->user last login 
chuser attributes user_name								-->change the user attributes 
chuser account_locked=false USERNAME					-->unlock the account with
chuser loginretries=NUMBER USERNAME						-->This attribute would be set via the chuser command
chuser maxage=0 USERNAME								-->
passwd -c user_name										-->
passwd user_name										-->change the passwd 
pwdck -n ALL											-->ALL Check for empty passwords
lsvg root												-->check the rootvg partitions.
lsvg -M rootvg											-->
lsvg													-->
lsvg -p rootvg											-->
lsvg -l rootvg											-->
lsvg -l datavg											-->
chfs -a size=+1G FS_NAME								-->Increase the FS space.
tcpdump -i en1 -w /tmp/text.pcap host 10.177.151.5		-->
tcpdump -w /tmp/text.pcap -i en1						-->Capture the tcpdump packetes.
lslpp -h 												-->LPP history
lslpp -L | grep -i openssl.base							-->To find out whether the affected filesets are installed on your systems,refer to the lslpp command found in the AIX user's guide.
lslpp -la												-->
tar xvf openssl_fix30.tar								-->untar the tar file.
"openssl dgst -sha256 file" 							-->The checksums below were generated using the

stopsrc -s syslogd;startsrc -s syslogd      			-->
chhmcusr -u inbitam -t passwd							-->
emgr -l													-->List of IFIXs
emgr -F -R IJ25390s2a									-->Remove IFIX  
emgr -e IJ45056m6a.230504.epkg.Z						-->Install IFIX   
emgr -P 												-->
crfs -v jfs2 -g datavg -a size=15G -A yes -m /opt/app	-->
mount /opt/app											-->										
df â€“g													-->Check the systemhas the enough free space.
df -gt													-->
df -Ik													-->
svmon													-->use can user svmon command to monitor memory usage as follows.
svmon -P -v -t 10 | more         						-->will give top ten processes
svmon -U -v -t 10 | more         						-->will give top ten user
svmon -G -O unit=GB										-->
ps aux | head -1; ps aux | sort -rn +2 | head -10		-->Displaying top CPU_consuming processes:
ps aux | head -1; ps aux | sort -rn +3 | head			-->Displaying top 10 memory-consuming processes: 
ps -eakl | head -1; ps -eakl | sort -rn +5				-->Displaying process in order of being penalized:
ps -eakl | sort -n +6 | head							--> Displaying process in order of priority:
ps -eakl | sort -n +7									-->Displaying process in order of nice value
ps vx | head -1;ps vx | grep -v PID | sort -rn +3 | head -10		-->Displaying the process in order of time
ps vx | head -1; ps vx | grep -v PID | sort -rn +6 | head -10		-->Displaying the process in order of real memory use
ps vx | head -1; ps vx | grep -v PID | sort -rn +4 | head -10		-->Displaying the process in order of I/O
ps -a -o pid, user, class, pcpu, pmem, args							-->Displaying WLM classes 
ps vg | head -1; ps vg | grep -w wait								-->Determinimg process ID of wait processes: 
ps -mo THREAD -p <PID>												-->Wait process bound to CPU
topas -P 															-->Cpu usage with priority levels
mach													-->Displays the processor architecture of the machine.

entstat -d en1 |grep "Port VLAN ID"						-->Find the vlan id
lsdev													-->Displays devices in the system and their characteristics.
lsdev -Cc adapter										-->The lsdev command displays information about devices in the Device Configuration database. You can display information about all devices in the Customized Devices
															object class using the -C flag.
														-->"defined" means at one time the piece of hardware was on system - as opposed to "available".  A card which is being newly added should not
															temporarily pass through "defined" state.  Hardware should be in the "available" state.
lsdev -Cc disk											-->To list all avalable disks.
lsdev -Cc processer										-->To ltst all avalable processers.
lsdev -Cc if											-->To list all avalable interfaces.
lsdev -Cc cdrom											-->To list all avalable cdrom.
lsdev -Cc type											-->To list all avalable type.
lsdev -Cc memory 										-->To list all avalable memory.
lsdev -Cc sys0											-->To list all avalable sysplaner.
lsdev -P -H												-->To list all of the devices in the Predefined Devices object class with column headers.
lsdev -C												-->To list all of the devices in the Customized Devices object class.
lsdev -C -c adapter -S a								-->To list the adapters that are in the Available state in the Customized Devices object class.
lsdev -C -H												-->To list all customaized devices.
lsdev -Pc disk											-->To list all supported predefined disks.
lsdev -p vscsi0											-->To find the child device for vscsi0.
lsdev -P -c tape										-->To list all of the tape devices in the Predefined Devices object class.
lsdev -P -r class										-->To list the supported device classes from the Predefined Devices object class.
lsdev -P -c disk -r subclass							-->To list the supported subclasses in the Predefined Devices object class for the disk class.
lsdev -C -H -S a -F 'name class subclass type'			-->To list the name, class, subclass, and type of every device in the Available state in the Customized Devices object class with column headers.
lsdev -C -c adapter -F 'name class location physloc'	-->To list the name, class, location, and physloc of all adapter devices in the Customized Devices object class with column headers.
lsdev -p pci0											-->To list all of the children of the pci0 bus.
lsdev -l hdisk0 -F parent								-->To find the parent device for hdisk0.
listdgrp												-->Displays devices in a device class.
listdgrp disk											-->list the devices in the disk class.
getdev													-->Lists devices that match the specified criteria.
getdev type=proc_rspc									-->lists all devices of type proc_rspc.
cat /tmp/f | lsdev -l -									-->To list the devices whose names are contained in the file /tmp/f, type:
lsdev -c disk -x										-->To display the status of the devices that are exported to a WPAR as Exported.
lsconf													-->Displays system configuration information.
bootinfo -b												-->reports last device the system booted from
bootinfo -s hdiskxxx									-->reports size of disk drive
bootinfo -K												-->reports if the kernel in memory is 32 bits or 64 bits
bootinfo -y												-->
bootinfo -r                    							-->reports amount of memory (/ by 1024)
bootinfo -T                    							-->reports type of machine 
															ie rspc,rs6ksmp,rspc or chrp
bootinfo -y 							                -->reports your hardware arquitecture (32 bits or 64 bits)															
prtconf 												-->config details
prtconf -k												-->should now be 64	or displays the kernel type in use.											
prtconf -c 												-->
prtconf -s												-->displays the processor clock speed. 
prtconf -m												-->displays memory.
getdgrp													-->Lists device classes that match the specified criteria.
getdgrp													-->display all device classes.

lspv 													-->disk name will display
lspv hdiskXX    										-->as well is defined on a Volume Group. (here we can notify the hdd state failed / sync)
lsattr													-->Displays attribute characteristics and possible values of attributes for devices in the system.
lsattr -E -l sys0 -a maxuproc							-->Maximum number of processes a user can have.
lsattr -El ent0											-->To list all attributes for ent0.
lsattr -EHl sys0l sys0									-->displays system attributes (realmem ...)
lsattr -EHl proc0										-->displays the state, type and frequency of processor proc0.
lsattr -El rmt0											-->lists the current attribute values for the tape device rmt0.
lsattr -El tty0 -a speed								-->lists the current value of the speed attribute for serial port tty0.

lppchk -v												-->
lppchk -vm3 											-->Check currently installed filesets are consistent.
lppchk -v												-->
lppchk -m 3 -f											-->
lppchk -m 3 -l											-->
lppchk -m 3 -c											-->
instfix -i |grep -i ML 									-->Check current ML levels are consistent
instfix -i | grep SP
lsslot -c pci											-->
alt_disk_install										-->Installs an alternate disk with a mksysb install image or clones the currently running system to an alternate disk.
															Note: install bos.alt_disk_install fileset to use alt_disk_install.
alt_disk_install -C -b update_all -l /dev/cd0 hdisk4	-->Creates clone of the current rootvg on hdisk4, installs a ML on the clone and changes the bootlist to hdisk4.
alt_disk_install -X old_rootvg							-->Removes the original rootvg from the ODM, after booting from the new alternate disk (you can still reboot from old_rootvg).
alt_disk_install -C  hdisk1								-->you clone your current rootvg to hdisk1
alt_disk_install -X										-->if you want to remove the alternate disk install.
bootlist -m hdisk0 hdisk1 								-->(means you boot from hdisk0 first and hdisk1 second)
bootlist -m normal -o									-->Check the blv has been created on the rootvg disk
bootlist -m service -o									-->
bosboot -ad /dev/hdisk##  								-->to update the boot image evey application installed need to change boot image . update is mandtory
bindprocessor -q										-->will give you the number of proc.
lscfg													-->Displays configuration, diagnostic and VPD information about the system.
lscfg  -v 												-->Will give your system info. 
lscfg -l hdisk0											-->To list the location of the disk
lscfg -vp | grep -e "Memory DIMM" -e "Size"				-->
lscfg -vl hdisk0   										-->display hdd details
lscfg -vpl hdisk0										-->To list all attributes for hdisk0.
lscfg -vpl ent0|grep -i network							-->To find the network/hardware/mac address.
lscfg |grep proc   										-->to see processor
getconf													-->Displays system configuration variable values.
getconf HARDWARE_BITMODE								-->displays hardware bit mode (64 or 32 bit).
getconf KERNEL_BITMODE									-->displays kernel bit mode (64 or 32 bit).
getconf DISK_SIZE /dev/hdisk2							-->displays disk size in MB.
getconf REAL_MEMORY										-->displays real memory size in MB.

lsmcode -A  											-->will give you the proc. firmware + others 
lsmcode -c 												-->for firmware version
lssrc -a 												-->To see services are running
nfso -o nfs_use_reserved_ports=1
sysdumpdev												-->Changes the primary or secondary dump device designation in a running system. The default primary dump device is LV /dev/hd6 and the default secondary dump device is /dev/sysdumpnull. A dedicated primary dump device LV /dev/lg_dumplv is created (if sufficient disk space is available) in systems with at least 4 Gigabytes of real memory.
sysdumpdev -l											-->Lists current dump destination.       
sysdumpdev -e											-->Estimates dumpsize of the current system in bytes.
sysdumpdev -L        									-->Displays information about the previous dump.
sysdumpdev -c   	 									-->the system dump device will not be compressed when the next dump is taken
sysdumpdev -p 											-->(dump device) -P Sets the default dump device, permanently
sysdumpdev -P -p /dev/hd7								-->changes the primary dump device permanently from the default to LV /dev/hd7.
sysdumpdev -P -s /dev/sysdumpnull       				-->makes the secondary dump device a bit bucket (recommended)
sysdumpstart -p      									-->Starts a dump and writes to the primary dump device.
sysdumpstart -s      									-->Starts a dump and writes to the secondary dump device.
errpt  													-->to check error of h/w from OS. Generates a report of logged errors in the system error log.
errpt -a 												-->displays a complete detailed report.
errpt -c > /dev/console 								-->formats and displays each of the errors at logtime (concurrent error logging) on /dev/console.
errpt -a -jE85C5C4C 									-->Detailed info about a specific error:															
cfgmgr													-->Configures devices by running the programs in /etc/methods directory and optionally installs device software. To configure  device (like devfsadm in solaris)
cfgmgr -l												-->To configure particular device.
cfgmgr -v												-->makes devices available that where not powered on when the system started.
cfgmgr													-->runs the Phase 2 configuration rules (second boot phase for normal boot) (same as using the -s flag).
cfgmgr -l scsi1											-->configures detected devices attached to the scsi1 adapter.
cfgmgr -i /usr/sys/inst.images							-->installs device software (using the directory /usr/sys/inst.images) automatically during configuration.

snap													-->Gathers system configuration information and compresses the information into a pax file.
snap -a -o /dev/rmt0									-->gathers all system configuration information (needs approximately 8 MB space in directory /tmp/ibmsupt) and creates a compressed pax image (snap.pax.Z) of directory /tmp/ibmsupt.
snap -gbc 												-->collecting snap
snap -r 												-->to remove previous snap output
snap.pax.z  											-->encrypted file snap
diag 													-->now any new h/w error is there it will give. Menu driven program to run a wide choice of tasks and service aids (diagnostics, hardware error report, format, microcode and bootlist management,  ...).
															Diagnostics modes:
															Concurrent mode: diag is used during normal operation (only devices not in use can be tested).
															Single-user mode: run diag after shutdown -m.
															Stand-alone mode: boot from Diagnostics CD (press F5 when acoustic beep is heard)
															or boot and press F6 when acoustic beep is heard to load diag from hard disk.
															if diag returns "diag is not supported on this model" use:
															SMS mode: boot and press F1 when acoustic beep is heard, select "test the computer". Some older models use a SMS diskette.
rmdev													-->Removes a device from the system.
rmdev -dl interfacename   								-->(To remove the device / interface) -R is recursively
rmdev -dl devicename									-->To remove the device from odm.
rmdev -l devicename										-->To remove the device from system temporarily.
rmdev -Rdl parentdevicename								-->To delete the parent and child devices at a time.
rmdev -l tty0 -d										-->removes the tty0 device definition from the CuDv object class (ODM).
rmdev -l hdisk1											-->unconfigures PV hdisk1 and changes its state from available to defined (definition is not removed from the CuDv object class (ODM).

errinstall												-->Installs or replaces messages in the error logging message sets of the error log message catalog.
errupdate												-->Updates the Error Record Template Repository (default file /var/adm/ras/errtmplt).
nimadm					 								-->Performs Alternate Disk Migration (to a new version or release) of AIX using NIM resources.
nimadm -c aix1 -s spot2 -l lpp2 -d "hdisk1 hdisk2" -Y 	-->migrates totarget NIM client aix1, using NIM SPOT resource spot2, the NIM lpp_source lpp2, and hdisk1 and hdisk2 target disks, and agreeing to all required software license agreements for the software being installed (-Y).
nim -o alt_disk_install -a source=rootvg -a disk='hdisk2' -a phase=12 holland			-->clones a rootvg on client holland to hdisk1, but only run phase1 and phase2 (leaving the /alt_inst file systems mounted).
dumpcheck												-->Checks the disk resources used by the system dump and logs in the system error log. Run default by cron at 3:00 pm local time each day.
/usr/lib/ras/dumpcheck -p								-->requests a dumpcheck. The result is printed to stdout (-p).
/usr/lib/ras/dumpcheck -r								-->discontinues running dumpcheck (removes the crontab entry).
kdb														-->Displays system images for examining a dump.
kdb /var/adm/ras/vmcore.0 /unix     					-->starts kdb using the uncompressed dump file /var/adm/ras/vmcore.0 and kernel file /unix.
snapcore												-->Gathers the core file, program, and libraries used by a program to directory /tmp/snapcore (default) and compresses the information into a pax image. The collected information allows debugging and resolving problems within an application.
snapcore -d /tmp/snapcore2 core.xx						-->gathers all needed information for core dump file core.xx and writes it to directory /tmp/snapcore2/snapcore_32811.pax.Z, where 32811 is the process id ($pid) of the snapcore command.
															uncompress -c snapcore_32811.pax.Z | pax				-->displays the contents of the pax archive.
															check_core	Used by snapcore to gather all information about a core dump. The bos.rte.serv_aid fileset must be installed.
															/usr/lib/ras/check_core core.xx							-->displays a list containing the program that caused core dump core.xx and the used libraries.
shconf													-->Manages the system hang detection parameters for the system hang daemon shdaemon.
shconf -d												-->displays if priority problem detection and lost I/O detection are enabled or not.
shconf -E -l prio -H									-->displays the current shdaemon settings.
file													-->Determines the file type.
file prog												-->displays user process bit mode of program prog. Returns:executable (RISC System/6000) or object module not stripped (32 bit program),
															or 64-bit XCOFF executable or object module not stripped (64 bit program).
file /unix												-->the returned link shows which kernel is running: unix_up = 32-bit uniprocessor kernel, unix_mp = 32-bit multiprocesssor kernel, unix_64 = 64-bit multiprocessor kernel.

cfg2html												-->A system configuration to HTML converter (Open Source)
chcons													-->Redirects the system console to device or file, effective next startup.
chcons -a login=enable /dev/tty0						-->changes the system console to device /dev/tty0. Use /dev/lft0 for the default LFT display.
chcons /tmp/console.out									-->redirects the system console to file /tmp/console.out.
lsdisp													-->Lists the displays and the default display currently available on the system.
chdisp													-->Changes the display used by the LFT subsystem.
chdisp -p gda1											-->changes the default display permanently to gda1.
chdev													-->Changes a device's characteristics.
chdev -l hdisk2 -a pv=yes								-->assigns a PVID to hdisk2.
mkdev													-->Adds a device to the system.
mkdev -l hdisk2											-->make the already defined disk device hdisk2 available to use.
mkdev -l hdisk1 -a pv=yes								-->makes an available disk a PV (assigning a PVID), if it does not already have one.
mkdev -c tty -t tty -s rs232 -p sa0 -w s1 -a login=enable -a term=ibm3151	-->adds an ibm3151 RS232 terminal using adapter sa0 port s1 with login enabled.
llctl -g reconfig - make loadleveler reread its config files
pstat -a 
smitty 													-->provides menu driven wizard
smitty chgsys											-->Also allows one to change the max number of processes per user, among other things
smitty chpv 											-->to check hotspare pool
smitty mktcpip  										-->to config ip
smitty hostname 										-->to change hostname
smitty mksysb  											-->Taking OS Backup
smitty savevg											-->
smitty resetvg											-->
smitty chlv

/etc/inetd.conf
/etc/services
/etc/rpc
/etc/aixmibd.conf
/etc/rc.tcpip
/etc/syslog.conf										-->
/etc/services





			

=========================================================================================================================================================================>

AIX LVM Basics:-
To remove lvm
#smit lvm

To Remove PID 

bash-3.2# lspv
hdisk0          00f7e0d0ce3fba16                    rootvg          active
hdisk1          00f7e0d0ce6caaff                    rootvg          active
hdisk2          00f7e0d0ce7090e7                    appvg           active
hdisk3          00f7e0d0ce79574f                    appvg           active
hdisk4          00f7e0d0186c0471                    None
hdisk5          00f7e0d0187224c0                    None
bash-3.2# chdev -l hdisk5 -a pv=clear
hdisk5 changed
bash-3.2# lspv
hdisk0          00f7e0d0ce3fba16                    rootvg          active
hdisk1          00f7e0d0ce6caaff                    rootvg          active
hdisk2          00f7e0d0ce7090e7                    appvg           active
hdisk3          00f7e0d0ce79574f                    appvg           active
hdisk4          00f7e0d0186c0471                    None
hdisk5          none                                None

***

cfgmgr ----todetect for new hdd

create vloume group 

add disk to volume group
================================================================================================>
AIX Change the File System:-

chfs -a size=+20G /opt -->Increase the 20GB on /opt
chfs -a size=-20G /tmp -->Reduce the 20GB on /tmp


================================================================================================>
AIX IP Change:-

#ifconfig -a

#smitty mktcpip		<--Run the command to change the IP address.

=> Select the interface on which you want to configure the IP address. 
For e.g. en0 => Specify the new values (Internet address,Network mask,Domain name,
Gateway)
=> Set Your cable type to tp
=> Set Start now to Yes
=> Press Enter to commit.

gateway--10.192.246.1
subnet---255.255.255.0/24

================================================================================================>
AIX Java Path settings:-

For shell java path 

About this task

The PATH environment variable enables AIX to find programs and utilities, such as javac, java, and javadoc tool from any current directory. 
Changing the path will override any existing Java launchers in your path.
To display the current value of your PATH environment variable, type the following at a command prompt:

echo $PATH

To add the Java launchers to your path:

    Edit the shell startup file in your home directory. The name of your startup file will depend on the shell you are using; for example:
        The Korn shell startup file is .kshrc.
        The C shell startup file is .cshrc.
        The Bourne shell startup file is .profile.
        The BASH shell startup file is .bashrc.
    Add the absolute paths to the PATH environment variable; for example:

    export PATH=/usr/java-ppc64-60-srt/jre/bin:/usr/java-ppc64-60-srt/bin:$PATH

    Log on again or run the updated shell script to activate the new PATH environment variable.

--------------------------------------

for bash shell edit .profile file in user /home/<username>

Append path 
PATH


#source profile 

-------------------------
================================================================================================>
AIX Patching:-

sudo su -
bash
ifconfig -a
cd /sysmonlogs/prabhakar
ls -lrt snap.sh
sh snap.sh
mkdir /mksysb_backup/SP_Upgrade_mksysb/
nohup mksysb -ieX /mksysb_backup/SP_Upgrade_mksysb/$(hostname)_`date +%d%m%y`.mksysb &

Incase Mirroring is there
lspv |grep -i rootvg
bootinfo -b
unmirrorvg rootvg hdisk#
reducevg rootvg hdisk#
chpv -c hdisk#
alt_disk_copy -d hdisk#

Incase alt_disk is present
lspv |grep -i rootvg
alt_rootvg_op -X alt_rootvg
alt_disk_copy -d hdisk#

alt_rootvg_op -W -d hdisk#
chroot /alt_inst /usr/bin/oslevel -s
for i in `cat /tmp/emgr.txt`;do chroot /alt_inst /usr/sbin/emgr -r -L $i ;done
chroot /alt_inst /usr/sbin/emgr -l
chroot /alt_inst /usr/sbin/installp -c all





nohup alt_rootvg_op -C -b update_all -l /yono-sysmonlogs/AIX_7200-05-06-2320 &
chroot /alt_inst /usr/bin/oslevel -s


cp -pr /yono-sysmonlogs/libxml2_fix4 /alt_inst/tmp/
chroot /alt_inst /usr/sbin/emgr -e /alt_inst/tmp/libxml2_fix4/IJ45056m6a.230504.epkg.Z
chroot /alt_inst /usr/sbin/emgr -l
chroot /alt_inst /usr/bin/oslevel -s


alt_rootvg_op -St


bootlist -m normal -o hdisk0 hdisk1

bosboot -a

****************************************************************************


backup
******************
mksysb -ieX /mksysb_backup_UAT/backup/sbiiprewuata22.mksysb

serverlogs
*********************
cd /scripts
./serverinfo.sh

If rootvg in mirroring state then 
**************************************
lspv
lsvg -l rootvg
lsvg -p rootvg
unmirrorvg rootvg
lspv -l hdisk0
lspv -l hdisk1
migratepv hdisk0 hdisk1
chpv -c hdisk0
lsvg -p rootvg
reducevg rootvg hdisk0
lsvg -p rootvg

If mirroring not there altinst_rootvg disk is there then use below steps

if alt_inst_rootvg there the remove
*********************************
alt_disk_install -X altinst_rootvg

-------------------------------------------------------------------------------------
alternat disk
*********************************
alt_disk_copy -d hdisk2 -B
bootinfo -b
bootlist -m normal -o
bootlist -m normal -o hdisk0
bosboot -ad /dev/hdisk0

checking oslevel in alt_clone disk
*****************************************
alt_rootvg_op -W -d hdisk1
chroot /alt_inst /usr/bin/oslevel -s
chroot /alt_inst /usr/bin/lppchk -vm3
alt_rootvg_op -S

Ifixes checking
****************
emgr -P

Remove Ifixes before going to update
****************************************

emgr -r -L <efixlabel>

cd /sysmonlogs/package
ls -ltr

smitty update_all

select[.]

next window

default output [yes]
Accept licence [yes]

enter

enter






================================================================================================>
AIX rsync:-

/usr/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync root@10.0.254.11:/doc-root/*  /doc-root/
/usr/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync root@10.0.252.112:/batchdump/doc-root/*  /batchdump/doc-root/
/usr/bin/rsync -ltpvrog  -e ssh  --rsync-path=/opt/sfw/bin/rsync root@10.0.252.112:/batchdump/doc-root/*  /batchdump/doc-root/
 

================================================================================================>
Create a datavg FS:-

mkvg -y datavg -s 128 hdisk2
extendvg datavg hdisk3
mirrorvg -S datavg
crfs -v jfs2 -g datavg -a size=15G -A yes -m /ndlogs
lsvg -l datavg 
lsvg datavg 

/etc/filesystem

File System creation:- 
mkvg -y datavg -s 256 hdisk2
lspv
extendvg -f datavg hdisk3
mirrorvg -S datavg
reducevg datavg hdisk3
bootinfo -s hdisk2
crfs -v jfs2 -g datavg -a size=70G -A yes -m /WAS9
df -gt
lsvg -l datavg
mount /WAS9
df -gt
mirrorvg -S datavg

=========================================================================================================================================================================>
User creation:-

mkgroup id=420 sbiitam
mkuser id=420 pgrp=sbiitam -a home=/home/sbiitam sbiitam
passwd sbiitam


mkgroup -'A' id='420' sbiitam
useradd -d /home/sbiitam -g sbiitam -G  sbiitam -u 420 -c "ITAM_User" -m sbiitam
lsuser sbiitam
chuser unsuccessful_login_count=0 sbiitam
echo "sbiitam:Sbi@1234" | chpasswd
chuser minage=0 sbiitam
pwdadm -c sbiitam
echo 'sbiitam  ALL=(ALL) NOPASSWD: ALL'  >> /etc/sudoers
cat /etc/group
oem_setup_env
cat /etc/passwd |grep -i sbiitam
cat /etc/group


cat /etc/passwd |grep -i 420
cat /etc/group |grep -i 420 

mkgroup id='420' 'sbiitam';mkuser id='420' pgrp='sbiitam' home='/home/sbiitam' shell='/usr/bin/ksh' gecos='ITAM_User' 'sbiitam'
echo "sbiitam:Sbi@1234" | chpasswd
pwdadm -c sbiitam
echo 'sbiitam  ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers;cat /etc/sudoers

=========================================================================================================================================================================>
find /var/spool/clientmqueue -name '*' -type f -mtime +250 -exec rm -rf {} \;
find . -name index.html -type f -exec 1s -lrt {} \; sbiinbproductionsupport
=========================================================================================================================================================================>
root@SbiiMobAPre1:/#cat .profile
stty erase ^?
set -o vi
export TERM=vt100
export PS1=$(echo `whoami`@"\033[3;36m"`hostname`:"\033[0m"'$PWD'#)

=========================================================================================================================================================================>

Changing limit:-

ulimit -a		<--Check the ulimit 
ulimit -Ha
vi /etc/security/limits			<--before changing need to take a backup.
=========================================================================================================================================================================>
Environment variable:-

cat /etc/environment
PATH=/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java8_64/jre/bin:/usr/java8_64/bin
TZ=Asia/Calcutta				<--Anyway, set the timezone variable TZ in /etc/environment like this
LANG=en_US
LOCPATH=/usr/lib/nls/loc
NLSPATH=/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/%L/%N.cat:/usr/lib/nls/msg/%l.%c/%N:/usr/lib/nls/msg/%l.%c/%N.cat
LC__FASTMSG=true

# ODM routines use ODMDIR to determine which objects to operate on
# the default is /etc/objrepos - this is where the device objects
# reside, which are required for hardware configuration

ODMDIR=/etc/objrepos
# Clustering variable to allow commands to bypass clcmd checks.
CLCMD_PASSTHRU=1

=========================================================================================================================================================================>
"svmon" will give u this output which give u the information regarding:- 
ur memory.

               size      inuse       free        pin    virtual
memory      1310711    1298235      12476     103782     711466
pg space    2097152     585219
               work       pers       clnt      lpage
pin          103782          0          0          0
in use       438570      10130     849535          0

=========================================================================================================================================================================>
please check if your cd device is being used by some process by running:-

fuser -c /dev/cd0

you can also chack if cdromd is up and running by:

lssrc -a | grep cd

if cdromd is running, then try with the following commands:

cdumount

cdeject

=========================================================================================================================================================================>
If an ESMF node mostly falls off the net (strobe shows only about 5 ports open), then:

1) Go down to the ESMF HMC
2) Log in
3) Locate the right window to use
4) Log in to the trouble machine
5) kill and restart srcmstr
6) startsrc -s inetd
7) startsrc -s sshd
8) startsrc -s automountd
9) /etc/nfs.clean
10) /etc/rc.nfs

There may be other things that need to be started up as well, but this has been sufficient so far.

=========================================================================================================================================================================>
Following the documentation if you issue the following command you will activate HMT or Hardware MultiThreading

# bosdebug -H on
Memory debugger           off
Memory sizes              0
Network memory sizes      0                                             
Kernel debugger           off                                           
Real Time Kernel          off
HMT                       on

...but only if your hardware -supports- HMT!

=========================================================================================================================================================================>
Checking if NFS is active:
lssrc -a | egrep nfs
 biod             nfs              20752   active
 nfsd             nfs              21426   active
 rpc.mountd       nfs              27888   active
 rpc.statd        nfs              22730   active
 rpc.lockd        nfs              24280   active

=========================================================================================================================================================================>
In this post, we will see a common NTP issue on IBM AIX server and its quick resolution:-

I. Issue

"ntpq: read: A remote host refused an attempted connect operation."
 

II. Meaning

It's not what it seems. The xntpd subsystem is probably not running.
 

III. Solution
The solution is to start the xntpd service on the server.
Lets see how to do this

# startsrc -s xntpd
0513-059 The xntpd Subsystem has been started. Subsystem PID is 37748910.

#ntpq -p
     remote           refid      st t when poll reach   delay   offset    disp
==============================================================================
 10.179.70.2     .GPS.            1 u    9   64    1     3.04  6139.86 15875.0
 10.179.70.3     .GPS.            1 u    8   64    1     1.19  6140.79 15875.0
 10.191.174.52   .GPS.            1 u    7   64    1    33.52  6145.83 15875.0
 10.191.174.53   .GPS.            1 u    6   64    1    43.85  6150.98 15875.0


=========================================================================================================================================================================>
Enabling quotas on a JFS filesystem (and perhaps others) :-

Edit /etc/filesystems and edit in quota=userquota on the relevant filesystem.

esmf04m-root> chfs -a "quota = userquota" /home
esmf04m-root> quotaon /home
esmf04m-root> quotacheck /home

=========================================================================================================================================================================>
Configuring ntp:-

1) Stop the xntpd daemon

The xntpd daemon is managed by the System Resource Controller (SRC).
To verify that the xntpd daemon is active : lssrc -s xntpd : status
should be "active"
To stop the xntpd subsystem : stopsrc -s xntpd

Note : xntpd is automatically started in /etc/rc.tcpip. To verify this :
cat /etc/rc.tcpip | grep xntpd.

2) Modify the /etc/ntp.conf file

Put the following lines in the /etc/ntp.conf file :

server <IP address or FQDN of timeserver> prefer
driftfile /etc/ntp.drift
tracefile /etc/ntp.trace

3) Restart the xntp daemon

To restart the xntpd daemon :
startsrc -s xntpd

4) Check status of time synchronization

To check the status of the time synchronisation, use the ntpq utility.
ntpq -i : start ntpq interactively

ntpq> peer

     remote                    refid             st t when poll reach
delay   offset    disp
========================================================================
======
* .PPS.            1 u  863 1024  377     0.92    0.160    0.47

The "offset" field displays the difference (in milliseconds) between the
system time and the reference time.
Type "quit" to exit the ntpq utility.
________________________________________

Kind of like ldd:
dump -X32 -Tv /bin/ls
dump -ov /dir/xcoff-file

=========================================================================================================================================================================>
Changing prngd to listen on a socket, using chsys:-

esmfcws-root> chssys -s prngd -a '-f /dev/egd-pool -m 666 tcp/localhost:708'
0513-077 Subsystem has been changed.
esmfcws-root> ps -ef | grep prng
    root  303186 1015878   0 19:19:43  pts/2  0:00 grep prng
    root 1007836  262212   0 19:04:42      -  0:01
    /opt/freeware/sbin/prngd -f /dev/egd-pool -m 666
esmfcws-root> stopsrc -s prngd
0513-044 The prngd Subsystem was requested to stop.
esmfcws-root> startsrc -s prngd
0513-059 The prngd Subsystem has been started. Subsystem PID is 852062.
esmfcws-root> ps -ef | grep prng
    root  852062  262212   0 19:20:42      -  0:01
    /opt/freeware/sbin/prngd -f /dev/egd-pool -m 666 tcp/localhost:708
    root 1007846 1015878   0 19:20:54  pts/2  0:00 grep prng
esmfcws-root> /usr/lo
local       lost+found
esmfcws-root> /usr/local/sbin/gen-pas
Not bad, using prngd for entropy
cf4b01142c33d9bd06f1e50d6968f4da
esmfcws-root>

=========================================================================================================================================================================>
Or if prngd isn't already partially set up:

esmf04m-root> mkssys -s prngd -p /opt/freeware/sbin/prngd -u root -a
'-f /dev/egd-pool -m 666 tcp/localhost:708'
0513-071 The prngd Subsystem has been added.
esmf04m-root> lssrc -s prngd
Subsystem         Group            PID     Status 
 prngd                                     inoperative
esmf04m-root> 

esmf04m-root> for i in 1 2 3 4 5 6 7 8; do ssh esmf0${i}m "mkssys -s
prngd -p /opt/freeware/sbin/prngd -u root -a '-f /dev/egd-pool -m 666
tcp/localhost:708'"; done
0513-071 The prngd Subsystem has been added.
0513-071 The prngd Subsystem has been added.
0513-071 The prngd Subsystem has been added.
0513-075 The new subsystem name is already on file.
0513-071 The prngd Subsystem has been added.
0513-071 The prngd Subsystem has been added.
0513-071 The prngd Subsystem has been added.
0513-071 The prngd Subsystem has been added.
esmf04m-root> for i in 1 2 3 4 5 6 7 8;
do ssh esmf0${i}m "stopsrc -s prngd"; done
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-044 The prngd Subsystem was requested to stop.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
0513-004 The Subsystem or Group, prngd, is currently inoperative.
esmf04m-root> for i in 1 2 3 4 5 6 7 8; do ssh esmf0${i}m "startsrc
-s prngd"; done
0513-059 The prngd Subsystem has been started. Subsystem PID is 25880.
0513-059 The prngd Subsystem has been started. Subsystem PID is 34508.
0513-059 The prngd Subsystem has been started. Subsystem PID is 30670.
0513-029 The prngd Subsystem is already active.
Multiple instances are not supported.
0513-059 The prngd Subsystem has been started. Subsystem PID is 37450.
0513-059 The prngd Subsystem has been started. Subsystem PID is 21266.
0513-059 The prngd Subsystem has been started. Subsystem PID is 27662.
0513-059 The prngd Subsystem has been started. Subsystem PID is 42666.
esmf04m-root> 

Don't forget /etc/prngd.conf

=========================================================================================================================================================================>
Linux, by default, requires any NFS mount to use a reserved port below 1024.AIX, by default, uses ports above 1024. 
Use the following command to restrict AIX to the reserved port range:-

# /usr/sbin/nfso -o nfs_use_reserved_ports=1

=========================================================================================================================================================================>
Creating a subsystem:-
mkssys -s smbd -p /opt/freeware/sbin/smbd -u 0  -a "-D" -d -q -S -n 15
-f 9 -G tcpip
But it's useless since smbd make fork.
Sincerely,
Lev

=========================================================================================================================================================================>
Diagnostics can be ran against a single device while online

use the
diag -d devicename

=========================================================================================================================================================================>
Someone on AIX-L indicated that this was a good vmtune for a database system:
/usr/samples/kernel/vmtune -p 5  -P 20    ( to set the max perm and min perm values)

=========================================================================================================================================================================>
From a post on AIX-L:

IBM recommends the following formula to calculate the amount of paging
space you need...

For memories larger than 256 MB, the following is recommended:

total paging space = 512 MB + (memory size - 256 MB) * 1.25

For 1024MB RAM = 1600MB Paging Space

1 LP = 64 MB = add 17 LP's to = 1600MB

This is what we use while running AIX 5L.

=========================================================================================================================================================================>
Changing a forgotten root password on AIX:

1.      Insert the product media for the same version and level as the
current installation into the appropriate drive. 
2.      Power on the machine. 
3.      When the screen of icons appears, or when you hear a double
beep, press the F1 key repeatedly until the System Management Services
menu appears. 
4.      Select Multiboot. 
5.      Select Install From. 
6.      Select the device that holds the product media and then select
Install. 
7.      Select the AIX version icon. 
8.      Define your current system as the system console by pressing the
F1 key and then press Enter. 
9.      Select the number of your preferred language and press Enter. 
10.     Choose Start Maintenance Mode for System Recovery by typing 3
and press Enter. 
11.     Select Access a Root Volume Group. A message displays explaining
that you will not be able to return to the Installation menus without
rebooting if you change the root volume group at this point. 
12.     Type 0 and press Enter. 
13.     Type the number of the appropriate volume group from the list
and press Enter. 
14.     Select Access this Volume Group and start a shell by typing 1
and press Enter. 
15.     At the # (number sign) prompt, type the passwd command at the
command line prompt to reset the root password. For example: 

16.       # passwd
17.       Changing password for "root"
18.       root's New password: 
Enter the new password again:

19.     To write everything from the buffer to the hard disk and reboot
the system, type the following: 

sync;sync;sync;reboot
________________________________________

turning off diagnostic lights:

/usr/lpp/diagnostics/bin/usysfault -s normal

=========================================================================================================================================================================>
Like tcpdump/ethereal?

iptrace -e -i lo0 /tmp/iptrace.out, ( let it run for 5 minutes, kill it)
ipreport /tmp/iptrace.out 

=========================================================================================================================================================================>
Clipped from a message on AIX-L - outlines the procedure for replacing
a bad disk in a logical volume:

u must procee in tyhos order:
1- unmirror the rootvg (unmirror rootvg hdisk1)
2- extrcat hdisk1 from rootvg (reducevg rootvg hdisk1) hidsk1 should not 
have any other data, if yes, move them first
3- rmdev -dl hdisk1
4- put the new pv
5- cvrmgrl
6- extendvg rootvg "the new pv"
7-mirrorvg rootvg hdsikxxx

/\/\/\/\/\
And another:

Use this redbook, page 182, section 6.5.1.

http://www.redbooks.ibm.com/abstracts/SG245496.html?Open

=========================================================================================================================================================================>
Tcpdump pcap packet tracer:-

tcpdump -i en1 -v dst 10.189.205.149 and dst port 514

tcpdump -i eth0 -v dst 10.209.38.56 and dst port 514

tcpdump -i en0 -v dst 10.176.106.6 and dst port 514 -w 

tcpdump -i en0 host 10.176.106.6 -w web6.pcap

tcpdump -i en0  -w /tmp/`hostname`_`date +%H%M%S`.pcap

tcpdump -i en0  -w /tmp/`hostname`_1.pcap


=========================================================================================================================================================================>
SOP for mirroring:-

lspv			<--Displays information about a physical volume within a volume group.
	lspv
lscfg    		<--Displays configuration, diagnostic, and vital product data (VPD) information about the system.
	lscfg -vpl hdisk#
			 Description
       -l Name
            Displays device information for the named device.
       -p
            Displays the platform-specific device information.
       -v
            Displays the VPD found in the Customized VPD object class. Also, displays platform specific VPD when used with the -p flag.
       -s
            Displays the device description on a separate line from the name and location.

alt_disk_install -X altinst_rootvg

	Installs an alternate disk with a mksysb install image or clones the currently running system to an alternate disk. This command is obsolete in AIX 5.3. Note: In AIX
       5.3, the alt_disk_install command is replaced by the alt_disk_copy, alt_disk_mksysb, and alt_rootvg_op commands. The alt_disk_install module continues to be shipped as
       a wrapper to the new commands, but the alt_disk_install command does not support any new functions, flags, or features.
	
For alt_disk_install or later:
       " Determine Volume Group Boot Disk:"
            alt_disk_install -q disk
       "Put-to-sleep Volume Group:"
            alt_disk_install -S
       "Rename Alternate Disk Volume Group:"
            alt_disk_install -v  new_volume_group_name disk
       "Wake-up Volume Group:"
            alt_disk_install -W  disk
       "Clean Up Alternate Disk Volume Group:"
            alt_disk_install -X [ volume_group]


chpv -c hdisk		<--Changes the characteristics of a physical volume in a volume group.
lsvg rootvg


extendvg rootvg hdisk	<--Adds physical volumes to a volume group.

			extendvg -f rootvg hdisk

lspv
lsvg -p rootvg		<--Displays information about volume groups.

mirrorvg		<--Mirrors all the logical volumes that exist on a given volume group.
			mirrorvg -S rootvg hdisk
bosboot -ad /dev/hdisk0
bosboot -ad /dev/hdisk1
bootlist -m normal hdisk0 hdisk1
bootlist -m normal -o
bootinfo -b




lspv
hdisk0          00cc585765fbccb5                    rootvg          active
hdisk2          00cc58579953e1ae                    datavg          active
hdisk4          00cc5857ae0fd28b                    backup_files_vg active
hdisk5          00cc5857ae0fe04f                    None
hdisk6          00cc58578909878d                    appl_vg         active
hdisk7          00cc5857825497ab                    backup_index_vg active
hdisk1          00cc5857c1cb1540                    None
hdisk3          00cc58579953e1e9                    datavg          active

alt_disk_install -X altinst_rootvg

root@sbiicoruata145:/#lspv
hdisk0          00cc585765fbccb5                    rootvg          active
hdisk2          00cc58579953e1ae                    datavg          active
hdisk4          00cc5857ae0fd28b                    backup_files_vg active
hdisk5          00cc5857ae0fe04f                    None
hdisk6          00cc58578909878d                    appl_vg         active
hdisk7          00cc5857825497ab                    backup_index_vg active
hdisk1          00cc5857c1cb1540                    None
hdisk3          00cc58579953e1e9                    datavg          active


hdisk0          00cc585765fbccb5                    rootvg          active
hdisk2          00cc58579953e1ae                    datavg          active
hdisk4          00cc5857ae0fd28b                    backup_files_vg active
hdisk5          00cc5857ae0fe04f                    None
hdisk6          00cc58578909878d                    appl_vg         active
hdisk7          00cc5857825497ab                    backup_index_vg active
hdisk1          00cc58575930e636                    rootvg          active
hdisk3          00cc58579953e1e9                    datavg          active


lsvg -p rootvg		<--Displays information about volume groups.
hdisk0          00cc585765fbccb5                    rootvg          active
hdisk1          00cc58575930e636                    rootvg          active

mirrorvg -S rootvg hdisk



lsvg -l rootvg
rootvg:
LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
hd5                 boot       1       2       2    closed/syncd  N/A
hd6                 paging     256     512     2    open/stale    N/A
hd8                 jfs2log    1       2       2    open/stale    N/A
hd4                 jfs2       43      86      2    open/stale    /
hd2                 jfs2       119     238     2    open/stale    /usr
hd9var              jfs2       56      112     2    open/stale    /var
hd3                 jfs2       136     272     2    open/stale    /tmp
hd1                 jfs2       80      160     2    open/stale    /home
hd10opt             jfs2       56      112     2    open/stale    /opt
hd11admin           jfs2       8       16      2    open/stale    /admin
lg_dumplv           sysdump    24      24      1    open/syncd    N/A
livedump            jfs2       2       4       2    open/stale    /var/adm/ras/livedump
perflv              jfs2       16      32      2    open/stale    /perfdata
auditlv             jfs2       1       2       2    open/stale    /audit



wait for some time then check 

lsvg -l rootvg
rootvg:
LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
hd5                 boot       1       2       2    closed/syncd  N/A
hd6                 paging     256     512     2    open/syncd    N/A
hd8                 jfs2log    1       2       2    open/syncd    N/A
hd4                 jfs2       43      86      2    open/syncd    /
hd2                 jfs2       119     238     2    open/syncd    /usr
hd9var              jfs2       56      112     2    open/syncd    /var
hd3                 jfs2       136     272     2    open/syncd    /tmp
hd1                 jfs2       80      160     2    open/syncd    /home
hd10opt             jfs2       56      112     2    open/syncd    /opt
hd11admin           jfs2       8       16      2    open/syncd    /admin
lg_dumplv           sysdump    24      24      1    open/syncd    N/A
livedump            jfs2       2       4       2    open/syncd    /var/adm/ras/livedump
perflv              jfs2       16      32      2    open/syncd    /perfdata
auditlv             jfs2       1       2       2    open/syncd    /audit


bosboot -ad /dev/hdisk0
bosboot -ad /dev/hdisk1
bootlist -m normal hdisk0 hdisk1
bootlist -m normal -o
bootinfo -b



=========================================================================================================================================================================>
PV-ID Change in AIX:-

perl -e 'print pack("H*","00cc561771550ef0");' > /tmp/pvid
cat /tmp/pvid | dd of=/dev/hdisk1 bs=1 seek=128
rmdev -Rdl hdisk$
cfgmgr
varyonvg -f datavg
unmirrorvg datvg hdisk$
reducevg datavg hdisk$
rmdev -Rdl hdisk$
cfgmgr
extendvg datavg hdisk$
mirrorvg -S datavg

=========================================================================================================================================================================>
Password update:

chuser unsuccessful_login_count=0 root
chuser minage=0 histexpire=0 histsize=0 root
echo "root:St@g^#231"|chpasswd
pwdadm -c root
chuser minage=1 histexpire=13 histsize=20 root

rmuser ashokp
mkuser ashok
echo "ashok:ashok123"|chpasswd
pwdadm -c ashok
visudo


chsec -f /etc/security/passwd -s gateway -a lastupdate=`perl -e 'print time'`
0 0 2 * * sh -x /scripts/passwordexpiry.sh

backupios -file /tmp/backup/VIOS1A.mksysb -mksysb
/usr/sbin/mkcd -m VIOS1A.mksysb -S -L -I /tmp/iso_images


=========================================================================================================================================================================>
pagefilecreation:-

root@sbiwmc23$lsvg -l rootvg
rootvg:
LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT
hd5                 boot       1       2       2    closed/syncd  N/A
hd6                 paging     48      96      2    open/syncd    N/A
hd8                 jfs2log    1       2       2    open/syncd    N/A
hd4                 jfs2       20      40      2    open/syncd    /
hd2                 jfs2       20      40      2    open/syncd    /usr
hd9var              jfs2       20      40      2    open/syncd    /var
hd3                 jfs2       20      40      2    open/syncd    /tmp
hd1                 jfs2       20      40      2    open/syncd    /home
hd10opt             jfs2       40      80      2    open/syncd    /opt
hd11admin           jfs2       1       2       2    open/syncd    /admin
lg_dumplv           sysdump    16      32      2    open/syncd    N/A
livedump            jfs2       1       2       2    open/syncd    /var/adm/ras/livedump
root@sbiwmc23$lsps -a
Page Space      Physical Volume   Volume Group    Size %Used Active  Auto  Type Chksum
hd6             hdisk0            rootvg       12288MB     1   yes   yes    lv     0
root@sbiwmc23$lsvg rootvg
VOLUME GROUP:       rootvg                   VG IDENTIFIER:  00f8bb9600004c00000001434cb41603
VG STATE:           active                   PP SIZE:        256 megabyte(s)
VG PERMISSION:      read/write               TOTAL PPs:      1198 (306688 megabytes)
MAX LVs:            256                      FREE PPs:       782 (200192 megabytes)
LVs:                12                       USED PPs:       416 (106496 megabytes)
OPEN LVs:           11                       QUORUM:         1 (Disabled)
TOTAL PVs:          2                        VG DESCRIPTORS: 3
STALE PVs:          0                        STALE PPs:      0
ACTIVE PVs:         2                        AUTO ON:        yes
MAX PPs per VG:     32512
MAX PPs per PV:     1016                     MAX PVs:        32
LTG size (Dynamic): 256 kilobyte(s)          AUTO SYNC:      no
HOT SPARE:          no                       BB POLICY:      relocatable
PV RESTRICTION:     none                     INFINITE RETRY: no
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$lsvg -p rootvg
rootvg:
PV_NAME           PV STATE          TOTAL PPs   FREE PPs    FREE DISTRIBUTION
hdisk0            active            599         391         119..32..00..120..120
hdisk1            active            599         391         118..16..17..120..120
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$
root@sbiwmc23$smit chps
                                                       COMMAND STATUS

Command: OK            stdout: no            stderr: no

Before command completion, additional instructions may appear below.


F1=Help                        F2=Refresh                     F3=Cancel                      F6=Command
F8=Image                       F9=Shell                       F10=Exit                       /=Find
n=Find Next

                               yes

shrinkps: Temporary paging space paging00 created.

root@sbiwmc23$
root@sbiwmc23$lsps -a
Page Space      Physical Volume   Volume Group    Size %Used Active  Auto  Type Chksum
hd6             hdisk0            rootvg       28672MB     1   yes   yes    lv     0
root@sbiwmc23$smit chps
root@sbiwmc23$tty
/dev/pts/3
root@sbiwmc23$smit chps
/usr/sbin/shrinkps[1066]: /dev/hd6: 0403-012 A test command parameter is not valid.
/usr/sbin/shrinkps[1071]: /dev/hd6: 0403-012 A test command parameter is not valid.
shrinkps: Paging space hd6 removed.

=========================================================================================================================================================================>
Disk Replacement

How to replace a bad drive? (mirrored disks)
# lsvg -p rootvg
rootvg:
PV_NAME           PV STATE          TOTAL PPs   FREE PPs    FREE DISTRIBUTION
hdisk0            active            542         264         109..00..00..46..109
hdisk1            active            542         278         88..00..00..81..109

*Here your making sure that both disks are assigned to the volume group
# lsvg -l rootvg
rootvg:
LV NAME             TYPE       LPs   PPs   PVs  LV STATE      MOUNT POINT
hd5                 boot       1     2     2    closed/syncd  N/A
hd6                 paging     64    128   2    open/syncd    N/A
hd8                 jfslog     1     2     2    open/syncd    N/A
hd4                 jfs        6     12    2    open/syncd    /
hd2                 jfs        127   254   2    open/syncd    /usr
hd9var              jfs        4     8     2    open/syncd    /var
hd3                 jfs        37    74    2    open/syncd    /tmp
hd1                 jfs        3     6     2    open/syncd    /home
hd10opt             jfs        21    42    2    open/syncd    /opt
dumplv              sysdump    14    14    1    open/syncd    N/A

*Here your checking to make sure thereâ€™s a 1:2 relationship, meaning that there are copies.  Notice dumplv.  Itâ€™s not copied so we need to make sure dumplv data isnâ€™t on the failing disk.  To check, run;
$ lslv -l dumplv
dumplv:N/A
PV                COPIES        IN BAND       DISTRIBUTION
hdisk0            014:000:000   100%          000:014:000:000:000
This is telling us that the logical volume dumplv is on hdisk0.  If hdisk1 is the failing disk, then we are okay.  Otherwise, we would have to migrate the data over to the good drive and proceed.
# unmirrorvg rootvg hdisk1
# reducevg rootvg hdisk1
# rmdev -l hdisk1 â€“d
Before you power down, itâ€™s a good idea to check the system to make sure it will boot from the good drive.  Do that by performing;
# bootinfo -b
hdisk1
This tells you what drive it was last booted up.  We want to change this to boot to the new drive, so;
# bosboot -ad /dev/hdisk0
And check bootlist
# bootlist â€“m normal â€“o
NOW WE CAN POWER DOWN THE BOX AND REPLACE THE DRIVE
Once disk has been replaced, power up the server.  Once at command prompt, run;
# cfgmgr
This will install the new device and allow the OS to see it.
# lsdev -Cc disk
hdisk0  Available 40-60-00-4,0 16 Bit LVD SCSI Disk Drive
hdisk1  Available 40-60-00-8,0 16 Bit LVD SCSI Disk Drive

Make sure that the OS says itâ€™s available.  If it is, we can assign it to a volume group.
# extendvg rootvg hdisk1
This will assign it a PVID and assign it to the volumegroup rootvg to make it available for use.  Now we can mirror;
# mirrovg rootvg
This will take a little while as itâ€™s taking all data now on hdisk0 and making a copy to hdisk1.
# lsvg -p rootvg
rootvg:
PV_NAME           PV STATE          TOTAL PPs   FREE PPs    FREE DISTRIBUTION
hdisk0            active            542         264         109..00..00..46..109
hdisk1            active            542         278         88..00..00..81..109

Once itâ€™s mirroring, we can make sure itâ€™s assigned to rootvg by doing the above.  We can also check to make sure thereâ€™s copies;
# lsvg -l rootvg
rootvg:
LV NAME             TYPE       LPs   PPs   PVs  LV STATE      MOUNT POINT
hd5                 boot       1     2     2    closed/syncd  N/A
hd6                 paging     64    128   2    open/syncd    N/A
hd8                 jfslog     1     2     2    open/syncd    N/A
hd4                 jfs        6     12    2    open/syncd    /
hd2                 jfs        127   254   2    open/syncd    /usr
hd9var              jfs        4     8     2    open/syncd    /var
hd3                 jfs        37    74    2    open/syncd    /tmp
hd1                 jfs        3     6     2    open/syncd    /home
hd10opt             jfs        21    42    2    open/syncd    /opt
dumplv              sysdump    14    14    1    open/syncd    N/A

Now we need to modify the bosboot to recreate the boot image;
# bosboot â€“a
Double check your bootlist to make sure hdisk1 is in there;
# bootlist â€“m normal â€“o


=========================================================================================================================================================================>
LVM in AIX:-

mklv -y 'ndloglv' -t 'jfs2' -c'2' rootvg 100 hdisk0 hdisk1

1.List  Free PPS
By using 
root@sbiacr14$lspv
hdisk0          00f8bbf36c4850c4                    rootvg          active
hdisk1          00f8bbf36c648757                    rootvg          active
root@sbiacr14$lspv hdisk0
PHYSICAL VOLUME:    hdisk0                   VOLUME GROUP:     rootvg
PV IDENTIFIER:      00f8bbf36c4850c4 VG IDENTIFIER     00f8bbf300004c00000001436c485138
PV STATE:           active
STALE PARTITIONS:   0                        ALLOCATABLE:      yes
PP SIZE:            1024 megabyte(s)         LOGICAL VOLUMES:  14
TOTAL PPs:          558 (571392 megabytes)   VG DESCRIPTORS:   2
FREE PPs:           465 (476160 megabytes)   HOT SPARE:        no
USED PPs:           93 (95232 megabytes)     MAX REQUEST:      1 megabyte
FREE DISTRIBUTION:  111..77..54..111..112
USED DISTRIBUTION:  01..35..57..00..00
MIRROR POOL:        None

2.smit lvm
	1.Select logical volume
	2.Add logical volume group 
3.provide volume group name 
	Ex:rootvg
4.provide the details 
	Vloumr group name :ndloglv
	Logical partiotions :100
	Physical volume hdisk0, hdisk1â€”mirrored
	Numer of copies of each logical :2
5.Create file system 
	#Smit crfs
	1.Add an Enhanced journaled file system.
	2.Add an Enhanced journaled file system on a previousily defined logical volume.
	Logical Volume name	:ndloglv
	mount point 	:/ndloglv
	Mount autometically at system restart	: yes
	Permissions	:read/write
	Block size [bytes]	:4096
6.Mount the file system 
	#mount 

	
	
	




=========================================================================================================================================================================>
CUT:

lspv | cut -c 6-7            lists the hdisks numbers (cuts the 6th and 7tn character (disk nubers))

=========================================================================================================================================================================>

EXPR: integer arithmetic

\*                           multiplication (\ is needed to tell * is not a special character)
/                            division
%                            remainder
+                            addition
-                            substraction

expr \( 6 + 4 \) / 2        5

=========================================================================================================================================================================>

FIND: recursively searches the directory tree

find / -xdev -type f -name "cor*" -size +10000c -exec ls -l {} \;

    /                        where to find
    -xdev                    looks only in the given fs
    -type f                  what type to look for (f: file, d: direcory)
    -name "cor*"             name to look for
    -size +10000c            search for the given size (+10000c : greater than 10000 character (larger then 10kbyte))
    -size +2                 search for greater than 1kbyte (bloxk size is 512 byte, that's why +2 is given)
    -exec ls -l {} \;        what command to execute
                             ({}: it represents each findings and \; is needed at the end of line)
                             e.g. find /home -xdev -name "*.old" -exec rm {} \;
    -mtime -1                file modifocation date is less then 1 day (+1 means older than 1 day)

find . -name '*.ksh' -ok rm {} \; this will ask if the command (rm) should be executed or not (much safer if find is not perfect)
find /etc/rc.d -ls           it lists the files and dirs in the given dir
find /tmp/bb -exec awk '/func/ {print FILENAME}' {} \;   it will check in /tmp/bb if any files contains the word "func" and list those

=========================================================================================================================================================================>

GREP: (Global Regular Expression Parser) The grep command searches for the pattern.

grep -i                      ignore case (small letter or capital)
grep -c                      displays only a count of matching lines
grep -n                      shows line number at the beginning of the matching line
grep -v                      invert the sense of matching, to select non-matching lines
grep -w                      selects only whole words
grep -l                      lists the name of the files (once) which contain matching line  (grep -l paging00 *)

ps -ef | egrep 'ssh|aix'     select lines with ssh and aix
errpt -a|grep -A1 'NAME'     selects lines with NAME and shows 1 line after that (A: after, B: before)

=========================================================================================================================================================================>

HEAD, TAIL:

head filename                displays first 10 lines of the file
head -50 filename            displays first 50 lines

tail filename                displays last 10 lines of the file
tail -50 filename            displays last 50 lines
tail +15 filename            displays the file starting from the 15th line
tail -f filename             used when we are monitoring the file (interactively shows how the file is changing)

=========================================================================================================================================================================>

SORT:

cat /etc/passwd | sort -t: -n +2
    -t:                      gives the delimeter character (here :, deafult is the space)
    -n                       numerical order
    +2                       sort by the 3rd column
    -r                       reverse order

df -m | sort -n +3 | egrep '9.%|100%'    sorts by the 4th column (%) of the filesstems, which are 90-100% full
cat animals | sort +0.1      sort the file animals by the second character of the first word
ls -lR |sort -nk 5|tail -20  sorts the 20 largest file
lspv | sort -k1.6n           list hdisk in numerical order (lspv|sort -tk +1 -n <--it is the same (delimiter is "k")
lspv | sort -k1,1.5 -k1.6n   list hdisks then vpaths in numeric order

=========================================================================================================================================================================>

TAR:

tar -cvf /tmp/file.tar .                       saves where we are to the given path (-c: create, -v: verbose, -f: file)
tar -cvf conf.tar conf                         creates conf.tar of the dir conf
tar -xvf /tmp/file.tar                         extracts the tar file (-x: extract)
tar -xvf -C /home/bb /tmp/file.tar             it will extract the tar file to /home/bb
tar -tvf /tmp/file.tar                         list (verify) the content of a tar file
#tar -cvf - directory_name | gzip -c > archive_name.tar.bz 
		-c : create a new file.
		-v : verbose mode (shows the files being archived)
		-f : Specify the archive file name.
		Ex:
		# tar -cvf - sbiiretwuata23_24_bkp.nmon | gzip -c > sbiiretwuata23_24_bkp.nmon.tar.gz
tar -cf - * | gzip -9 > vmi.tar.gz             makes tar and zip wehere we are
tar cvf - openssh5.8p1 | gzip -c > openssh5.8p1.tgz   creates tgz in one command


tar: 0511-197 DirectorServer: Cannot write data extracted with the tar command:
A file cannot be larger than the value set by ulimit.

I changed these ulimit settings after that it was OK (dont't forget to logout and login again)
root@bb_lpar: /bb # chuser fsize=-1 fsize_hard=-1 root
root@bb_lpar: /bb # chuser data=-1 data_hard=-1 root

=========================================================================================================================================================================>

ZIPPING:

gzip-V                       shows gzip version
gzip file1                   zip
gzip -d file1.gz             unzip

gzip -9 filename             will zip (and remove the file automatically)
gunzip filename              unzipping it

gzip -c file > file.gz       it creates a zip file but leave the original file as well
> filename                   after that original file can be emptied

compress file1               the original file will be deleted and a new compressed file will be created with a .Z at the end
zcat file1.Z                 displays the compressed files (without uncompression)
uncomress file1.Z            uncompressing a file (the compressed one will be deleted)

if you receive this:
gunzip SysDir6_2.tar.gz
gunzip: SysDir6_2.tar: File too large

this is because gzip 1.2.4 (or lower gzip versions) need a patch to accept large files, workaround for this problem:
gzip -d -c SysDir6_2.tar.gz| tar xvf -

gzip -c sbiicoruata145_23* > /mksysb_backup_UAT/sbiicoruata145_23.gz
=========================================================================================================================================================================>

TRUSS:

truss <command>              it will show what system calls a command makes
truss -c -p <pid>            it will trace a process (-c: counts the system calls rather than displaying them, -p: pid)
truss -d -p <pid> -o
truss -t open lsps -a        shows whatis needed for the given command (here lsps -a)

=========================================================================================================================================================================>

XARGS:

lspv|awk '{print$1}'|xargs   it will list the elements in a line separated with space
cat list | xargs -t rm       will rm all the files which are in the file list
ls | xargs -t -I {} mv {} {}.old it will rename to .old all the file in the current dir
    -t                       it echoes the constructed command (trace mode) (it is optional)
    -I {}                    insert each line of the ls to that place where the {} symbol appear

lsdev -Cc disk | xargs -n1 rmdev -dl removes all the listed disks
    -n1                      1 element will be passed each time to xargs (if n2 then the command will be created with 2 elements)

=========================================================================================================================================================================>

OTHER:

file <filename>              shows the type of a file

diff file1 file2             compares only text files
cmp file1 file2              compares all types of files
dircmp dir1 dir2             compares directories

time cp file1 /home          show the time to accomplish the command (godd for performance analysis)

ps $$                        shows which shell is in use
echo $SHELL                  shows the current shell
printenv                     view environmental variables

cat -vet file                shows tabs, enters... as viewable characters
    -v                       displays non-printing characters as visible characters
    -t                       displays tab as ^I
    -e                       displays enter as $

!!! sh -xv <command...>      for troubleshooting, if a command fails, you can see where exactly it failed in the command script!!!
                             (sh -xv exportvg rootvg)

dd if=/dev/zero of=/home/user/bb/4GB_file bs=1m count=4000  it creates a 4GB file
lmktemp <filename> <size_in_bytes>   it creates a file with given size

alias dir='ls'               creates an alias   
unalias dir                  removes an alias
set - unset

df -g | awk '{sum = sum + $3} END {print sum}' it sums up the fs in gigabyte (by the 3rd column)
for i in `ls -l | grep old | awk '{print $9}'` ;  do du -sk $i; done | awk '{sum = sum + $1} END {print sum}'

generating random passwords:
dd if=/dev/urandom bs=16 count=1 2>/dev/null | openssl base64 | sed "s/[=O/\]//g" | cut -b1-8
=========================================================================================================================================================================>


=========================================================================================================================================================================>


AT:



batch                       

=========================================================================================================================================================================>

Time synchronization:timed, ntpd, setclock
ntp is considered superior to timed.


NTP:
ntpd is a daemon that runs to keep your time up to date/time. For this you must configure ntp.conf so it will know where to get the date/time.
ntpdate is a command that will use ntp.conf to do an update now as opposed to waiting for ntpd to do it.
Translation: You want ntpd, you need to configure ntp.conf. You CAN use ntpdate to do manual updates.

should put this line to /etc/ntp.conf:
server timeserver.domain.com
driftfile /etc/ntp.drift
tracefile /etc/ntp.trace
...
...


Date change:
1. stopsrc -s xntpd
2. ntpdate <ntp server>                      <--ntpdate command will decline if xntpd is running
   4 Oct 14:20:07 ntpdate[491628]: step time server 200.200.10.100 offset -32.293912 sec
<<3. smit date>>
4. vi /etc/rc.tcpip
5. uncomment this line: start /usr/sbin/xntpd "$src_running"
6. startsrc -s xntpd

=========================================================================================================================================================================>

Configuring NTP:

ON SERVER:
1. lssrc -ls xntpd                          <--Sys peer should show a valid server or 127.127.1.0.

If the server is "insane":
2. vi /etc/ntp.conf:
   Add:
      server 127.127.1.0
      Double check that "broadcast client" is commented out.

      stopsrc -s xntpd
      startsrc -s xntpd
     If it is a DB server, use the -x flag to prevent the clock from changing in a negative direction.
     Enter the following:startsrc -s xntpd -a "-x"

3. lssrc -ls xntpd                           <--check if the server is synched. It can take up 12 minutes


ON CLIENT:
1. ntpdate -d ip.address.of.server           <--verify there is a suitable server for synch
The offset must be less than 1000 seconds for xntpd to synch.
If the offset is greater than 1000 seconds, change the time manually on the client and run the ntpdate -d again.

If you get the message, "no server suitable for synchronization found", verify xntpd is running on the server (see above) and that no firewalls are blocking port 123.

2. vi /etc/ntp.conf                          <--specify your xntp server in /etc/ntp.conf, enter:
(Comment out the "broadcastclient" line and add server ip.address.of.server prefer.)
Leave the driftfile and tracefile at their defaults.

3. startsrc -s xntpd                          <--start the xntpd daemon:
(Use the -x flag if it is appropriate for your environment.)

4. vi /etc/rc.tcpip                            <--uncomment xntpd from /etc/rc.tcpip so it will start on a reboot.
Uncomment the following line:
      start /usr/sbin/xntpd "$src_running"
      If using the -x flag, add "-x" to the end of the line. You must include the quotes around the -x.

5. lssrc -ls xntpd            <--verify that the client is synched.
Sys peer should display the IP address or name of your xntp server. This process may take up to 12 minutes.
=========================================================================================================================================================================>

NTP problem: No association ID's returned
# ntpq -p
No association ID's returned

This can mean different things, but mainly NTP server somehow cannot be reached.
(could be DNS resolution issues, something wrong in ntp.conf, or firewall...)
(Once I had special characters at the end of each line in ntp.conf, which was not shown by cat. It could be seen only with vi or cat -vet. After removing those and restarting xntpd everything was OK)

(Another time on VIO server both /etc/ntp.conf and /home/padmin/config/ntp.conf were there, but they were not identical. In this case either removing /etc/ntp.conf or making them identical and after that restarting xntpd as padmin: stopnetsvc xntpd and startnetsvc xntpd, resolved the problem.)

Below resolution works if server name could not be resolved:

It can be checked with this as well:
# ntpq -p <severname>

# tail /etc/ntp.conf
driftfile /etc/ntp.drift
tracefile /etc/ntp.trace
server timeserver.domain.com prefer
server timeserver2.domain.com

# ping timeserver.domain.com
0821-062 ping: host name timeserver.domain.com NOT FOUND

# tail /etc/netsvc.conf
hosts=local

# nslookup timeserver.domain.com
Server:  ns.domain.com
Address:  10.20.10.10

Name:    timeserver.domain.com
Address:  10.20.10.11

# vi /etc/netsvc.conf
-> hosts=local,bind4

# refresh -s xntpd

# ntpq -p
     remote           refid      st t when poll reach   delay   offset    disp
==============================================================================
sys_pmm-1        timeserver2     2 u   24   64    1    13.75    1.279 15875.0
timeserver2 .    hopf.           1 u   23   64    3    16.85   -5.670 7875.17

------------------
------------------
------------------

Time Zone variable:

Time Zone variable (TZ) is defined in /etc/environment (echo $TZ), and time zone can be specified in two formats: POSIX and Olson.

Olson:
It maintains a database for each time zone under the /usr/share/lib/zoneinfo.

# ls -l /usr/share/lib/zoneinfo/Europe
-rw-r--r--    1 bin      bin            2917 Sep 13 2013  Amsterdam
-rw-r--r--    1 bin      bin            1725 Sep 13 2013  Andorra
-rw-r--r--    1 bin      bin            2245 Sep 13 2013  Athens
...

This format uses known names of cities or regions. We can specify the time zone name in a simple, easy-to-understand format: TZ=America/New_York


Posix:
The POSIX time zone format is the traditionally used format for AIX systems. The advantage of POSIX is that you can easily and explicitly specify the time zone and daylight saving time (DST) manually.

DST: Daylight Saving Time (this means that we have to change our clock at spring/autumn)

The TZ variable specified in POSIX format contains all information required to identify the time zone, specify when to switch DST on and off, and specify the offset from Coordinated Universal Time (UTC). AIX internally does everything in UTC time, and any display of time to the users is based on the time zone and DST rules specified by TZ variable.

TZ format in POSIX: TZ = local_timezone,date,date
TZ=NFT-1DFT-2,M3.5.0,M10.5.0        <--DST is used
TZ=CUT                              <--DST is not used

Usually letter "D" means Daylight Saving Time (DST). The US rules have letters "S" for standard and "D" for DST.
For example America/New_York zone format in POSIX looks this way: EST5EDT,M3.2.0,M11.1.0  ("EST" and "EDT" shows these changes in the timezone)

if you see this:
NFT-1DFT-2,M3.5.0,M10.5.0

NFT             <--name of Standard Time (Oct. -> March)
-1              <--difference between standard time and UTC (or CUT) (it means between Oct. and March our time is behind 1 hour from UTC)
DFT             <--name of Daylight Saving Time (March -> Oct.)
-2              <--difference between DST and UTC (or CUT) (it means between March and Oct our time is behind 2 hour from UTC)

Start Daylight Saving Time:
M3              <--month 3 (March)
5               <--5. occurence on that month
0               <--sunday

Stop Daylight Saving Time:
M10             <--month 10 (October)
5               <--5. occurence on that month
0               <--sunday

The "CUT0" is actually another POSIX $TZ value, not an Olson name,and it refers to constant UT+0h, with no DST, and constant abbreviation "CUT".

=========================================================================================================================================================================>

In 'smit chtz_user' 2 terms are used for setting timezones:

Standard Time: time usually used from end of October until end of March
Daylight Saving Time: this is the time usually used from end of March until end of October

grep TZ /etc/environment                         checking TZ variable (echo $TZ works as well)
tail -1 /usr/share/lib/zoneinfo/Europe/Athens    to get some info regarding POSIX abbreviation from an Olson value
zdump Turkey                                     shows actual date at given zone (zdump CET works as well)
zdump -v CET | grep 2015                         getting info about DST changing date/time in the given year (idtst=0 means DST is turned off)

=========================================================================================================================================================================>

TZ change:
smitty chtz_user (smitty chtz_date) or chtz
(here you can see timezone list: ls -l /usr/share/lib/zoneinfo)

for example:
chtz EST5EDT                                      <--it will change timezone to EST5EDT

Environment variables are examined when a command starts running. The environment of a process is not changed by altering the /etc/environment file. 
Any processes that were started prior to the change to the /etc/environment file must be restarted if the change is to take effect for those processes. 
If the TZ variable is changed, the cron daemon must be restarted, because this variable is used to determine the current local time.

=========================================================================================================================================================================>

LOCATION CODES:

The location code is another way of identifying the physical device. The format is: AB-CD-EF-GH.
Devices with a location code are physical devices. Devices without a location code are logical devices.

physical location code: lscfg | grep hdisk0
AIX location code: lsdev -Cc disk
Both location codes: lsdev -Cc adapter -F "name status physloc location description"

=========================================================================================================================================================================>


FRU, VPD:

FRU (Field Replaceable Unit) is the number used by IBM to identify the devices. (sometimes it is called 'Part Number') These are needed forhardware replacement.

VPD  (Vital Product Data) is the basic data (infos) about the device which is stored in the EEPROM of the device and it can be read by the OS. It can be presented by the command 'lscfg' and it contains the FRU as well.

lsdev        shows information about devices from ODM (-C Customized Devices, -P Predefined Devices   
lscfg        display vital product data (VPD) such as part numbers, serial numbers...
lsattr       display attributes and possible values (the information is obtained from the Configuration database (ODM?), not the device)

=========================================================================================================================================================================>

INFO ABOUT THE DEVICES:

prtconf                      displays system configuration information
lsdev -PH                    lists supported (predefined) devices (-H shows the header above the column; lsdev -Pc adapter -H)
lsdev -CH                    lists currently defined and configured devices (lsdev -Cc adapter -H)
lsdev -CHF "name status physloc location description" this will show physical location code and AIX location as well
                             (Devices with a location code are physical devices. Diveces without a location code are logical devices.)
lsdev -p fscsi0              displays the child devices of the given parent device (in this case the disks of the adapter)
lsdev -l hdisk0 -F parent    displays the parent device of the given child device (in this case the adapter of the disk)
                             (it is the same: lsparent -Cl hdisk0

mkdev -l hdisk1              put from defined into available state (or creates an entry in customized db if there wasn't any)
rmdev -l hdisk1              put from available into defined state
rmdev -dl hdisk1             permanently remove an available or defined device

rendev -l hdisk5 -n hdisk16  it changes the name of the device (as long as it is not in a vg (in AIX 6.1 TL6))

odmget -q parent=pci0 CuDv   shows child devices of pci0 (in the output look for the "name" lines)
odmget -q name=pci0 CuDv     shows parent of pci0 (in the output look for the "parent" line)

lscfg -v                     displays characteristics for all devices
lscfg -vl ent1               displays characteristics for the specified device (-l: logical device name)
lscfg -l ent*                displays all ent devices (it can be fcs*, fscsi*, scsi*...)

lsattr -El ent1              displays attributes for devices (-l: logical device name, -E:effective attr.)
lsattr -Rl fcs0 -a init_link    displays what values can be given to an attribute
odmget PdAt |grep -p reserve_policy  displays what values can be given to an attribute


lsslot -c pci                lists hot plug pci slots (physical)
lsslot -c slot               lists logical slots
lsslot -c phb                lists logical slots (PCI Host Bridge)

cfgmgr                       configures devices and installs device software (no need to use mdev, rmdev)
cfgmgr -v                    detailed output of cfgmgr
cfgmgr -l fcsX               configure detected devices attached to fcsX (it configures child devices as well)
cfgmgr -i /tmp/drivers       to install drivers which is in /tmp/drivers automatically during configuration

smitty devices
 
=========================================================================================================================================================================>

Changing state of a device:
    1.lsdev -Cc tape        in normal case it shows: rmt0 Available ...
    2.rmdev -l rmt0         it will show: rmt0 Defined
    3.rmdev -dl rmt0        it will show: rmt0 deleted (the device configuration is unloaded from the ODM)
    Now rmt0 is completely removed. To redetect the device:
    4.cfgmgr                after cfgmgr, the lsdev -Cc tape command shows: rmt0 Available ...


=========================================================================================================================================================================>

If rmdev does not work because: "... specified device is busy":

1. lsdev -C| grep fcs1             <--check the location (in this case it is 07-00)
2. lsdev -C| grep 07-00            <--check all the devices in this location

3. this will show which process is locking the device
for i in `lsdev -C| grep 07-00 | awk '{print $1}'`; do
fuser /dev/$i               
done

=========================================================================================================================================================================>

ERROR LOGGING:

errdemon					<--Starts the error logging daemon errdemon that reads error records from the /dev/error file and creates error log entries in the default system error log /var/adm/ras/errlog.
The errdemon is started during system initialization and continuously monitors the special file /dev/error for new entries sent by either the kernel or by applications.
The name and size of the error log file and the size of the memory buffer may be viewed with the errdemon command:


/usr/lib/errdemon			<--starts the error logging daemon.
/usr/lib/errdemon -l		<--displays the path to the system error log file and error log size.
/usr/lib/errdemon -s 2000000<--changes the maximum size of the error log file to 2 MB.
Log File                /var/adm/ras/errlog
Log Size                1048576 bytes
Memory Buffer Size      32768 bytes

=========================================================================================================================================================================>


/usr/lib/errdemon               restarts the errdemon program
/usr/lib/errstop                stops the error logging daemon initiated by the errdemon program
/usr/lib/errdemon -l            shows information about the error log file (path, size)
/usr/lib/errdemon -s 2000000    changes the maximum size of the error log file

errpt                           retrieves the entries in the error log
errpt -a -j AA8AB241            shows detailed info about the error (with -j, the error id can be specified)
errpt -s 1122164405 -e 11231000405
                                shows error log in a time period (-s start date, -e end date)
errpt -d H                      shows hardware errors (errpt -d S: software errors)

Error Classes:
    H: Hardware
    S: Software
    O: Operator
    U: Undetermined

Error Type:
    P: Permanent - unable to recover from error condition
       Pending - it may be unavailable soon due to many errors
       Performance - the performance of the device or component has degraded to below an acceptable level
    T: Temporary - recovered from condition after several attempts
    I: Informational
    U: Unknown - Severity of the error cannot be determined


Types of Disk Errors:
DISK_ERR1: Disk should be replaced it was used heavily
DISK_ERR2: caused by loss of electrical power
DISK_ERR3: caused by loss of electrical power
DISK_ERR4: indicates bad blocks on the disk (if more than one entry in a week replace disk)


errclear                  deletes entries from the error log (smitty errclear). Software and operator errors (older than 30 days) and hardware errors (older than 90 days) are removed using crontab.
errclear 7                deletes entries older than 7 days (0 clears all messages)
errclear -j CB4A951F 0    deletes all the messages with the specified ID              
errlogger                 log operator messages to the system error log
                          (errlogger "This is a test message")
						  errlogger new disk added on scsi1 adapter : logs "new disk added on scsi1 adapter" in the system error log.
						  


=========================================================================================================================================================================>


Mail notification via errpt and errnotify

AIX has an Error Notification object class in the Object Data Manager (ODM). An errnotify object is a "hook" into the error logging facility 
that causes the execution of a program whenever an error message is recorded. By default, there are a number of predefined errnotify entries, 
and each time an error is logged via errlog, it checks if that error entry matches the criteria of any of the Error Notification objects.

0. make sure mail sending is working correctly from the server
1. create a text file (i.e. /tmp/errnotify.txt), which will be added to ODM

Add the below lines if you want notifications on all kind of errpt entries:

errnotify:
  en_name = "mail_all_errlog"
  en_persistenceflg = 1
  en_method = "/usr/bin/errpt -a -l $1 | mail -s \"errpt $9 on `hostname`\" aix4adm@gmail.com"        <--specify here the email addres


Add the below lines if you want notifications on permanent hardware entries only:

errnotify:
  en_name = "mail_perm_hw"
  en_class = H
  en_persistenceflg = 1
  en_type = PERM
  en_method = "/usr/bin/errpt -a -l $1 | mail -s \"Permanent hardware errpt $9 on `hostname`\" aix4adm@gmail.com"


2. root@bb_lpar: / # odmadd /tmp/errnotify.txt                                 <--add the content of the text file to ODM:
3. root@bb_lpar: / # odmget -q en_name=mail_all_errlog errnotify               <--check if it is added successfully
4. root@bb_lpar: / # errlogger "This is a test message"                        <--check mail notification with a test errpt entry

You can delete the addded errnotify object if it is not needed anymore:
root@bb_lpar: / # odmdelete -q 'en_name=mail_all_errlog' -o errnotify
0518-307 odmdelete: 1 objects deleted.

(source: http://www.kristijan.org/2012/06/error-report-mail-notifications-with-errnotify/)

=========================================================================================================================================================================>


DIAGRPT: (DIAG logs reporter)

diagrpt                   Displays previous diagnostic results
cd /usr/lpp/diag*/bin
    ./diagrpt -r          Displays the short version of the Diagnostic Event Log
    ./diagrpt -a          Displays the long version of the Diagnostic Event Log



=========================================================================================================================================================================>


ALOG:	Creates and maintains fixed-size log files.

/var/adm/ras             this directory contains the master log files (alog command can read these files)
                         e.g. /var/adm/ras/conslog
alog        			 <--Creates and maintains fixed-size log files.
alog -L                  shows what kind of logs there are (console, boot, bosinst...), these can be used by: alog -of ...
alog -Lt <type>          shows the attibute of a type (console, boot ...): size, path to logfile...
alog -ot console         lists of those errors which are on the console
alog -ot boot            shows the bootlog (the log that holds boot information).
alog -ot lvmcfg          lvm log file, shows what lvm commands were used (alog -ot lvmt: shows lvm commands and libs)


=========================================================================================================================================================================>

AIX - STARTUP, SHUTDOWN
Startup - Shutdown

mkitab                     adds record to the /etc/inittab file (-i: insert the newline anywher in the inittab file)
                           (without the -i parameter, the line wil be appended to the end of the file)
lsitab                     lists record to the /etc/inittab file (lsitab -a -->lists all records of the inittab)
chitab                     adds record to the /etc/inittab file

uptime                     shows the time the server is up
last reboot                shows the history when the server has been rebooted

who -b                     info about the last boot

/dev/ipldevice             it is a hardlink to the device which holds hd5 (check major minor numbers)
ipl_varyon -i              shows the state of the bootrecord

=========================================================================================================================================================================>

Telinit:

The telinit command sets the system at a specific run level. A run level is a software configuration that allows only a selected group of processes to exist.

who -r                     shows what is the runlevel of the system
cat /etc/.init.state       displays the current runlevel

telinit M or shutdown -m   enter to maintenance mode (single user mode)
telinit 2                  return to normal mode
telinit q                  force the system to reread the etc/inittab file


=========================================================================================================================================================================>

System Management Services
Another boot option is to boot machine specific code called the System Management Services (SMS) programs. These programs are not part of AIX. This code is shipped with the hardware and is built-in to the firmware. This can be used to examine the system configuration and set boot lists without dependency on an operating system. It is invoked using the F1 function key or the numeric 1 key.

Maintenance Mode
If your system will not boot or you have lost the root password, you will need to boot your machine using bootable media other than the hard drive (like an installation CD or NIM server). This will boot you into â€œmaintenanceâ€ mode, which will give you â€œbackdoorâ€ access to your system.

=========================================================================================================================================================================>

BOOTING TERMINOLOGY

0. firmware bootlist:
    in SMS set boot devices:disk, cd-rom, network

1. AIX bootlist:
    At startup, the system searches for an AIX boot image in the boot list, a list of hdisks stored in the hardware's NVRAM.
    If the system fails to boot, you can change the boot list

    bootlist -m normal -o               <--shows bootlist
    bootlist -m normal hdisk0 hdisk1    <--sets bootlist
    bootlist -m normal hdisk0 blv=hd5 pathid=0,1 hdisk1 blv=hd5 pathid=0,1,2           <--set bootlist using different paths (in given order)
    bootlist -m normal en0 bserver=10.20.10.10 gateway=10.20.50.1 client=10.20.50.6    <--force the system for network boot
                                        (bs:boot server, client:the machine what we reboot)
    bootlist -m normal -ov              <--it will show boot disks location codes (can be compared what sms shows during boot)

    root@aix31: / # bootlist -m normal -ov
    'ibm,max-boot-devices' = 0x5
    NVRAM variable: (boot-device=/pci@80000002000000c/pci@2/pci1069,b166@1/scsi@0/sd@4:2)
    Path name: (/pci@80000002000000c/pci@2/pci1069,b166@1/scsi@0/sd@4:4)               <--this pathname shows which blv is used
    match_specific_info: ut=disk/scsi/scsd
    hdisk0 blv=bos_hd5

2. boot record: (bootrec, bootstrap code)
    locates the boot logical volume from the harddisk, it is the first 512 byte on the disk.

    ipl_varyon -i                       <--shows the state of the bootrecord
    bosboot -ad /dev/hdisk1             <--creates the boot record and the boot logical volume as well!!!
    chpv -c hdiskX                      <--clears the boot record

3. boot logical volume (blv) (hd5):
    Contents of the boot logical volume:
        -AIX kernel (kernel is always loaded from the blv) (a copy of the kernel is under /unix)
        -boot commands (cfgmgr, bootinfo)
        -reduced copy of the ODM (mini-ODM)
        -rc.boot: after starting the kernel it gets over the control

    if blv (hd5) has to be created again: one physical partition in size, must be in rootvg and outer edge as intrapolicy.
    Specify boot as logical volume type. (mklv -y hd5 -t boot -a e rootvg 1)

    bosboot -ad /dev/hdisk1            <--creates the boot image on the disk
    savebase -v                        <--updates the mini-ODM (in the boot lv) that resides on the same disk as /dev/ipldevice (-v verbose)

    It may happen that 1 partition is not enough for hd5. If you add a new partition make sure the 2nd partition is next to the 1st one.
    (IPL code won't be able to jump from partition 1 to 10, for example (lslv -m hd5))

----------------------------------------



The bootrec (also known as bootstrap) is read by a special part of the firmware called System ROS (- the Read Only Storage is responsibe for the initial preparation of the machine -), and it (bootrec)  tells the ROS that it needs to jump X bytes into the disk platter, to read the boot logical volume, hd5. During reading the blv, there is a mini-ODM read into the RAM. (Later, when the real rootvg fs comes online, AIX merges the data in mini-ODM with the real ODM held in /etc/objrepos.) When an LVM commands changes the mini-ODM, the command 'savebase' needed to run as well. Savebase takes a snapshot of the ODM and compresses it

-----------------------------------------
-----------------------------------------
=========================================================================================================================================================================>


THE AIX BOOT SEQUENCE:

1.POST
After you've turned on the power and the server is starting, the server's hardware is verified and checked for possible issues. This step is called power-on self-test (POST), it is checking the memory, keyboard, sound card, and network devices.

2. Bootstrap
After the POST process has finished, the bootstrap -or a smaller program used to load a larger program-is loaded into memory. The bootstrap then loads the Boot Logical Volume (BLV) into memory.

3. BLV
The BLV is the location that contains AIX's bootable images. Typically, the BLV can be found on the local disk of the server. The BLV contains the AIX kernel, the rc.boot file, commands required during the boot process, and a trimmed-down version of the Object Data Manager (ODM).
After the BLV is loaded, the kernel takes over the boot process.

4. The AIX kernel
The AIX kernel stored in the BLV creates the / (root), /usr, and /var file systems in RAM. These file systems as well as the kernel are stored in RAM initially during the boot process. After the file systems have been loaded into RAM, the kernel executes the init process, which was loaded out of the blv (not from the root filesystem). This init process executes rc.boot.
           
5. The rc.boot file
The rc.boot file has three important cases of execution during the AIX boot-up process:
    -The first section of rc.boot initializes the system's hardware to prepare it for the operating system to boot.
    A limited amount of devices needed to start the system are configured at this time with the Configuration Manager command cfgmgr.

    -During the second phase of rc.boot, rootvg is activated and the file systems /, /usr, and /var as well as the paging space are mounted.
    After these file systems have been mounted, init is replaced with init on the disk as PID 1.
    All /dev files and the customized ODM files from the RAM file system are merged to disk and the RAM is cleared.

    -In the third and final section of rc.boot, the actual init process is executed from disk.
    When init is executed, the /etc/inittab file is read, and each item is executed and /tmp file system is now being mounted to disk.
    The cfgmgr command is run again on the remaining devices that were not configured in the first section of rc.boot.

After booting, during start-up first initialisation is runnning (/etc/inittab) and after that the actual run level scripts (/etc/rc.d/rc2).
('rc' name is used in places, it is an abbreviation of 'run command')
-----------------------------------------
-----------------------------------------
=========================================================================================================================================================================>

1.SYSTEM INITIALISATION: INIT

The init process runs first. Its primary role is to start other processes listed in the /etc/inittab file. The init process rereads the /etc/inittab file every 60 seconds.

Order of the /etc/inittab entries:
    1.initdefault--> init:2:initdefault (init reads the runlevel from this line, in this case 2)
    2.sysinit --> brc::sysinit:/sbin/rc.boot 3 (itt calls rc.boot file with argument 3)
    3.powerfailure detection (powerfail)
    ...
    6.system resource controller (srcmstr)
    7.start TCP/IP daemons (rctcpip)
    8.start NFS daemons (rcnfs)
    9.cron
    ...

format of the entries: Identifier:RunLevel:Action:Command

Identifier: uniquely identifies an object
RunLevel: the runlevel at which the enrty can be processed. (0-9)
Action: how to treat the process: respwawn, wait (wait for its termination), once, boot...
Command: A shell command to execute

The colon character ( : ) is used as a delimiter as well as a comment character. To comment out an inittab entry, add : at the beginning of the entry (:Identifier:RunLevel:Action:Command)

e.g..:
srcmstr:23456789:respawn:/usr/sbin/srcmstr # System Resource Controller
harc:2:wait:/usr/es/sbin/cluster/etc/harc.net # HACMP for AIX network startup
rctcpip:a:wait:/etc/rc.tcpip > /dev/console 2>&1 # Start TCP/IP daemons

--------------------------------------------
many daemons are started from /etc/inittab:for example src, cron..and the rc.tcpip as well
rc.tcpip contains even more daemons to start: dhcpd, lpd, syslogd...             <--these can be controlled usually by src
and rc.tcpip starts inetd as well which contains other daemons: ftp, telnet..    <--these should be controlled by src
--------------------------------------------


2. Startup and Shutdown scripts:

There are more places to put these scripts:

/etc/rc.d:
-init.d: here you can put your own scripts for start/stop

-rcX.d (e.g. rc2.d): you can simply add your script to the different levels (rcX.d).
 The start script must start with a capitol S and the stop scripts must start with a capitol K.
 Usually the scripts in rcX.d are symbolic relative links to the actual scripts in init.d.
 The scripts know whether to (S)tart or (K)ill the service by checking to see if it is running, I think.
 (K and S scripts are identical (??), check Ksshd/Ssshd)

AIX does not follow the System V R4 (SVR4) run level specification. It defines run levels from 0 to 9, 0 and 1 are reserved, 2 is the default normal multiuser mode and run levels from 3 to 9 are defined by administrator.

Example start/stop script:

ls -l /etc/rc.d/rc2.d:
K99APP -> /etc/rc.d/init.d/APP
S99APP -> /etc/rc.d/init.d/APP

cat /etc/rc.d/init.d/APP:
#!/bin/ksh
#
# description: APP startup script
#

case "$1" in
    start)
        echo "start db"
        su - dbuser -c /var/db/bin/start_db.ksh
        sleep3
        echo "start app"
        su - appuser -c /app/scripts/start_app.ksh
        ;;

    stop)
        echo "stop app"
        su - appuser -c /app/scripts/stop_app.ksh
        echo "stop db"
        su - dbuser -c /var/db/bin/stop_db.ksh
        ;;

    *)
        $ECHO "Usage: $0 {start|stop}"
        exit 1
        ;;
esac

-----------------------------------------
-----------------------------------------
=========================================================================================================================================================================>

SHUTDOWN:

You can shut down the system using the shutdown command, which sends all terminals the following warning message:
shutdown: PLEASE LOG OFF. System maintenance is in progress. All the processes will be killed in one minute.

One minute after the message is displayed, the terminals are disabled, and then the system gracefully shuts down

shutdown [ -options] [ +time message]
    -F performs a fast shutdown, sends no warning message, does not wait for applications to finish
    -r reboots after shutdown, sends a warning message, and shuts down gracefully
    -m shuts down into Maintenance mode, sends a warning message, and shuts down gracefully
    -k sends a warning message but does not shut down the system.
       (It is used to quickly determine whether it is okay to shut down the system)
    -l  logs the output to the file /etc/shutdown.log
    -h halts the operating system completely; same as the -v flag.

The halt command shuts down the system, but it does not send a warning message. It does not wait for applications to finish processing. It is generally not used when users are logged in to the system since it does not restart the computer

The reboot command shuts down processes only. It leaves services and communications running. It does not send a warning message, and after shutdown, it checks the file systems and then restarts the system.

The fastboot command performs the same function, but it does not check the file systems when the system reboots

/etc/rc.shutdown        customize shutdown sequence, it is called by the shutdown command and executed first
                        (for example it is useful if you need to close a databse prior to a shutdown)
                        If rc.shutdown fails (non-zero return code value) the shutdown sequence is terminated.
-------------------------------------------------------------

Modifying the /etc/inittab file:
(we want to add the find command to it, on run level 2, and start it again once it has finished)

1.ps -ef| grep find                                          <--checking that no find processes are running
2.mkitab "xcmd:2:respawn:find / -type f > /dev/null 2>&1"    <--adds a record named xcmd to /etc/inittab
3.lsitab xcmd                                                <--shows the new record
4.ps -ef| grep find                                          <--checking the new process
5.kill <pid>                                                 <--cancel the find process
6.ps -ef| grep find                                          <--as it is configured as respawn it will respawn
7.chitab "xcmd:2:once:find / -type f > /dev/null 2>&1"       <--changes it from respawn to once (after kill <pid> it won't respawn)
                                                             (if you can change it to "off", then the line will be ignored)
8.rmitab xcmd                                                <--deletes this record from /etc/inittab

After editing the /etc/inittab file, force the system to reread the file by using telinit q command.
-------------------------------------------------------------

Modifying the bootlist:
1. bootlist -m normal -o                                     <--checking the devices in the bootlist)
2. bosboot -ad hdisk1                                        <--creates a new BLV (boot logical volume) on the disk)
3. bootlist -m normal hdisk1 hdisk0                          <--change the order of the devices: (first hdisk1 and after hdisk0))

bootlist -m normal hdisk0 blv=hd5 hdisk0 blv=bos_hd5
-------------------------------------------------------------

Correct a damaged boot image:

1.lslv -m hd5                                                 <--obtain the boot disk
2.bosboot -a -d /dev/hdiskn                                   <--recreate the bootimage, n is the disk number of the boot logical volume)
3.shutdown -Fr                                                <--restart the system
-------------------------------------------------------------

Changing the ipldevice:
It is Initial Program Load device. It should be a link to the device which is holding hd5 (the disk which was used for boot)

bootinfo -b                                                   <--checking disk used for boot (getconf -a | grep BOOT)
ls -l /dev/ipldevice                                          <--check ipldevice file (find corresponding disk major, minor number)

If there is a difference between bootinfo -s and ipldevice, /dev/ipldevice should be changed:
1. rm /dev/ipldevice                                          <--remove wrong ipldevice file
2. ln /dev/r<bootdisk> /dev/ipldevice                         <--create hard link for coorect rdisk (!!note the r prefix)
3. ls -i /dev/r<bootdisk> /dev/ipldevice                      <--check if ipldevice is correct (same inode number should be seen)

-------------------------------------------------------------
=========================================================================================================================================================================>

STRANGE BOSBOOT ERROR (COULD NOT CREATE BOOT IMAGE)

# bosboot -ad hdisk0 ( bosboot -ad /dev/ipldevice gave the same)
Error opening disk: The file access permissions do not allow the specified action.

0301-179 bosboot: The boot logical volume size must be at least 20 MB.

1. I did checks (everything looked fine):
# bootlist -m normal -o
# iplvaryon -i

# lsvg -l rootvg
# lslv hd5
# lspv -M hdisk0 | head

# ls -l /dev/ipldevice
# ls -l /dev | grep "21,  0"



2. removed/recreated boot logical volume
# rmlv hd5
Warning, all data contained on logical volume hd5 will be destroyed.
rmlv: Do you wish to continue? y(es) n(o)? y
0516-1246 rmlv: If hd5 is the boot logical volume, please run 'chpv -c <diskname>'
        as root user to clear the boot record and avoid a potential boot
        off an old boot image that may reside on the disk from which this
        logical volume is moved/removed.
rmlv: Logical volume hd5 is removed.
0516-1734 rmlv: Warning, savebase failed.  Please manually run 'savebase' before rebooting.

# mklv -y hd5 -t boot -a e rootvg 1 hdisk0
hd5

I did some checks (looked fine):
# lspv -M hdisk0 | head



3. tried bosboot again (now different error message)
# bosboot -ad hdisk0 (all bosboot command gave this error)
Error opening disk: The file access permissions do not allow the specified action.

0516-602 lslv: Logical volume name not entered.
Usage: lslv [-L] [-l | -m] [-n DescriptorPV] LVname
       lslv: [-L] [-n DescriptorPV] -p PVname [LVname]
Lists the characteristics of a logical volume.

0301-168 bosboot: The current boot logical volume, /dev/,
        does not exist on /dev/hdisk0.


There was one bosboot command which seemed to be working (it looks it created it, with some errors):
# bosboot -ad /dev/ipldevice -l hd5
Error opening disk: The file access permissions do not allow the specified action.
Error opening disk: The file access permissions do not allow the specified action.
Error opening disk: The file access permissions do not allow the specified action.
trustchk: Verification of attributes failed: /usr/bin/tee
: group mode
trustchk: Verification of attributes failed: /usr/sbin/bootinfo
: mode accessauths
Error opening disk: The file access permissions do not allow the specified action.
Error opening disk: The file access permissions do not allow the specified action.

bosboot: Boot image is 53276 512 byte blocks.



4. I corrected /usr/bin/tee and /usr/sbin/bootinfo (to get rid of trustchk errors)

I checked on other server these files settings (owner, permissions)

# chmod 555 /usr/bin/tee
# chown bin.bin /usr/bin/tee

# ls -l /usr/sbin/bootinfo
-r-sr-xr-x    1 bin      bin           14656 Sep 06 2012  /usr/sbin/bootinfo
# chmod 550 /usr/sbin/bootinfo


5. tried again bosboot and last error did not want to disappear

# bosboot -ad /dev/hdisk0
trustchk: Verification of attributes failed: /usr/sbin/bootinfo
: accessauths

bosboot: Boot image is 53276 512 byte blocks.



6. Found this IBM link, which gave a lot of help, but the steps there did not work
http://www-01.ibm.com/support/docview.wss?uid=isg1IV35600

# trustchk -n /usr/sbin/bootinfo                                    <--this is for checking if we receive the above error
trustchk: Verification of attributes failed: /usr/sbin/bootinfo
: accessauths

# trustchk -q /usr/sbin/bootinfo 1> /tmp/file1                      <-- creating a temp file

# vi /tmp/file1                                                     <-- vi that file and add "vios.device.manage" to accessauths part

"/tmp/file1" 21 lines, 711 characters
/usr/sbin/bootinfo:
        owner = bin
        group = bin
        mode = 550
        type = FILE
        hardlinks =
        symlinks =
        size = 14656
        cert_tag = 00af4b62b878aa47f7
        signature = 4d67deebe74c64de81d84d25818e7079e60e2c9cb457c71526b8f705e5597a4b8c0cdc165050cce6a5a4acef71ade15f0b3a878f5c5a2dfb1ae0dc8fa300ad714c25bea7f410c4e7a6ae693e10d76cac6e177ffb09a7
64386e01d76f119e693cedfbcaf9891c3605f69b6abf67f8dc1116bf2fa0d76e700f53fff0dadccc9f7b
        hash_value = f4a586fc5048c45535493222f585601fa370afc76f83f032d42025dc97bc8235
        minslabel =
        maxslabel =
        intlabel =
        accessauths = aix.system.boot.info,vios.device.manage        <-- this is the correct line, (it should look like this)
        innateprivs = PV_DAC_R,PV_DAC_W,PV_DEV_CONFIG,PV_KER_RAS
        t_innateprivs = PV_MAC_,PV_MIC
        inheritprivs =
        authprivs =
        secflags = FSF_EPS


# trustchk -d /usr/sbin/bootinfo                                     <--- I followed above link (have no idea about this command)
# trustchk -a -f /tmp/file1                                          <--- I followed above link (have no idea about this command)

# trustchk -n /usr/sbin/bootinfo                                     <-- checking again if we receive any errors, and there were no more error
# bosboot -ad /dev/hdisk0                                            <-- bosboot was working correctly...good job!!!

bosboot: Boot image is 53276 512 byte blocks.


=========================================================================================================================================================================>

AIX - syslogd
syslogd (system logging):
syslogd						<--The syslogd daemon logs messages from kernel, daemons and system applications using /etc/syslog.conf.
Syslog is the (built-in) solution for logging messages generated by AIX. The AIX kernel, various daemons and applications are able to send their log output to syslogd (syslog daemon). Syslogd will create /etc/syslog.pid file during its start-up, which contains the process id of sylogd. Based on the main configuration file: /etc/syslog.conf, syslogd will filter and distribute the incoming messages to different logfiles.

/etc/syslog.conf contains the facilities, severities, the assigned action and optionally the rotation parameters:

*.debug          errlog (add this line to to syslog.conf to redirect all syslog messages to the system error log).
stopsrc -s syslogd : stops the syslogd daemon.
startsrc -s syslogd : starts the syslogd daemon.
refresh -s syslogd : refreshes the syslogd daemon.

=========================================================================================================================================================================>


Facility:

Facility is a category of a message. Basically it is a filter for a specific category from all the incoming messages. Using a facility we can select a type of message and do something with it.

Available facilities:
kern     Messages generated by the kernel.
user     Messages generated by user processes.
mail     Mesages generated by the mail system.
daemon   Messages generated by system daemons, such as ftpd and the telnetd daemons.
auth     Messages generated by the authorization system, including the sshd, login and su commands.
syslog   Messages generated internally by the syslogd daemon.
lpr      Messages genrated by the line printer, such as the lpr and lpc commands.
news     Files reserved for the USENET network news system.
uucp     (obsolete) The UNIX-to-UNIX copy (UUCP) system does not use the syslog function.
local0-7 these local facilities (e.g. local0 or local1) can be used for user defined message handling
*        all facilities

=========================================================================================================================================================================>


Severity:

It specifies the importance or priority of a message. Keep in mind, that when selecting a level, it automatically includes all the levels above of that severity.
(For example choosing "err" will handle at the same time "crit", "alert" and "emerg" messages as well.)

Available severities (in order from top to down):
emerg     Panic conditions that are normally broadcast to all users
alert     Conditions that should be corrected immediately, such as a corrupted system database.
crit      Warnings about critical conditions, such as hardware failures.
err       any kind of errors (below critical level)
warning   Warning messages, that generally does not interfere with normal operation.
notice    Non-error conditions that might require special handling
info      Purely informational messages (usually does not require any handling)
debug     Messages that are used when debugging a program
none      Messages are not sent from the indicated facility to the selected file

=========================================================================================================================================================================>


Action:

It says what should be done with the message, like put it in a file or send it to a user's terminal

Available actions:
file        Output sent to the file specified
@host       The @ sign denotes that messages must be forwarded to a host  The name should be defined in /etc/hosts and represent a remote logserver.
user[,user] The user(s) receive messages if they are logged in.
*           All logged in users will receive messages when they are logged in.

=========================================================================================================================================================================>


Rotation (optional):

The rotation field identifies how rotation is used. If the action field is a file, then rotation can be based on size or time, or both. One can also compress and/or archive the rotated files.

size     specifies that rotation is based on size, and it is followed by a number and either a k (kilobytes) or m(megabytes).
time     specifies that rotation is based on time, followed by a number and either a h(hour) or d(day) or w(week) or m(month) or y(year).
files       specifies the total number of rotated files, followed by a number. If not specified, then there is no limit of rotated files.
compress    specifies that the saved rotated files will be compressed.
archive     specifies that the saved rotated files will be copied to a directory. It is followed by the directory name.

=========================================================================================================================================================================>


Sources of log messages

Syslog can receive messages in three ways:
- Through the syslog() function (most languages provide)
- Through named sockets such as /dev/log (which is enabled by default on most platforms)
- Via UDP on port 514  (if syslogd is running with the -r option.)

So, one important feature of SYSLOG is the ability send messages via UDP on port 514 and then aggregate messages sent from multiple servers on a special server.
Note that there is no authentication or authorization implemented in the standard syslog protocol, and It is recommended that the source port also be 514 to indicate that the message is from the syslog process of the sender,

=========================================================================================================================================================================>


Some examples for syslog.conf:

lpr.err /var/log/lpd-errs                   <--all messages with severity err and above from the line printer are appended to lpd-errs file

*.err;kern.debug;auth.notice /dev/console   <--all error messages, kern.debug, and auth.notice messages are sent to the console
                                            (Note that kern.debug means all messages of priority debug and above.)

daemon,auth.notice /var/log/messages        <--notice messages from either daemon or the auth. system are appended to /var/log/messages
                                            (Note that this is the second line that mentions auth.notice messages.)
                                            (As a result, auth.notice messages will be sent to both the console and the messages file.)

auth.* root,secadmin                        <--all messages from the authorization system to be sent to the users root and secadmin.
                                            (Note, that if the users are not logged in, the messages will be lost.)

auth.* @LOGHOST                             <---all auth. messages are sent to the syslog daemon on the remote computer
                                            (Note that  it is recommended that LOGHOST server is defined in /etc/hosts file).

mail.debug   /var/log/mail  rotate size 100k files 4         <-- 4 files, 100kB each
user.debug   /var/log/user  rotate files 12 time 1m          <-- 12 files, monthly rotate
kern.debug   /var/log/kern  rotate files 12 time 1m compress <-- 12 files, monthly rotate, compress

=========================================================================================================================================================================>


lssrc -ls syslogd                           <---shows syslogd specifics
                                            (after modifying syslogd.conf: refresh -s syslogd)

=========================================================================================================================================================================>


Local (local0-local7)

local0-local7 are unused facilities that syslog provides, which can be defined/customized by any user. If a developer creates an application and wants to log that to syslog, or if you want to redirect the output of anything to syslog (for example, Apache logs), you can choose to send it to the local# facilities. Then, in /etc/syslog.conf that local# has to be added, so it will log to a file (or it will send it to a remote server).


Changing sshd logging from auth to local7:

1. in sshd_config file change:
SyslogFacility AUTH to Syslogfacility local7

2. in /etc/syslog.conf add local7 to log to a file:
local7.* /var/log/sshd.log 

3. restart syslogd and sshd:
after that ssh daemon will use /var/log/sshd.log file via local7 facility

=========================================================================================================================================================================>


Enabling Oracle audit log (by a local facility)


1. in Oracle these parameters have been set:

SQL> show parameter AUDIT_FILE_DEST

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
audit_file_dest                      string      /oracle/audit

SQL> show parameter AUDIT_SYSLOG_LEVEL

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
audit_syslog_level                   string      LOCAL1.WARNING


2. in /etc/syslog.conf this has been added:
local1.warn /oracle/audit/audit.log


3. restart syslogd

=========================================================================================================================================================================>

AIX - KERNEL

System - Kernel
The AIX kernel device is the sys0. Some operating system settings can be viewed by lsattr -El sys0 and changed by chdev -ls sys0 ... (smitty chgsys)

who -b                 info about the last boot
slibclean              Removes any currently unused modules in kernel and library memory

uname -a               shows the OS of the machine
uname -M               shows the machine model
uname -n               displays the hostname
uname -m               shows the cpuid
uname -L               shows LPAR ID and LPAR name

bootinfo -K            the running kernel 32-bit or 64-bit
bootinfo -y            shows if the machine (hardware) 32 or 64 bit
bootinfo -p            displays the hardware platform (chrp is necessary from 5.2, chrp: powerpc specification that can run multiple OSes)
bootinfo -a            ?same as bootinfo -p, just with numbers (3: CHRP)
bootinfo -b            reports last device system booted from
bootinfo -B <disk>     shows if the device is capable for booting (1:yes, 0:no))   
bootinfo -s <disk>     disk size in MB           
bootinfo -t            specifyes the type of boot (1:DISK 3:CD-ROM 4:TAPE 5:NETWORK)
bootinfo -z            shows if the machine multiprocessor capable (0: not MP capable 1:MP capable)
bootinfo -v            shows boot logical volume name, from which the system booted
bootinfo -r            shows system installed memory size

ls -l /unix            uniprocessor or multiprocessor kernel:
                       /unix -> /usr/lib/boot/unix_up         # 32 bit uniprocessor kernel
                       /unix -> /usr/lib/boot/unix_mp         # 32 bit multiprocessor kernel
                       /unix -> /usr/lib/boot/unix_64         # 64 bit multiprocessor kernel

lsmcode                shows firmware level (permanent level: aka the backup level, temporary level: aka the installed level)
lsmcode -c             shows system firmware level (same as above)
lsmcode -A             shows firmware level of all supported device (or lscfg -vp | grep -p "ROM")

prtconf                general info
lparstat               reports logical partition ( LPAR ) related information and statistics

lsvpd|grep 'AC PS'     shows the Power Supplies of a system

genkex                 lists kernel extensions currently loaded onto the system
genld -l               obtain the list of loaded objects for each running process

=========================================================================================================================================================================>

Switch from 32 bit mode to 64 (and back):
ln  -sf  /usr/lib/boot/unix_64  /unix
ln  -sf  /usr/lib/boot/unix_64  /usr/lib/boot/unix
bosboot  -ak  /usr/lib/boot/unix_64
shutdown  -Fr
The  kernel  mode  of  your  AIX  host  system  is  switched  to  64-bit  mode  after  the system  restarts.

If  your  host  system  is  currently  running  in  64-bit  mode,  you  can  switch  it  to  32-bit mode  by  typing  the  following  commands  in  the  given  order:
ln  -sf  /usr/lib/boot/unix_mp  /unix
ln  -sf  /usr/lib/boot/unix_mp  /usr/lib/boot/unix
bosboot  -ak  /usr/lib/boot/unix_mp
shutdown  -Fr
=========================================================================================================================================================================>

AIX - TUNABLES
Tunable files and control commands for the files:

/etc/tunables/nextboot        <--values to be applied to the next reboot. This file is automatically applied at boot time.
/etc/tunables/lastboot        <--automatically generated at boot time. It contains the parameters, with their values after the last boot.
/etc/tunables/lasboot.log     <--contains the logging of the creation of the lastboot file, that is, any parameter change made is logged

(If a parameter appears several times in a stanza, only its first occurence is used. Everything following a number sign (#) is considered a comment and ignored)

tuncheck -f <filename>        check the tunables in the file, if a problem is detected, a warning is issued
tunsave -f <filename>         saves the currnet state of tunables in a file
tunrestore -f <filename>      change all tunables to values stored in a specified file
tundefault                    resets all tunables to their default values

This fileset contains the commands for tuning: bos.perf.tune

----------------------------

Tunable commands:

    vmo        Manages Virtual Memory Manager tunable parameters
    ioo        Manages Input/Output tunable parameters
    schedo     Manages CPU scheduler tunable parameters
    no         Manages network tuning parameters
    nfso       Manages Network File System (NFS) tuning parameters

Flags for these commands:
    -p        makes changes that apply to both current and reboot values (updates  the /etc/tunables/nextboot file in addition)
    -r        forces the change to go into effect on the next reboot  (it turns on the updating of the /etc/tunables/nextboot file)
    -o        diplays or sets individual parameters
    -d        resets individual tunable to default value (-D will reset all tunables to default values)
    -a        displays all parameters
    -L        lists attributes of one or all tunables
    -h <attr>     will give detailed nifo about that attributum (vmo -h maxperm%)



root@aix1: /root # vmo -L
NAME                      CUR    DEF    BOOT   MIN    MAX    UNIT           TYPE
     DEPENDENCIES
--------------------------------------------------------------------------------
cpu_scale_memp            8      8      8      1      64                       B
--------------------------------------------------------------------------------
data_stagger_interval     n/a    161    161    0      4K-1   4KB pages         D
     lgpg_regions
--------------------------------------------------------------------------------

D = Dynamic: can be freely changed
B = Bosboot: can only be changed using bosboot and reboot
S = Static: the parameter can never be changed
R = Reboot: the parameter can only be changed during boot


vmo -o maxperm%=80            <--sets to 80

vmo -p -o maxperm%=80 -o maxclient%=80      <-- sets maxperm% and maxclient% to 80
                             (-p: sets both current and reboot values (updates current value and /etc/tunables/nextboot)

vmo -r -o lgpg_size=0 -o lgpg_regions=0     <--sets only in nextboot file,so after reboot will be activated

=========================================================================================================================================================================>

USER - AUTHENTICATION
Authentication

During the login process, the user and his password is checked. If these are correct (matched with the stored values), user access is granted. This whole thing is called, authentication. (Sometimes it is separated to Identification (user account verification) and Authentication (password verification).)

On AIX the identification and authentication modules are shipped with the Operating System by default. The identification module offers services like storing users and groupsâ€™ attributes, and the authentication module provides services such as password verification or modification. Some compound modules provide both services.

It is possible to use additional authentication modules, like:
- Light weight directory access protocol (LDAP)
- Kerberos
- Pluggable authentication modules (PAM)
- Network information service (NIS)

Before using these methods, these need to be configured in /usr/lib/security/methods.cfg:

NIS:
 program = /usr/lib/security/NIS
 program_64 = /usr/lib/security/NIS_64

LDAP:
 program = /usr/lib/security/LDAP
 program_64 = /usr/lib/security/LDAP64

KERBEROS:
 program = /usr/lib/security/KERBEROS
 program_64 = /usr/lib/security/KERBEROS64
 options = authonly,db=LDAP

CENTRIFYDC:
        program = /usr/lib/security/CENTRIFYDC
        program_64 = /usr/lib/security/CENTRIFYDC64
        options = nopromp

PAM:
        program = /usr/lib/security/PAM

PAMfiles:
        options = auth=PAM,db=BUILTIN


---------------------------------------------------------------

/etc/security/user

During the login of a user, the /etc/security/user file is checked for the authentication method of that user (local or LDAP...). This information is contained in the "registry" and "SYSTEM" parameters in that file.


/etc/security/user:
root:
        admin = true
        SYSTEM = "compat"
        account_locked = false
        rlogin = false
        admgroups = admin
        login = true
        registry = files


"compat" and files means, the authentication is done locally, for other methods (like LDAP ...), these need to be updated:

default:
        admin = false
        login = true
        ...
        SYSTEM = "LDAP"
        registry = LDAP
        ...

(In this case the default section has been changed, so for all local (already existing) users, SYSTEM = "compat" and registry = files need to be defined, otherwise the login process will search them on the LDAP Server.)

If a user account exists both locally and in LDAP, AIX requires both the SYSTEM and registry be set to the same value to work correctly. By setting the SYSTEM and registry differently, one will run into the risk that the user is defined to login through one mechanism, but the user's account activity is logged to a different user database.  It may also result in root managing the wrong account when changing password, locking the account, etc. 

A safe way of avoiding such problems is to set the SYSTEM and registry to the same value, e.g.,
# chuser SYSTEM=LDAP registry=LDAP user1

=========================================================================================================================================================================>


SYSTEM and registry

At login time, the login process checks for the user's SYSTEM and registry attributes in /etc/security/user file. If it is an LDAP user, SYSTEM needs to be set to LDAP for the user. (If a user's SYSTEM attribute is not defined, the default SYSTEM value is used.)

Values for SYSTEM parameter:

- compat: (default setting) It tells the system to use the local database and, if no resolution found, the NIS database is tried.
- files: it specifies that only local files are to be used during authentication
- NONE: it turns off authentication. (To turn off all authentication, "NONE" must appear in the SYSTEM and auth1 lines of the user's stanza.)

Other acceptable values for the SYSTEM attribute can be defined in /usr/lib/security/methods.cfg. (LDAP...)
(The root user is always locally authenticated, SYSTEM = "compat")

The SYSTEM attribute can take more values, so more methods can be combined with AND / OR statements.(It is called authentication grammar.) For example if SYSTEM="compat" AND "LDAP, it means both authentication is needed to have a successful login.

registry

During login an additional parameter is checked in /etc/security/user, the "registry". It shows where the user informations are stored and which user database (registry) to use when managing users. It takes always just 1 value. (SYSTEM can have more values.)

- files: (default setting) It shows it is a local user (user information is stored in /etc/security/user)
- other values can be: LDAP, NIS, KRB5, PAM...


---------------------------------------------------------------

auth1 and auth2

auth1 and auth2 are (were) used to configure authentication methods for a user. auth1 lists mandatory methods (authentication fails if listed method failed), and auth2 contains additional methods which are used after auth1. (authentication does not fail if listed method fails in auth2.)

Important, IBM writes this as official info:
Currently auth1 and auth2 is deprecated (not recommended) and should not be used to add additional methods (These may not be supported in future releases.)

Typically auth1 is set to SYSTEM and auth2 to NONE.

        auth1 = SYSTEM
        auth2 = NONE
        tpath = nosak
        umask = 77
        expires = 0
        SYSTEM = "CENTRIFYDC OR CENTRIFYDC[NOTFOUND] AND (compat)"


---------------------------------------------------------------

/etc/security/login.cfg

There are some login and user authentication information, which are stored in the usw stanza of /etc/security/login.cfg file:

usw:
        shells = /bin/sh,/bin/bsh,/bin/csh,/bin/ksh...
        maxlogins = 32767
        logintimeout = 30
        maxroles = 8
        auth_type = STD_AUTH
        pwd_algorithm = ssha512

auth_type and autcontroldomain (which is not set in the above example) can be configured in /etc/security/login.cfg.


authcontroldomain

If this attribute is set in /etc/security/login.cfg (by default it is not set), the "registry" and "SYSTEM" values will be gathered from the value defined there. For example, authcontroldomain=LDAP forces the system to look for user's SYSTEM and registry values from LDAP, and the /etc/security/user file will be not checked.

The authcontroldomain attribute is not valid for local users and it can be configured like this:
chsec -f /etc/security/login.cfg -s usw -a authcontroldomain=LDAP


auth_type

Defines the route through which applications can authenticate their users. The two values to which auth_type can be set are:

STD_AUTH - (default) standard user authentication.
PAM_AUTH - Use PAM to authenticate users via the /etc/pam.conf file


=========================================================================================================================================================================>


PAM (Pluggable Authentication Modules)

In the past if a program, such as su, passwd or login, needed to authenticate a user, it would read the necessary file (e.g. /etc/security/passwd.) If it needed to change the users' password, it would simply edit those files. This simple method presented numerous problems for system administrators and application developers. As MD5 and shadow passwords became popular, each program had to know how to get the proper information when dealing with different methods. If you wanted to change your user authentication method, all these programs had to be recompiled. PAM eliminates this complication by enabling programs to transparently authenticate users, regardless of how user information is stored.

This is accomplished by providing a library of functions that an application may use. With PAM, it doesn't matter whether your password is stored in /etc/security/passwd or on a separate server. When a program needs to authenticate a user, PAM provides a library containing the functions for authentication. Because this library is loaded dynamically, changing authentication methods can be done any time.

Starting with AIX V5.3, PAM is fully integrated into AIX. A default /etc/pam.conf file is shipped with additional PAM service modules. PAM can also be enabled for the entire system by changing the auth_type attribute to PAM_AUTH in the /etc/security/login.cfg file.

auth_type determines whether PAM or the standard AIX authentication mechanism will be used:
PAM_AUTH - Use the PAM library for user authenticate tasks as configured by the /etc/pam.conf file.
STD_AUTH - Use the standard AIX security library for user authentication tasks. This is the default value.

The following native AIX commands and applications have been changed to recognize the auth_type attribute and to directly call the PAM library if the system is configured to use PAM for authentication: login, rlogind, telnetd, su, passwd, ftpd, rexecd, rshd ..



When auth_type is changed to PAM_AUTH, these programs will use the PAM library configuration contained in /usr/lib/security/methods.cfg:

/usr/lib/security/methods.cfg:
PAM:
        program = /usr/lib/security/PAM

PAMfiles:
        options = auth=PAM,db=BUILTIN

Then the mentioned PAM library checks /etc/pam.conf file to determine which PAM module to use:

/etc/pam.conf:
# Authentication
#
dtaction auth   required        pam_aix
dtsession auth  required        pam_aix
dtlogin auth    required        pam_aix
ftp     auth    required        pam_aix
imap    auth    required        pam_aix
login   auth    required        pam_aix
rexec   auth    required        pam_aix
rlogin  auth    sufficient      pam_rhosts_auth
rlogin  auth    required        pam_aix
rsh     auth    required        pam_rhosts_auth
snapp   auth    required        pam_aix
su      auth    sufficient      pam_allowroot
su      auth    required        pam_aix
swrole  auth    required        pam_aix
telnet  auth    required        pam_aix
xdm     auth    required        pam_aix
OTHER   auth    required        pam_prohibit

#
# Account Management
#
dtlogin account required        pam_aix
ftp     account required        pam_aix
login   account required        pam_aix
rexec   account required        pam_aix
rlogin  account required        pam_aix
rsh     account required        pam_aix
su      account sufficient      pam_allowroot
su      account required        pam_aix
swrole  account required        pam_aix
telnet  account required        pam_aix
xdm     account required        pam_aix
OTHER   account required        pam_prohibit

#
# Password Management
#
dtlogin password  required      pam_aix
login   password  required      pam_aix
passwd  password  required      pam_aix
rlogin  password  required      pam_aix
su      password  required      pam_aix
telnet  password  required      pam_aix
xdm     password  required      pam_aix
OTHER   password  required      pam_prohibit


---------------------------------------------------------------
USER - GROUP
Users - Groups

During AIX installation default set of user accounts have been created, and the main purpose of these to prevent root from owning all filesystems and files. If these users and group IDs are not needed, you can remove them to minimize security risks associated with them. (Most typically uucp, nuucp, guest, lpd can be removed.)

root:     superuser (UID 0), system administrators log into it to perform system maintenance and problem determination.
bin:      owns important system dirs/files (so not only root owns all important files), and also owns the executable files for user commands
daemon:   responsible for executing server processes, owning these processes and the associated files
sys:      owns the default mounting point for the Distributed File Service (DFS) cache (I have not much info about DFS???)
adm:      ownership of diagnostic tools
guest:    useful to give access to the system for someone who has no account on the server
nobody:   it is used by the Network File System (NFS), and to enable remote printing
uucp:     (unix-to-unix copy) this user owns the files when transferring data between Unix servers over a dedicated line or telephone line
nuucp:    uucp and nuucp, are created when bos.net.uucp fileset is installed. Logging in as uucp is not allowed, with nuucp it is possible
lpd, lp:  used for starting the lpd daemon which is necessary to do remote printing.
invscout: used by Inventory Scout. This tool checks software and hardware configurations on the Hardware Management Console (HMC).
imnadm:   it is used by the AIX Documentation Search Service to conduct searches of online HTML documents

=========================================================================================================================================================================>


USER INFORMATION:
/etc/passwd                  contains the basic attributes of users. (username, if pw set, uid, gid, GECOS, home dir, shell)
                             (* means invalid or password is not set, ! means user has a password)   

/etc/security/passwd         it contains the password (encrypted) and other information. (here is the ADMCHG flag...)

                             root:
                                password = D2ylo7rm3Qw7g
                                lastupdate = 1244118051
                                flags =

                             pw: encrypted pw, if pw contains only an asterisk (*), account is locked until a password has been set
                             lastupdate: number of seconds since epoch (1970. jan. 1) when the password was last updated
                             flags: restrictions to changing the user's password. You can set three different flags:

                                * ADMIN.   If set, only the root user can change the user's password.
                                * ADMCHG.  If set, the user is prompted to change his or her password on the next login/su.
                                * NOCHECK. If set, any additional restrictions in /etc/security/user are ignored.


/etc/security/user           contains the most important settings, outside of the basics in /etc/passwd(umask, expires settings...)
                                       
                             uucp:
                                 admin = true
                                 login = false
                                 rlogin = false
                                 su = true
                                 ...   

/usr/lib/security/mkuser.sys    when new user is created (with mkuser) this script is executed
                             it will use the default parameters from file: /usr/lib/security/mkuser.default
                             creates home directory, sets permission, copies /etc/security/.profile as users profile
                       
/etc/security/.profile       this is the template .profile, which is copied when a new user created
                             (if you make changes in this file, the new users .profile will look like this file)




-----------------------------------

User profile is set up in the following way:

1. /etc/environment
PATH=/wherever:/right/there

2. /etc/profile which is shell script
PATH=$PATH:/somewhere/else
export PATH

3. users .profile
which is copied from /etc/security/profile at user creation

=========================================================================================================================================================================>


USER ULIMIT:

The /etc/security/limits file contains all the ulimits, or users' system resource limitations. The values are set with the mkuser command when the user is added to the system, or changed with the chuser command.  A soft limit is a value that a user or application can change on the fly up to the maximum (the hard limit). The hard limit is just that -- the maximum value a parameter can be set to. (you can set the parameter to  -1, which translates to unlimited. )

(in smitty user or chuser, you can set the hard and softlimits, e.g. chuser fsize_hard=4000000 bb)

The /etc/security/limits file contains a section called default that defines a template of standard values for each user unless that user has set custom values. It can be changed with "vi" or with command "chuser" or for temporary for that user sesion with command "ulimit".

With the ulimit command, you can change your soft limits, up to the maximum set by the hard limits and ulimit command affects the current shell environment.

change user's ulimit parameters:
su - bb "-c ulimit -a"                            <--shows user ulimit settings
chuser core=2000000 bb                            <--change user core file size
chuser rss=-1 rss_hard=-1 data=-1 data_hard=-1 <user>        <--data and memory unlimited,  rss:memory (shared memory), data: data stack
su - bb "-c ulimit -a"                            <--check new settings (or you can see in /etc/security/limits)

Max user process:
lsattr -EHl sys0                                  <--shows many things, maxuproc also

Normally there are three things we change for oracle. the system maxuproc and oracle's fsize and data segment size:
chdev -l sys0 -a maxuproc=512                     <--reboot is needed only for decresing (F1 in smitty)
chuser fsize=-1 data=-1 oracle

WARNING: Data segment size limit (ulimit -d) is set low (134217728 bytes)  Splunk may not work.
         You may want to run "ulimit -d unlimited" before starting splunk.
WARNING: Resident memory size limit (ulimit -m) is set low (33554432 bytes)  Splunk may not work.
         You may want to run "ulimit -m unlimited" before starting splunk.
WARNING: File size limit (ulimit -f) is set low (1073741312 bytes)  Splunk may not work.
         You may want to run "ulimit -f unlimited" before starting splunk.
        Management port has been set disabled; cli support for this configuration is currently incomplete.


=========================================================================================================================================================================>

SUID, SGID, SVTX



SUID Permission Bit:
An additional permission bit that can cause serious security problems is the SUID (set user ID). The SUID on an executable file means that when the file is executed, the process runs with an effective UID of the owner of the file. The SUID is not supported on shell scripts, and it has no meaning on a directory

SGID Permission Bit:
Another additional permission bit is the SGID (set group ID). The SGID on an executable file means that when the file is executed, the process runs with an effective GID of the group owner of the file. The SGID on a directory means that any file or directory created within the directory will have the same group ownership as the directory, rather than of the primary group of the user. The SGID permission bits are propagated down through the directory structure, so any directory created within a directory with the SGID bit set also inherits that bit

The SVTX Permission Bit:
The last of the additional permission bits is the SVTX, also referred to as the sticky bit. The SVTX on a directory means that even if the directory has global write permission (such as /tmp), users cannot delete a file in the directory unless they own the file or the directory



If the third bit is a lowercase s, it indicates that the SUID bit is set and that the execute permission (x) is turned on. An uppercase S indicates that the file has the SUID turned on but not the execute permission

Using Octal Notation
In octal notation, you are probably familiar with setting permissions, using three numbers such as 777 to indicate rwxrwxrwx. There is actually another position that is 0 by default, so 777 is really 0777. If you want to set the SUID, SGID, or SVTX permission bit, this position takes on a value other than 0. SUID is assigned a 4; SGID is assigned a 2, and SVTX is assigned a 1. Use the appropriate value to turn on that permission

root@aix1: /home/bubba # chmod 7777 bb01
root@aixi1: /home/bubba # ls -l | grep bb01
-rwsrwsrwt   1 root     system            0 Jul 02 15:39 bb01

root@aix1: /home/bubba # chmod 7666 bb01
root@aix1: /home/bubba # ls -l | grep bb01
-rwSrwSrwT   1 root     system            0 Jul 02 15:39 bb01

-----------------------------------

umask

umask determines the permissions for new files and directories (for example if files are created with 644 or 640 permissions). /etc/security user file contains the umask value, which is by default: 022. It can be changed for the whole system, or for a specific user.

The umask logic is similar to the file/dir permissions, just with umas we need to subtract the umask value from a specific number to know with which permission a new file/dir will be created:



# umask
0022
# touch new.file; mkdir new.dir
drwxr-xr-x    2 root     system          256 Nov 02 18:11 new.dir
-rw-r--r--    1 root     system            0 Nov 02 18:11 new.file

# umask 027
# touch new027.file; mkdir new027.dir
drwxr-x---    2 root     system          256 Nov 02 18:13 new027.dir
-rw-r-----    1 root     system            0 Nov 02 18:13 new027.file


-----------------------------------

GROUPS:
adm                        takes care of most monitoring functions, such as performance, cron, and accounting
audit                      conducts system audits
system                     configures the system and standard hardware and also performs software maintenance
printq                     system manages queuing. Typical commands include enable, disable, qadm, and qpri
security                   handles password and user account issues.
staff                      the default group assigned to all new users


GROUP INFORMATION:

/etc/group                 Contains the basic attributes of groups.
/etc/security/group        Contains the extended attributes of groups.

=========================================================================================================================================================================>


USER ADMINISTRATION RELATED COMMANDS:

mkuser                     Creates a new user
passwd                     Creates or changes the password of a user
pwdadm                     Change other people's passwords and does not require the old password (-q:shows flag, -c:clears it)
echo <user>:<password> | chpasswd; pwdadm -c <user> <--root user can change other users passwords by standard input
chuser                     Changes user attributes (except password)
chuser groups=staff,uucp bb        <--adds user "bb" to groups: staff, uucp
rmuser                     Removes a user and its attributes
chsec                      Changes security related stanzas
chsec -f /etc/security/lastlog -a unsuccessful_login_count=0 -s account_name    <--reset unsuccessful login count
chsh                       Changes a user's login shell
login                      Initiates a user session
dtconfig                   Enables or disables the desktop autostart feature

umask                      shows the actual umask
umask 022                  sets the umask to 022 (umask of 000 would give 666 permissions on a file or 777 on a directory)

w                          who logged in
whoami                     who am i
who am i                   who am i with more details
last                       who logged in last to the system

finger username            info about the user
lsuser -f <username>       deatiled info about the user (-f: readable format)
rmuser -p <username>       removes a user
                           (-p: removes auth. info from /etc/security/* files, the user's home dir is not removed automatically)

mkgroup                    makes a group
chgroup                    changes a group
lsgroup ALL                lists all group
lsgroup -f <groupname>     deatiled info about the user (-f: readable format)
rmgroup <groupname>        removes a group from the system

pwdck                      verifies consistency between /etc/passwd, /etc/security/user, and /etc/security/passwd
usrck                      verifies consistency between /etc/passwd, /etc/security/user, and /etc/security/limits
grpck                      verifies consistency between /etc/passwd, /etc/security/user, /etc/group, and /etc/security/group

usrck, grpck, pwdck        verifies the validity of: user, group, password
    -n                     reports errors but does not fix them
    -t                     reports errors and asks if they should be fixed

------------------------------------

User creation
1. smitty user
2. pwdadm username          <--setting the password
3. pwdadm -c username       <--removing the ADMCHG flag from /etc/security/passwd file

chuser unsuccessful_login_count=0 <user>    clears unsuccessful login count

------------------------------------

nofiles ( number of file descriptors a process may have):
It specifies the number of open files permitted. If this value is set too low, a memory allocation error will occur on AIX and a too many files open will be logged to the to the stderr log file. Set this value higher than the default system value. For large multi-processor machines, set to unlimited.

# ulimit -a                   <--to query
# ulimit -n <new_value>       <--to set to a new value
# ulimit -n -1                <--to set it to unlimited

------------------------------------

maximum number of processes per user:
'maxuproc' defines the max number of processes each AIX user can 'fork'. If it is set too low, you may not be able to create high number of database agents necessary to handle connections from your application.  So it is recommended to set this to at least 4096.

To query current setting:
# lsattr -El sys0 -a maxuproc

To set to a different value:
# chdev -l sys0 -a maxuproc='4096'
chdev -l sys0 -a autostart=true : automatically reboot after a crash (default is false).
------------------------------------

Copying users between AIX systems:


0. On source system check file consistency:
# usrck -t ALL
# pwdck -t ALL
# grpck -t ALL

1. These files should be copied:
/etc/group
/etc/passwd
/etc/security/group
/etc/security/limits
/etc/security/passwd
/etc/security/.ids
/etc/security/environ
/etc/security/.profile

These can be copied as well (between same AIX versions):
/etc/security/login.cfg
/etc/security/user

2. If needed edit /etc/passwd, to look like this:
root:!:0:0::/:/usr/bin/ksh

3. On destination system check file consistency:
# usrck -t ALL
# pwdck -t ALL
# grpck -t ALL

------------------------------------

Mass user creation:

32 users had to be created.

1. I created 3 files:

test1: contained usernames
test2: contained gecos fields of the users (in the same order as the users were in test1)
test3: contained home dirs of the users (same order as in test1)

(It could be done in 1 file, with 3 columns and awk the columns, but this way was easier for me)

2. This script was created:
    x=1
    while [[ $x -lt 33 ]]
    do

    i=`cat test1 | head -n $x | tail -1`
    j=`cat test2 | head -n $x | tail -1`
    k=`cat test3 | head -n $x | tail -1`

    mkuser -a gecos="$j" home="$k" $i

    (( x += 1 ))
    done


3. After users were created, some attibutes were set to these users:
for i in `cat test1`; do chuser rlogin=true minage=0 maxage=0 maxexpired=-1 minalpha=0 minother=0 mindiff=0 maxrepeats=8 minlen=0 $i; done

4. User passwords have been set this way:
for i in `cat test1`; do echo $i:abcd1234| chpasswd; pwdadm -c $i; done

=========================================================================================================================================================================>

USER - LOGIN
USER LOGIN PROCESS:





LOGIN PROCESS DESCRIPTION:

1. getty:
The file /etc/inittab contains possible ports for login (i.e. console). When init runs, a getty process is started for each port listed in that file. The process "getty" provides a login prompt on the terminal attached to that port. The actual message displayed (also known as the herald) by the getty process is defined in /etc/security/login.cfg (i.e. console login and password...). Once this is displayed getty process waits for a user to make a login attempt.

--------------

2. login:
First user name is entered. The login program checks /etc/passwd and /etc/security/passwd to see if a password is required. If a password is required or the user name doesn't match a valid name, the Password: prompt is displayed.

--------------

3. invalid:
If an invalid user name was given or the password is incorrect an entry is made in /etc/security/failedlogin.

    root@bb_lpar: / # who /etc/security/failedlogin
    root        vty0        Jun 08 12:50        <--username was valid, but password was incorrect
    UNKNOWN_    vty0        Jun 08 13:20        <--invalid username


If the user name is valid, but the password is incorrect, the number of failed attempts are tracked in /etc/security/lastlog.

    root@bb_lpar: / # cat /etc/security/lastlog
    root:
            time_last_login = 1339152601
            tty_last_login = /dev/pts/0
            host_last_login = server.domain.com
            unsuccessful_login_count = 2       <--this shows the number of failed login attemts of a user

    (or you can check that with command "lsuser")

--------------

4. valid:
If a user name and password is correct, the usw stanza in /etc/security/login.cfg is checked. This stanza sets the maximum number of concurrent logins in the systemt. If that number is exceeded, the login is denied.


root@bb_lpar: /etc/ssh # cat /etc/security/login.cfg
usw:
        shells = /bin/sh,/bin/bsh,/bin/csh...
        maxlogins = 32767                      <--this shows maximum concurrent logins on the system
        logintimeout = 60
        maxroles = 8
        auth_type = STD_AUTH

--------------

5. setup environment:
If everything is successful, then the user's environment is set using:

/etc/environment                 <--base environment settings (PATH, TZ, LANG...)
/etc/security/environ            <--defines the environment attributes for users (it is not used too much by users)
/etc/security/limits             <--defines process resource limits for users (fsize, rss, nofiles...)
/etc/security/user               <--contains the most important settings, outside of the basics in /etc/passwd(umask, expires, rlogin...)

--------------

6. /etc/motd:
The login program sets the current directory to the user's HOME directory and displays the content of /etc/motd , date of the last successful login, and the number of unsuccessful login attempts since the last successful login.

(if .hushlogin file is found in the HOME directory these infos will not be displayed)

--------------

7. shell:
Finally, control is passed to the login shell (as defined in /etc/passwd) which will read /etc/environment and run /etc/profile and $HOME/.profile and $HOME/.kshrc (when using Korn shell).

--------------

When a user logs out, the shell terminates and a new getty process is spawned for that  port.

--------------

Files used for user/environment customization (in login sequence):

1. /etc/environment           <--contains variables specifying the basic environment for all processes ( PATH, TZ, LANG...)
2. /etc/profile               <-- sets other system-wide default variables (TERM...)
3. $HOME/.profile             <-- lets you customize your individual working environment (PATH, ENV, PS1...)
4. $HOME/.kshrc               <--if it is used, user can customize his personal Korn shell environment (set -o vi, alias...)

--------------

USER LOGIN RELATED FILES

/etc/motd                     contains the message to be displayed every time a user logs in to the system.
/etc/utmp                     contains the record of users logged into the system. (who /etc/utmp)
/var/adm/wtmp                 records the logins to the system. (who /var/adm/wtmp)
/var/adm/sulog                records information about su - username
/etc/environment              sets base environment variables for all processes (PATH, TZ, LANG...) (don't put commands there, only root)
/etc/profile                  specifies additional environment settings for all users. (TERM...) (only root)

/etc/security/login.cfg       contains configuration information for login and user authentication.
/etc/security/lastlog         contains the last login attributes for users
/etc/security/failedlogin     records all failed login attempts. (who /etc/security/failedlogin)
/etc/security/environ         defines the environment attributes for users (it is not used too much by users)
/etc/security/limits          defines process resource limits for users (fsize, rss, nofiles...)
/etc/security/user            contains the most important settings, outside of the basics in /etc/passwd(umask, expires, rlogin...)

$HOME/.profile                specifies user specific settings (user can overwrite settings from /etc/environment and /etc/profile)
                              ($HOME/profile contains ENV=$HOME/.kshrc)
$HOME/.kshrc                  user can customize his Korn shell environment (set -o vi, alias...) (it will be run when opening new shell)

--------------

unsuccessful login count reset:

If a user's unsuccessful login count reaches a max value (loginretries=<value>), the user is not enabled to login into the system.

3004-303 There have been too many unsuccessful login attempts; please see
        the system administrator.


1. check unsuccessful login count:
root@bb_lpar: / # lsuser -f bb
        loginretries=3                                        <--shows max failed login retries, it is contained in /etc/security/user
        pwdwarntime=0
        account_locked=false
        unsuccessful_login_count=5                            <--it is higher than the max value

2. reset the login count:
root@bb_lpar: / # chuser unsuccessful_login_count=0 <user>    <--it will reset to 0 the number of unsuccessful login count

--------------

locked account reset:

It is possible, that an administrator disables a user to use the system temporary by locking it account.

3004-301 Your account has been locked; please see the system administrator.

1. check user account setting:
root@bb_lpar: / # lsuser -f bb
        account_locked=true                                    <--it will show if account is locked
        minage=0
        maxage=0

2. unlock the account:
root@bb_lpar: / # chuser account_locked=false bb               <--it will remove lock from the account


--------------

user max concurrent logins are too high

Maximum concurrent sessions of a user can be limited in /etc/security/user, by maxulogs entry.
If it is not limited, in the file there are no maxulogs entry and lsuser won't show anything, it can be checked only if it is set to a value.

Maximum number of login sessions exceeded for user <user>

1. check maxulogs entry of the user
root@bb_lpar: / # lsuser -f bb
        pwdchecks=
        dictionlist=
        maxulogs=3                                             <--it will show maximum concurrent allowed login sessions of a user
                                                               (this vallue can be checked in /etc/security/user as well)

2. change to a higher value (0 means unlimited)
root@bb_lpar: / # chuser maxulogs=0 <user>                     <--it will change to unlimited
---------------------------------
USER - PASSWORD
Passwords - Hashes

/etc/passwd              

# cat /etc/passwd
root:!:0:0:gecos:/home/root:/usr/bin/ksh
daemon:!:1:1:gecos:/etc:
bin:!:2:2:gecos:/bin:
sys:!:3:3:gecos:/usr/sys:

It contains the basic attributes of users. (username, if pw set, uid, gid, GECOS, home dir, shell)
(* means invalid or password is not set, ! means user has a password)  

---------------------------------

/etc/security/passwd      

It contains the passwords (encrypted) and other information (ADMCHG flag...) of users.

# cat /etc/security/passwd
root:
        password = WBs4CK8E5a7VA
        lastupdate = 1407504004

daemon:
        password = *

user1:
        password =

user2:
        password = ub9CBz/bLn9zI
        lastupdate = 1374196455
        flags = ADMCHG


password: it is usually the encrypted pw,
     if pw contains only an asterisk (*), account is locked until a password has been set (with ssh key you can login)
     if it is empty (user1), this allows anyone to log in or â€œsuâ€ to that account without being prompted for a password

lastupdate: number of seconds since epoch (1970. jan. 1) when the password was last updated

flags: restrictions to changing the user's password. You can set three different flags:
     ADMIN.   If set, only the root user can change the user's password.
     ADMCHG.  If set, the user is prompted to change his or her password on the next login/su.
     NOCHECK. If set, any additional restrictions in /etc/security/user are ignored.

It is possible to take the password hash of a user on one server and copy it to another server, so the user can log into the new server with the same password.

---------------------------------

Password Encryption Algorithms

AIX 5.2 and 5.3 uses the old unix style crypt() function which has an 8 character limit. (It is possible to enter more than 8 characters, just  it is looking at the first eight characters and ignoring everything else.)

AIX 5.3 TL7 and AIX 6.1 introduce Loadable Password Algorithm (LPA). Each supported password encryption algorithm is implemented as an LPA module that is loaded at runtime when the algorithm is needed. The supported LPAs, and its attributes, are defined in the /etc/security/pwdalg.cfg file.

The available Loadable Password Alogrithms (LPA) are listed in /etc/security/pwdalg.cfg:




There is a stanza for each module in the file:

ssha1:
        lpa_module = /usr/lib/security/ssha
        lpa_options = algorithm=sha1

ssha256:
        lpa_module = /usr/lib/security/ssha
        lpa_options = algorithm=sha256


To change the password hash algorithm, the following command syntax can be used. In this example SHA512 has been used:
chsec -f /etc/security/login.cfg -s usw -a pwd_algorithm=ssha512

(It can be done with vi as well.)

After changing it the previously generated password hashes will stay the same and continue to work. Users will be able to login to the system with those passwords. The new algorithm will be used the next time a user changes his/her password and then the password hash of the user in /etc/security/passwd will be updated to the new one. Until then they will continue to use their original password and hashing algorithm.

---------------------------------

/etc/security/login.cfg 

This file will show the password hashing algorithm, which is in use globally on the system.
A valid value for pwd_algorithm is a name of stanza that is defined in /etc/security/pwdalg.cfg

 shells = /bin/sh,/bin/bsh,/bin/csh,/bin/ksh,/bin/tsh,/bin/ksh93
 maxlogins = 32767
 logintimeout = 60
 maxroles = 8
 auth_type = STD_AUTH
 pwd_algorithm = ssha512

If pwd_algorithm entry is missing here, the default value is "crypt" which is the legacy crypt() function.

---------------------------------

chpasswd                                         changes password of users (-c will clear all password flags)
pwdadm                                           administers users password (-c will clear all password flags)
echo "<user>:<pasword>" | chpasswd -c            it changes a user password (good for scripting, but pw is in clear text)
                                                 (â€œ-câ€ clears out the ADMCHG flag, at next login no pw change is needed)


Changing a user pw in script (avoiding clear text):
1. openssl passwd                                it will prompt for the password twice, then show the password hash
2. echo â€œroot:Ywa8SDcGhSnHBâ€ | chpasswd -ec      it will change pw to the hash (-e encrypted format)

---------------------------------

Recovering root password:

1. Network boot from NIM (nim -o maint_boot -a spot ..., SMS network boot)
2. Choose: Access this volume group and start a shell
3. Run "passwd" from command prompt
4. Reboot to normal mode: sync;sync;sync;reboot

---------------------------------
WPAR

WPAR (Workload Partition)

Applications and filesystems sharing

In the WPAR, /usr and /opt are mounted by default as read only filesystems, so if our application needs to touch these filesystems, some planning would be needed. I tried to collect different scenarios, when a filesystem from the global environment needs to be shared in the WPAR:
  
1. If application doesn't install into /usr or /opt, or touch those file systems after installation, you can install them into the WPAR as normal.

2. If application installs into /usr and /opt, but do not touch those file systems after installation, it needs to be installed into the global environment and then execute syncwpar on all "shared" WPARs (those with read-only /usr and /opt) in which you wish to execute the application.

3. If application touch files in /usr and /opt after installation then create your WPAR with private /usr and /opt (mkwpar -l) and install them inside the WPAR.

4. If application writes only to a sub-directory of /opt but you don't want a private /opt, then you can add a read-write directory to the read-only shared /opt:
     # mkdir /opt/new                          <--in global environment create a mount point which will appear in the WPAR /opt
     # crfs -v jfs2 -g rootvg -m /wpars/wpar1/opt/new -a size=10M   <--create a filesystem
     # mount /wpars/wpar1/opt/new              <--mount it into the wpar (after in wpar we can write files in it)

5. Temporarily sharing a global file system with a WPAR (with "namefs"):
     # mkdir /wpars/wpar2/bb_fs                <--create /bb_fs mount point (we want to share the global /bb  as /bb_fs in the WPAR)
     # mount -v namefs /bb /wpars/wpar2/bb_fs  <--mount "namefs" filesystem, /bb will be mounted as /bb_fs in the wpar

6. Permanently sharing a global file system with a WPAR, with auto mount (with "namefs"):
    # crfs -v namefs -A yes -d /bb -m /wpars/wpar1/bb_fs -u wpar1  <--create "namefs" filesystem from the global /bb as â€¦/bb_fs in wpar, -u (mount group) should be the name of the wpar
    # mount /wpars/wpar1/bb_fs                  <--after mounting in the global, in the wpar it will appear as /bb_fs (read-write)

7. Sharing a filesystem across 2 WPARs (without NFS, using "namefs):
If you have a filesystem called /local and want to add this to two WPARs called wpar1 and wpar2:
    # mkdir /wpars/wpar1/local
    # mkdir /wpars/wpar2/local
    # mount -v namefs /local /wpars/wpar1/local
    # mount -v namefs /local /wpars/wpar2/local

---------------------------------

Commands:

mkwpar -n <wparname>                         create a shared system wpar (-A will create as autostart)
mkwpar -s -n tyrant -l -N address=9.3.63.38  create a private wpar (option -l specifies that the WPAR being created is a private WPAR)
mkwpar -n wpar3 -N interface=en0 address=172.23.74.22 netmask=255.255.248.0               create  shared wpar with network details
mkwpar -n w4 -D devname=hdisk1 rootvg=yes -N interface=en0 address=172.23.74.22 netmask=255.255.248.0 -l  create a non-shared rootvg wpar


lswpar                                        lists wpar details (name, state, typeâ€¦)
     WPAR States:
     (D) Defined       it has been defined by the mkwpar  command and is ready for use, but is not active (startwpar will start it)
     (L) Loaded        it has been configured in the kernel, but processes have not yet been started.
     (A) Active        it is running normally.
     (F) Frozen        a checkpoint operation is initiated, and the processes are quiesced, awaiting the storing phase.
     (P) Paused        a checkpoint or restart operation was done, and the processes of the WPAR are ready to be resumed or killed. 
     (N) Maintenance   it has been configured in the kernel and the file systems have been mounted, but processes do not start.
     (M) Moving        although wpar is Active on the arrival server, on the departure server in this state until transfer is completed
     (T) Transitional  an administrative operation is in progress. The wpar is being created, started, stopped, configured, and so on.
     (B) Broken        an administrative operation failed, leaving this workload partition in an unusable state.
     (E) Error         an error occurred because of invalid elements such as workload partition name and flags.

lswpar -L                                     list wpars with all details (long format): network, filesystems, resource controlsâ€¦..
lswpar -R <wparname>                          list a wpar resource controls (CPU, Memory limitsâ€¦)

startwpar -v <wparname>                       start a wpar (-v verbose)
stopwpar -v <wparname>                        stops a wpar (waits about 30 seconds), same as "shutdown" in the wpar
stopwpar -F <wparname>                        stops a wpar immediately (-F force) 
                                              (if halt -q is used, wpar might not stop cleanly, which leaves it in transition state.)
rmwpar <wparname>                             removes a wpar

clogin <wparname>                             login to the given wpar, it is like a console login (it is not an ssh login)
ps -ef@ wpar1                                 lists the processes of an wpar
lparstat -W                                   wpar related lparstat (CPU) details
uname -n                                      shows the name of the wpar (good way to find out where we are)
uname -W                                      shows the id of the wpar (good way to find out where we are)

savewpar -f <file> <wparname>                 back up a WPAR to a file (savewpar -f /tmp/wpar1_backup.bff wpar1)
restwpar -f/dev/rmt1                          creates a wpar from a wpar backup image that was created by savewpar, mkcd, or mkdvd
restwpar -s -F -f /tmp/wpar1_backup.bff -h toyman -n toyman -d /wpars/toyman -M '-N address=9.3.63.36 broadcast=9.3.63.255'

syncwpar <wparname>                           synchronizes the software that is installed in the global shared parts with wpar
syncwpar -A                                   synchronize all WPARs (If you patch the global AIX level then execute syncwpar -A.)
syncwpar -D â€¦                                 if there are private wpars, use -D (detached wpars)

migwpar                                       migrate a WPAR from AIX 6.1 to AIX 7.1. (or migrate a versioned WPAR from AIX 5.2) 

---------------------------------

Changing a WPARâ€™s IP address

On the global environment:
# mkwpar -n wpar1 -N address=172.16.20.100 netmask 255.255.252.0          <--create a wpar with given IP
# chwpar -K -N address=172.16.20.100 wpar1                                <--remove IP from wpar
# chwpar -N address=172.16.20.102 netmask=255.255.252.0 wpar1             <--configure new IP

There is no direct way to change the address of a system WPAR network; you must remove the old network with the chwpar -K command and add the network with the new address

---------------------------------

Configuring domain resolution for system WPARs:

You can configure the domain resolution for system WPARs using the -r flag for the mkwpar command. Files such as the /etc/resolv.conf file do not exist in system WPARs by default.

To copy the global environment's domain resolution configuration into the system WPARs, run: mkwpar -n wpar_name -r

Running this command copies the following files into the system WPARs, if they exist in the global environment:
/etc/resolv.conf
/etc/hosts
/etc/netsvc.conf
/etc/irs.conf
/etc/networks

---------------------------------

Allocate disk to a WPAR

A disk can be allocated to either an active or inactive WPAR. The chwpar syntax is the same for both scenarios. 

Add a disk to a running WPAR:
Global# chwpar -D devname=hdisk2 wpar1                                    <---assign the disk to the WPAR
Global# clogin wpar1                                                      <--login to the WPAR
WPAR1# cfgmgr                                                             <--in the WPAR scan for new devices
WPAR1# lspv                                                               <--list new disk

Alternatively, a disk can be allocated to a WPAR during its creation time. You must specify the -D option of the mkwpar

How to remove a disk from a WPAR
Global# chwpar -K -D devname=hdisk2 wpar1

---------------------------------

Configuring resource controls for system WPARs

You can configure the resource controls to limit the physical resources a system WPAR has access to using the -R flag for the mkwpar and chwpar commands.

To initialize resource control settings, run the following mkwpar command:
mkwpar -n wpar_name -R active=yes CPU=10%-20%,50% totalProcesses=1024

In this example, the WPAR is entitled to the following system resources:
A minimum of 10% of the global environmentâ€™s processors upon request
A maximum of 20% of the global environmentâ€™s processors when there is contention
A maximum of 50% of the global environmentâ€™s processors when there is no contention
A maximum of 1024 processes at a time

The active attribute can be set to yes or no. When the active attribute is set to no, resource controls are disabled, but the settings are maintained in the configuration database.
To change resource control settings dynamically for an existing active or inactive application WPAR run the following chwpar command:
chwpar -R totalThreads=2048 shares_memory=100 wpar_name

You can also use the -K flag for the chwpar command to remove individual attributes from the profile and restore those controls to their default, as follows:
chwpar -K -R totalProcesses shares_CPU wpar_name


=========================================================================================================================================================================>
winscp -in AIX  

file ---/etc/ssh/sshd_config

# override default of no subsystems
#Subsystem      sftp    /usr/sbin/sftp-server
Subsystem       sftp    internal-sftp


stopsrc -s sshd ;startsrc -s sshd(or)
stopsrc -s sftp ;startsrc -s sftp


=========================================================================================================================================================================>

AIX LVM Commands:-

mkvg -y vgname -s ppsize hdisk1 hdisk2
mklv -y lvname -t type_of_fs vgname number_of_lps
mirrorvg vgname
crfs -v type_of_fs -d lvname -m mountpoin_name -A yes
mount /dev/lv_name /mountpoin_name (or) mount all

practically:-
lsvg	
mkvg -y datavg -s 256 hdisk2 hdisk3
mklv -y WAS9_lv -t jfs2 datavg 80 
mklv -y ndlogs_lv -t jfs2 datavg 80
mirrorvg datavg
vi /etc/filesystems
 
crfs -v jfs2 -d WAS9_lv -m /WAS9/ -A yes
crfs -v jfs2 -d ndlogs_lv -m /ndlogs -A yes


Same with mirroring:-

mkvg -y vgname -s ppsize hdisk1 hdisk2
mklv -y lvname -t type_of_fs -e x vgname number_of_lps hdisk2 hdisk3
crfs -v type_of_fs -d /dev/lvname -m /opt/IBM -A yes
mount /opt/IBM


=========================================================================================================================================================================>
AIX Mirroring:-
lspv			<--Displays information about a physical volume within a volume group.
					#lspv
lscfg    		<--Displays configuration, diagnostic, and vital product data (VPD) information about the system.
					#lscfg -vpl hdisk#
					
					Description
				   -l Name
						Displays device information for the named device.
				   -p
						Displays the platform-specific device information.
				   -v
						Displays the VPD found in the Customized VPD object class. Also, displays platform specific VPD when used with the -p flag.
				   -s
						Displays the device description on a separate line from the name and location.

alt_disk_install	<--Installs an alternate disk with a mksysb install image or clones the currently running system to an alternate disk. 
	   
						#alt_disk_install -X altinst_rootvg
	
						For alt_disk_install or later:
							   " Determine Volume Group Boot Disk:"
									alt_disk_install -q disk
							   "Put-to-sleep Volume Group:"
									alt_disk_install -S
							   "Rename Alternate Disk Volume Group:"
									alt_disk_install -v  new_volume_group_name disk
							   "Wake-up Volume Group:"
									alt_disk_install -W  disk
							   "Clean Up Alternate Disk Volume Group:"
									alt_disk_install -X [ volume_group]


chpv 			<--Changes the characteristics of a physical volume in a volume group.
					chpv -c hdisk
				
lsvg			<--Displays information about volume groups.
					lsvg rootvg
				
					-i Reads volume group names from standard input.
					-l Lists the following information for each logical volume within the group specified by the volumegroup parameter:
					-p Lists the following information for each physical volume within the group specified by the volumegroup parameter:
					-o Lists only the active volume groups (those that are varied on). An active volume group is one that is available for use.
					-P  Lists the mirror pool that each physical volume in the volume group belongs to.


extendvg 		<--Adds physical volumes to a volume group.
					extendvg -f rootvg hdisk 



mirrorvg		<--Mirrors all the logical volumes that exist on a given volume group.
					mirrorvg -S rootvg hdisk
		
		
bootinfo -b	

bootlist		<-- Displays and alters the list of boot devices available to the system.	
					bootlist -m normal -o	
					bootlist -m normal hdisk0 hdisk1
					 Description
					   Device
							Provides the names of the specific or generic devices to include in the boot list.
					   -f File Indicates that the device information is to be read from the specified file name.
					   -F Indicates that the boot list must be modified even if the validation of the speed and duplex attributes, if specified, is not possible.
					   -i Indicates that the device list specified by the -m flag should be invalidated.
					   -m Mode Specifies which boot list to display or alter. Possible values for the mode variable are normal, service, both, or prevboot.
					   -o Indicates that the specified boot list is to be displayed after any specified alteration is performed. The output is a list of device names. hexadecimal dump of the boot list or a list of device names. (This is normally used for problem determination.)
					   -V Indicates that the speed and duplex attributes, if specified, are to be verified only. The boot list is not modified.
					   -v Displays verbose output. This flag is for problem determination only.

bosboot 		<--Creates boot image.
					bosboot -ad /dev/hdisk#
	
					 -d device Specifies the boot device. This flag is optional for hard disk.

					The following flags are action flags. One and only one flag must be specified.
					   Item
							Description
					   -a Creates complete boot image and device.
					   -v Verify, but do not build boot image.

					   The following flags are option flags:
					   Item
							Description
					   -b FileName Uses specified file name as the boot image name. This flag is optional.
					   -D Loads the low level debugger. This flag is optional.
					   -I (upper case i) Loads and invokes the low-level debugger. This flag is optional.
					   -k Kernel Uses the specified kernel file for the boot image. This flag is optional, and if not specified, /unix is the default.
					   -L Enables lock instrumentation for MP systems. This flag has no effect on systems that are not using the MP kernel.
					   -l (lower case L) LVDev Uses target boot logical volume for boot image. This flag is optional.
					   -M primary|standby|both
							Specifies which boot pointer table entry to update. The options are:
							  primary
								   Specifies the table entry that was most recently used.
							  standby
								   Specifies the table entry that was not most recently used.
							  both
								   Specifies both boot pointer table entries.
					   -p Proto Uses the specified prototype file for the RAM disk file system. This flag is optional.
					   -q Determines how much disk space is required in which file system to create the boot image. Boot image is not created. This flag is optional.
					   -T Type Specifies the hardware platform type (see note 6). This causes the bosboot command to create a boot image for the hardware platform type specified. If the type is not specified, the bosboot command creates a boot image whose hardware platform type matches that of the currently running machine. This flag is optional.

chvg -Qn rootvg		<--will disable quorum
syncvg -v rootvg	<--Will sync all stale partitions.
lsvg -l rootvg
lsvg -p rootvg 


============================================================================================================>
Un-Mirroring

lspv
lsvg rootvg
lsvg -l rootvg
lsvg -p rootvg
unmirrorvg rootvg hdisk#		<--Split the mirroring disk from rootvvg
lspv -l hdisk#

http://www.datadisk.co.uk/main/web_updates.htm



=========================================================================================================================================================================>

AIX mknfsexp:-
bash-4.2# smit mknfsexp

***Provide pathname 

                                         Add a Directory to Exports List

Type or select values in entry fields.
Press Enter AFTER making all desired changes.

[TOP]                                                   [Entry Fields]
* Pathname of directory to export                    []                                                                    /
  Anonymous UID                                      [-2]
  Public filesystem?                                  no                                                                  +
* Export directory now, system restart or both        both                                                                +
  Pathname of alternate exports file                 []
  Allow access by NFS versions                       []                                                                   +
  External name of directory (NFS V4 access only)    []
  Referral locations (NFS V4 access only)            []
  Replica locations                                  []
  Ensure primary hostname in replica list             yes                                                                 +
  Allow delegation?                                   no                                                                  +
  Scatter                                             none                                                                +
* Security method 1                                  [sys,krb5p,krb5i,krb5,dh]                                            +
*     Mode to export directory                        read-write                                                          +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 2                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 3                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 4                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
[MORE...6]

F1=Help                        F2=Refresh                     F3=Cancel                      F4=


bash-4.2# cat /etc/exports

share -e


edit /etc/hosts 


cat /etc/xtab--listmoved from current syustem


cat /etc/rmtab---listremote server recvd files log 
-------------------------------------------------------------------

Ex:



Type or select values in entry fields.
Press Enter AFTER making all desired changes.

[TOP]                                                   [Entry Fields]
* Pathname of directory to export                    [/doc-root]                                                                    /
  Anonymous UID                                      [-2]
  Public filesystem?                                  no                                                                  +
* Export directory now, system restart or both        both                                                                +
  Pathname of alternate exports file                 []
  Allow access by NFS versions                       []                                                                   +
  External name of directory (NFS V4 access only)    []
  Referral locations (NFS V4 access only)            []
  Replica locations                                  []
  Ensure primary hostname in replica list             yes                                                                 +
  Allow delegation?                                   no                                                                  +
  Scatter                                             none                                                                +
* Security method 1                                  [sys,krb5p,krb5i,krb5,dh]                                            +
*     Mode to export directory                        read-write                                                          +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 2                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 3                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []
      Hosts allowed root access                      []
  Security method 4                                  []                                                                   +
      Mode to export directory                       []                                                                   +
      Hostname list. If exported read-mostly         []
      Hosts & netgroups allowed client access        []

bash-4.2# share
/doc-root -sec=sys:krb5p:krb5i:krb5:dh,rw


bash-4.2# cat /etc/xtab
/doc-root -sec=sys:krb5p:krb5i:krb5:dh,rw


bash-4.2# cat /etc/rmtab
sbicmo30:/nim/spot/spot_aix7_2_2/usr
sbiccor1_23:/nim/spot/spot_aix7_2_2/usr
sbicwm34:/doc-root


bash-4.2# cat /etc/xtab
/doc-root -sec=sys:krb5p:krb5i:krb5:dh,rw

bash-4.2#


=========================================================================================================================================================================>
AIX rsync:-
192.168.25.67/doc-root/XML-----192.168.25.70/NBimages/doc-root_XML

192.168.25.70/NBimages/doc-root_XML----10.0.254.11/doctroot/XML


scp `ls -ltrh|grep 'May 28'|awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_XML/

scp `ls -ltrh|grep 'May 28'|awk '{print $9}'` wasadmin@10.0.254.11:/doc-root/XML



/opt/sfw/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync  /NBimages/doc-root_XML/* root@10.0.254.11:/doc-root/XML/

192.168.25.67/doc-root/XML-----192.168.25.70/NBimages/doc-root_XML

192.168.25.70/NBimages/doc-root_XML----10.0.254.11/doctroot/XML


scp `ls -ltrh|grep 'May 28'|awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_XML/


scp `ls -ltrh|grep 'May 29'|awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_XML/

scp `ls -ltrh|grep 'May 28'|awk '{print $9}'` wasadmin@10.0.254.11:/doc-root/XML



/opt/sfw/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync  /NBimages/doc-root_XML/* root@10.0.254.11:/doc-root/XML/

---------------------------


scp `ls -ltrh|grep 'May 29'|awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_XML/

scp `ls -ltrh|grep 'May 30'|awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_XML/




scp ` ls -lrth |grep "Jun 25" |awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_NBA


scp ` ls -lrth |grep "Jun 26" |awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_NBA


scp ` ls -lrth |grep "Jun 27" |awk '{print $9}'` wasadmin@192.168.25.70:/NBimages/doc-root_NBA


/opt/sfw/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync  /NBimages/doc-root_NBA/* root@10.0.254.11:/doc-root/NAB/



=========================================================================================================================================================================>
authorized Key setup steps:-

Reference ip:- 10.189.112.16
user: topsadm
pwd: 

1) First we have to check the topsadm details in sudoers file.
	root@sbiiretuata16:/# cat /etc/sudoers |grep -i topsadm
	topsadm ALL=(ALL) NOPASSWD: ALL
2)we have to switch topsadm
	su - topsadm
3)Check the .ssh file in the server. If not available we have to create a .ssh file.
	drwxr-x---    2 topsadm  staff           256 Aug 26 12:46 .ssh
4)list out the .ssh files.
	$ pwd
	/home/topsadm/.ssh
	$ ls -ltr
	total 32
	-rw-r-----    1 topsadm  staff           972 Apr 06 00:26 authorized_keys
5)copy the below key file into the authorized_keys files.
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCbZIlSX1CuSFXVT4Vi3EJ9VG5mQAP0Lf3BmYNan3Zr/PiC/MIwcv8WJCqeZ9bgCbr6lRQ5aXNqtLUsaLGN5HX4sW9JNZNabvfDEEexObLIiwwnPN9/v4AvWmW88XLFP+Kh3FK1/BzJmnozxK9BfQOuN309cabM9Gpp3zKFdQ/dR/wJ+KFoeIi0ch64KbXZWfSVi1AQbvVv3A/D1RLv9JG4Asr+Kf0AHzea9NWfDsxWbmkxQ8Ba3/UjRDzzkxN7/sYiAcbcbcOLbbD1/9m20PrJpNL1o+VOT2RPNfFt06V0+oDVP0y2tVsFDB+MSvezN6ohz6crH0E7Osu4OmAII/jQE5vmZlf596XQfp7UGPpM+Eo9+ZsbNz9OLGNjIAAouL73URKGCDhAlhdi240RpbQ4sQfye0tyu2WpMRskoD1psUX+r74M3qspta5V9Vd7yiCBmL++hIEARxFT+zKl5kARSGjYHSCAuWtcb/Aq0vRk3/2GRUne3hcGcKgBmSa2uhc= topsadm@sbiiretuata16

6)Check the password less connection in 10.189.112.16
	ssh topsadm@ssh_implimented_ipdetails
	ex:
	ssh topsadm@10.189.112.145


=========================================================================================================================================================================>
/var reached 100% 

df -gt
cd /var
du -sm * |sort -nr | head
cd /var/spool
>root
du -sm * |sort -nr | head
cd /var/spool/mail
du -sm * |sort -nr | head
>root
>wasadmin
>bvadmin

=========================================================================================================================================================================>
 
Physical Volume Management
See also lsdev, chdev, mkdev and rmdev.
lspv									-->Displays information about a physical volume (PV) within a volume group.
lspv									-->lists the name, PVID and VG for each configured PV.
lspv hdisk2								-->lists the characteristics of PV hdisk2.
lspv -M hdisk3							-->lists the mapping and stale PPs for hdisk3.
lspv -l hdisk0							-->lists LV allocation within PV hdisk0.
lspv -p hdisk1							-->lists PP intra-allocation by PV region and PP state (free, used, stale, vgda) on hdisk1.
lquerypv *	Queries the attributes of a physical volume.
chpv									-->Changes the characteristics of a physical volume in a volume group.
chpv -a n hdisk1						-->turn off the allocation permission of free PPs for PV hdisk1.
chpv -a y hdisk1						-->turn the allocation permission for hdisk1 back on.
chpv -v r hdisk3						-->set the state of PV hdisk3 to unavailable (use when PV is to be removed from the system or is lost due to failure).
chpv -v a hdisk4						-->make PV hdisk4 available to the system (from state removed to active).
chpv -h y hdisk2						-->marks hdisk2 (with no allocated LPs) as a hot spare disk in a VG with mirrored LVs.
migratepv								-->Moves allocated PP's from one PV to one or more other PP's in the same VG. The command is not allowed if the VG is varied on in concurrent mode.
migratepv hdisk1 hdisk3 hdisk5			-->moves all PPs from hdisk1 to hdisk3 and hdisk5.
migratepv -l lv02 hdisk2 hdisk4			-->moves all PPs in LV lv02 from hdisk2 to hdisk4.


=========================================================================================================================================================================>

 
File System Management:-

AIX supported file system types:
standard Journaled File System (JFS)	max. file size 2 GB, max. file system size 1 TB
large file enabled JFS	max. file size 64 GB, max. file system size 1 TB
Enhanced Journaled File System (JFS2)	max. file size tested 1 TB (AIX currently supports up to 16 TB using the 64-bit kernel, 1 TB using the 32-bit kernel), max. file system size tested 1 TB,  architectural max. file system size 4 PB.
The JFS2 outline log can be up to 1 GB (32-bit kernel) and up to 64 GB (64-bit kernel).The JFS2 inline log size can be from 256 KB up to 16 GB.
General Parallel File System (GPFS)	Provides a cluster-wide file system allowing users shared access to files spanning multiple disk drives.
RAM File System	Up to 8 RAM disks can be created (2 GB size limitation is removed in AIX V5.2). Size cannot be changed afterwards.
Network File System (NFS)	NFS allows programs on one system to access files on another system transparently by mounting the remote directory.
CD-ROM File System (CDRFS)	A read-only local file system implementation under the logical file system (LFS) layer. Supported are ISO 9660:1988(E) standard, the High Sierra Group Specification, the Rock Ridge Group Protocol, the CD-ROM eXtended Architecture File Format (in Mode 2 Form 1 sector format only). CDs are automatically mounted by default.
DVD-ROM File System (UDFS)	A read-only file system stored on DVD-ROM media. UDFS format versions 1.50, 2.00, and 2.01 are supported.
DVDs are automatically mounted by default.
Cache File System (CacheFS)	CacheFS is used to enhance read performance of remote file systems (NFS) or slow devices such as CD-ROM. CacheFS handles files larger than 2 GB.

Default AIX file systems:
fs		lv			description
/		hd4  		The / (root) file system contains files and directories critical for system operation.
/usr	hd2			Files that can be shared by machines of the same hardware architecture are located in the /usr file system. Architecture-independent, shareable text files, such as manual pages, are located in the /usr/share directory.
/var	hd9var 		Variable per-client files, such as spool and mail files, are located in the /var file system.
/home  	hd1			The /home file system is the mount point for user home directories.
/tmp	hd3			The /tmp file system contains system-generated temporary files.
/opt	hd10opt 	The /opt file system is reserved for the installation of add-on application software packages.
/proc	-			The /proc pseudo file system provides access to the state of each active process and thread in the system by mappping processes and kernel data structures to corresponding files.

df									-->Reports information about space on file systems.
df -m /usr							-->displays information about file system /usr in MB (-m) blocks (use -g for GB).

quot								-->Summarizes file system ownership.
quot -f /home						-->displays the number of files and bytes owned by each user in the /home file system.

du									-->Summarizes disk usage.
du -sg /home						-->displays the total disk usage in GB (-g) for all files in directory tree /home.

find								-->Recursively searches the directory tree with a matching expression.
find . -type f -exec grep "unix" {} \; -print									-->looks for string "unix" and prints the names of the files in which it is found.
fileplace							-->Displays the placement of file blocks within logical or physical volumes.
fileplace -v data3					-->displays the placement of a file in its LV, including statistics on how widely the file is spread across the volume and the degree of fragmentation in the volume (-v).

lsfs								-->Displays the characteristics of file systems. Uses /etc/filesystems (system file with stanzas of the known file systems and their characteristics).
lsfs								-->shows all file systems in the /etc/filesystems file.
lsfs -q /usr						-->shows the LV size, file system size, the fragment size, the compression algorithm and the number of bytes per i-node (nbpi) of the /usr file system.
lsfs -v jfs2						-->shows all file systems of vfs type jfs2.

crfs								-->Adds a file system. The smallest file system is equal to one PP.
crfs -v jfs -g datavg -a size=32M -m /user									-->creates a JFS of 32 MB with /user as the mount point in VG datavg.
crfs -v jfs2 -g rootvg -a size=128M -m /data -A yes -p rw -a agblksize=2048	-->creates a JFS2 of 128 MB with /data as the mount point, automatically mounted at system restart (-A), with 4K as the smallest file system block size that can be allocated to a file.

mkfs								-->Makes a new file system on a specified existing device (LV).
mkfs -s 64M /data /dev/lvdata		-->creates an empty 64 MB file system on LV lvdata. 
mkfs -o name=/user /dev/lvuser		-->creates an empty file system on the /dev/lvuser device, with mount point /user. The new file system occupies the entire device and has the default fragment size (4096 bytes) and the default nbpi ratio (4096).
chfs								-->Changes attributes of a file system.
chfs -a size=+16M /data									-->increases the size of the /data file system by 16 MB.
chfs -a size=64M /data : changes the size of the /data file system to 64 MB (provided it was previously no larger than this).
chfs -A yes /data : sets the mount=true attribute in /etc/filesystems for file system with mount point /data.
rmfs
Removes a file system.
rmfs -r /data : removes file system /data, it's mount point (-r) and it's LV.
reduce fs	Official procedure 1:
1. Make a backup of the file system.
2. Remove the file system.
3. Create a new file system using the same name and reduced size.
4. Restore the backup of the file system into the new file system.
Official procedure 2:
1. Make a mksysb (VG rootvg) or savevg (other VGs).
2. Restore the VG using the shrink file systems option.
mount
Makes a file system available for use.
mount : lists the mounted file systems.
mount all or mount -a : mounts all file systems in /etc/filesystems marked by the mount=true attribute (file systems marked by the mount=automatic attribute are not mounted - they are mounted by the boot process).
mount /dev/lvdata : mounts the file system (in LV lvdata) using the default mount point from /etc/filesystems.
mount -v cdrfs -o ro /dev/cd0 /mnt : mounts the CDROM on /mnt.
umount
or
unmount
Unmounts a previously mounted file system, directory, or file.
umount all : unmounts all file systems in /etc/filesystems marked by the mount=true attribute (file systems marked by the mount=automatic attribute are not unmounted).
umount -f /mnt : forces the unmount of the /mnt NFS file system.
cdmount
Makes a file system available for use on a device managed by the cdromd daemon (automatically mounts a CD-ROM or DVD-ROM when it is inserted in a device, and provides the server function for all cd/dvd related commands).
cdmount cd0 : mounts a file system on cd0.
startsrc -s cdromd : starts the cdromd daemon which reads the /etc/cdromd.conf configuration file. 

cdcheck
Asks cdromd daemon information about a device.
cdcheck -m cd0 : asks cdromd if a CD is mounted on cd0.
cdeject
Ejects a media from a CD drive managed by cdromd.
cdeject cd0 : ejects a CD from cd0.
cdumount
Unmounts a previously mounted file system on a device managed by cdromd.
cdumount cd0 : unmount a file system on cd0.
fuser
Identifies processes using a file or file structure.
fuser -u /data : lists the process numbers and user login names of processes using the /data file system.
defragfs
Increases a file system's contiguous free space by reorganizing scattered allocations.
defragfs /home : defragments the /home file system.
defragfs -s /data : generates a report on the fragmentation in the /data file system.
lmktemp	lmktemp largefile 1073741824 : Create a 1GB file named largefile.
fsck
Checks file system consistency and interactively repairs the file system.
By default, the /, /usr, /var, and /tmp file systems have a check=false attribute in their /etc/filesystem stanzas.
fsck -p /dev/lv00 : fixes minor problems with the /dev/lv00 file system automatically and if the primary superblock is corrupt, the secondary superblock is verified and copied to the primary superblock.
dd count=1 bs=4k skip=31 seek=1 if=/dev/lvdata of=/dev/lvdata : copies the backup superblock of the /dev/lvdata file system over the primary superblock.
fsck -V jfs2 /data : checks JFS2 with mount point /data for consistency and repairs problems found.
dd
Converts and copies a file.
dd count=1 bs=4k skip=31 seek=1 if=/dev/lvdata of=/dev/lvdata : restores the backup of the superblock over the primary superblock (use when the superblock of the JFS on /dev/lvdata is corrupted (or dirty). 
logform
Rebuild the JFS log.
logform /dev/hd8 : rebuilds the jfslog of rootvg, after booting the machine into maintenance mode (attention: The logform command should only be run on closed LVs).
logform -V jfs2 /dev/jfs2log : rebuilds the jfs2log /dev/jfs2log.
snapshot
Modifies, creates or queries properties a JFS2 snapshot (a consistent block level image of a file system). The bos.rte.file fileset must be installed.
snapshot -o snapfrom=/data /dev/snapsb : creates a snapshot for the /data file system on the exisiting /dev/snapsb LV.
snapshot -d /dev/snapsb : deletes the snapshot and the LV containing the snapshot.
backsnap
Creates and backs up a JFS2 snapshot.
backsnap -m /tmp/snapshot/data -s size=16M -i -f /dev/rmt0 /data : creates a 16 MB LV, creates a snapshot for the /data file system on the created LV, mounts the snapshot on /tmp/snapshot/data and backups the files and directories in that file system by name to /dev/rmt0.
fsdb
Examines and modifies snapshot superblock, snapshot map, block xtree copy, and segment headers. Mounted file systems cannot be modified.
fsdb /data : debugs file system /data.
dumpfs
Dumps file system information (superblock, i-node map, and disk map) for debugging.
dumpfs /dev/hd2 : prints the information for /dev/hd2.
lsvfs
Lists entries in the /etc/vfs file.

crvfs
Creates entries in the /etc/vfs file.

chvfs
Changes entries in the /etc/vfs file.

rmvfs
Removes entries in the /etc/vfs file.

mkramdisk
Creates a RAM disk using a portion of RAM (pinned by default). Use only for data that can be lost. Setup procedure creating a 8 MB RAM disk:
mkramdisk 8m
ls -l /dev | grep ram
mkfs -V jfs /dev/ramdiskx
mkdir /ramdiskx
mount -V jfs -o nointegrity /dev/ramdiskx /ramdiskx
where x is the logical RAM disk number.
To remove the RAM filesystem:
unmount /ramdiskx
rmramdisk /dev/ramdiskx
cfsadmin
Administers disk space used for CacheFS.
cfsadmin -c /cache1 : creates a cache directory named cache1.
mount -V cachefs -o backfstype=nfs,cachedir=/cache1 server2:/data /ldata : CacheFS-mounts the file system /data from remote host server2 on mount point /ldata of the client using cachedir /cache1.
cfsadmin -l /cache1 : lists file systems and statistics for cache1.
cfsadmin -d all /cache1 : removes all cached file systems from the /cache1 directory.
mkcfsmnt
Mounts a CacheFS directory.
mkcfsmnt -d /mnt -t nfs -h server2 -p /home -c /cache1 -N : mounts the /home file system of server2 locally on the /mnt directory using /cache1 as CacheFS.
cachefslog
Controls the logging of a cache file system.
cachefslog -f /cache1/cachelog /mnt : sets up the file /cache1/cachelog to log CacheFS statistics.
cachefswssize
Displays the work space size for a cache file system.
cachefswssize /cache1/cachelog : displays the work space size of the cache filesystems being logged in the file /cache1/cachelog..
fsck_cachefs
Checks the integrity of data cached with CacheFS.
fsck_cachefs -o noclean /cache1 : forces a check on the cache directory.

=========================================================================================================================================================================>
 
File Management:-
procfiles
procfiles -n `ls /proc`						-->lists all the process and files they have open.
find
find / -xdev -type f -mtime -1 -ls | sort +6nr | head -n 20 : lists the top-20 largest files in / that where used within the last 24 hours.


=========================================================================================================================================================================>

  
Logical Volume Management
LVs automatically created at system installation are:
hd5	boot LV (boot image). Available only at startup.
hd6	Default paging space.
hd8	Default logging space (jfslog) for the journaled file systems.
hd4	/ (root) file system.
hd2	/usr file system.
hd9var  	/var file system.
hd10opt	/opt file system.
hd3	/tmp file system.
hd1	/home file system. Users' home directories.
Note: hd7 was used in earlier AIX versions as dump device.
Maximum LV size is 1 TB (32-bit kernel) or 128 TB (64-bit kernel).
A dedicated dump device lg_dumplv is created in systems with at least 4 Gigabytes of real memory.

lslv
Displays information about a logical volume (LV).
Total LVsize=PPsize * LPs assigned to LV * Number of LV copies.
lslv lvdata : lists all the attributes related to LV lvdata.
lslv -m lvdata : lists the LP to PP/PV mapping of LV lvdata.
mklv
Creates a logical volume. The smallest LV is equal to one PP.
mklv -y lvdata -c 3 datavg 10 : creates LV lvdata in VG datavg with ten LPs and a total of three copies of the data.
mklv -y lvdb datavg 50M : creates LV lvdb with a minimum size of 50MB (b/B=512B, k/K=KB, m/M=MB, g/G=GB). Rounded to whole LVs to make up 50 MB.
mklv -a c datavg 2 : creates LV lv00 with a size of two LPs and intra-physical volume allocation policy center (e=[outer] edge, m=[outer] middle, c=center, im=inner middle, ie=inner edge).
chlv										-->Changes the characteristics of a logical volume.
chlv -w p lvdata : turns on passive MWC for LV lvdata (big VG only).
rmlv
Removes logical volumes from a volume group.
rmlv -f lvdata : remove LV lvdata without requiring user confirmation (attention: all data on this LV is destroyed).
extendlv
Increases the size of a logical volume by adding unallocated physical partitions.
extendlv lvdata 12 : adds twelve more LPs to LV lvdata.
extendlv lvraw 64M : adds 64 MB to LV lvraw. Rounded to whole LVs needed to make up 64 MB.
lquerylv *
Queries the attributes of a logical volume.
lreducelv *!
Reduces the number of allocated logical partitions of a logical volume (attention: if not used with care, data is lost). Official procedure to reduce a LV:
1. Back up all data in the logical volume.
2. Remove the logical volume.
3. Recreate the logical volume with the reduced logical partition allocation.
4. Restore the data.
cplv
Copies the contents of a logical volume to a new logical volume.
cplv -v datavg -y lvnew lvold : copies the contents of lvold to new LV lvnew in VG datavg.
cplv -e lvtest -f lvdata : copies the contents of LV lvdata to a smaller, existing LV lvtest within the same VG, without requiring user confirmation (attention: if lvtest is smaller than lvdata, then data will be lost, probably resulting in corruption).
mklvcopy
Adds copies to a logical volume.
mklvcopy lvdata 3 : increases the number of copies in each LP in LV lvdata to three.
rmlvcopy
Removes copies from a logical volume.
rmlvcopy lvuser 2 : decreases the number of copies in each LP in LV lvuser to two.
migratelp
Moves an allocated LP from one PP to another PP on a different PV in the same VG.
migratelp datalv/23 hdisk3/105 : moves the 23th LP of LV datalv to the 105th PP of PV hdisk3.
See lspv -p to display the free PPs of PV hdisk3.

splitlvcopy
Splits copies from one logical volume and creates a new logical volume from them.
splitlvcopy -y newlv oldlv 2 : splits one copy of each LP belonging to the LV oldlv which currently has 3 copies of each LP, and creates the LV newlv.
getlvcb *
Displays a formatted output of the data in the LVCB of a LV.
getlvcb -TA hd3 : displays the information held in the LVCB of LV hd3.
putlvcb *!
Writes the control block information (only the specified fields) into block 0 of a logical volume (LVCB).
putlvcb -t jfs lvdata : writes the LV type jfs to the LVCB of LV lvdata.

-------------------------------------------------------------------
When creating really big filesystems, this is very helpful:
chlv -x 6552 lv08
Word on the net is that this is required for filesystems over 512M.

esmf04m-root> crfs -v jfs -g'ptmpvg' -a size='884998144' -m'/ptmp2'
-A''`locale yesstr | awk -F: '{print $1}'`'' -p'rw' -t''`locale yesstr |
awk -F: '{print $1}'`'' -a frag='4096' -a nbpi='131072' -a ag='64'
Based on the parameters chosen, the new /ptmp2 JFS file system
is limited to a maximum size of 2147483648 (512 byte blocks)
New File System size is 884998144
esmf04m-root> 

If you give a bad combination of parameters, the command will list
possibilities.  I got something like this from smit, then seasoned
to taste.
________________________________________

If you need files larger than 2 gigabytes in size, this is better.
It should allow files up to 64 gigabytes:
 crfs -v jfs -a bf=true -g'ptmpvg' -a size='884998144' -m'/ptmp2' -A''` |
  |   locale yesstr | awk -F: '{print $1}'`'' -p'rw' -t''`locale yesstr | aw |
  |   k -F: '{print $1}'`'' -a nbpi='131072' -a ag='64'    

=========================================================================================================================================================================>

 
Volume Group Management
Each disk (PV) belongs to a Volume group (VG). A standard VG is a collection of 1 to 32 PVs (1 to 128 for a big VG). A PV can belong to only one VG. A maximum of 255 VGs can be defined per system.
When a VG is created, the PVs within the VG are partitioned into contiguous, equal-sized PPs (units of disk space). PPs are the smallest unit of allocatable storage space in a VG. The PP size is determined at VG creation (can't be changed dynamically afterwards), and all PVs that are placed in the VG inherit this size. The PP size can range from 1 MB to 1024 MB, but must be a power of two. If not specified at creation time, the default PP size for a VG is 4 MB for disks up to 4 GB (the minimum PP size needed is determined by the OS), but it must be larger for PVs greater than 4 GB due to the fact that the LVM, by default, will only track up to 1016 PPs/PV. The number of PPs/PV (1016) can be increased with a factor 1-16 (or 1-64 for a big VG) at creation time or later (which will reduce the number of PVs in the VG) and/or the number of PVs/VG can be increased from 32 to 128 at creation time or later (big or gigantic VG).
Importing a VG involves copying the VGDA data for the imported volume group into the ODM. When a volume group is exported, the data held in the ODM about that volume group is removed from the ODM database.

lsvg
Displays information about VGs.
lsvg : lists all VGs.
lsvg rootvg : lists the characteristics of VG rootvg.
lsvg -o : lists only the active VGs (those that are varied on).
lsvg -p rootvg : lists the PVs in VG rootvg (state, size, distribution).
lsvg -l rootvg : lists the LVs in VG rootvg (type, size, state).
lsvg -M rootvg : displays a map of all LVs.
lqueryvg !
Queries the attributes of a VG using VG id, or PV name of a PV that is part of a VG.
lqueryvg -At -p hdisk0 : returns all attributes for the VG (static attributes, LV details and PV details).
mkvg
Creates a VG.
mkvg -y datavg -s 32 hdisk2 hdisk4 : creates the VG datavg that contains PVs hdisk2 and hdisk4, with PP size set to 32 MB.
mkvg -B -y uservg : create a big VG uservg (supports 128 PVs and 512 LVs).
chvg
Sets the characteristics of a VG.
chvg -a{y|n} datavg : VG datavg is automatically activated (y=varyonvg) or not (n=varyoffvg) during system startup.
chvg -u datavg : unlock the VG datavg.
chvg -B datavg : changes the VG to big VG format (supports 128 PVs and 512 LVs). Mapping size is 4*original size.
chvg -t 2 datavg : changes the limit of the number of PPs/PV by factor=2 (1016*2=2032 PPs/PV). Which decreases the number of disks (#PVs/factor=16 PVs/VG).
chvg -sy datavg : attempts to automatically synchronize (AUTO SYNC) stale partitions in VG datavg (default this not done for a VG).
chvg -L256 uservg : changes the LTG size to 256KB of VG uservg for better disk I/O performance. LTG size should be less than or equal to the maximum transfer size of all disks in the VG. Check each disk in the VG with:
lquerypv -M hdiskx : checks the maximum supported LTG size of hdiskx.
chvg -b n datavg : turns off the bad block relocation policy of VG datavg (default is yes for a VG).
chvg -h y -s y uservg : sets policy in VG uservg to automatically (-h y) migrate PPs from one failing disk to one spare disk with automatic synchronization of stale PPs (-s y).
syncvg
Synchronizes LV copies that are not current (stale).
syncvg -v datavg : synchronizes the copies on VG datavg.
syncvg -p hdisk3 : synchronizes the copies on physical volumes hdisk3.
synclvodm
Resynchronize the ODM. The VG must be active.
synclvodm rootvg : synchronizes the device configuration database with the LVM information for rootvg (use when the device configuration database is not consistent with the LVM information in the LVCBs and the VGDAs).
rvgrecover	Repairs the ODM.
mirrorvg
Mirrors all the LVs that exist on a given VG.
mirrorvg -S -c 3 rootvg : triply mirrors VG rootvg, returns the mirrorvg command immediately and starts a background syncvg (-S).
mirrorvg -m datavg hdisk3 : creates an exact mapped mirror of the LVs in VG datavg.
unmirrorvg
Removes the mirrors that exist on VGs or specified disks.
unmirrorvg rootvg : default unmirroring of rootvg (rootvg now has only 1 copy).
importvg
Imports a new VG definition from a set of PVs.
It is highly recommended that you run the fsck command before you mount the file systems.
importvg -y datavg hdisk9 : imports VG datavg from PV hdisk9.
importvg -y uservg 0009898xy2727d4f : imports VG uservg from PV with PVID 0009898xy2727d4f.
importvg -L datavg : imports VG datavg and learns about possible changes. Use if the VG was not exported and used on another machine.
exportvg
Exports the definition of a VG from a set of PVs.
exportvg datavg : removes VG datavg from the system.
redefinevg
Redefines the set of PVs of the given VG in the device configuration database.
extendvg
Adds PVs to a VG.
extendvg datavg hdisk2 : adds PV hdisk2 to VG datavg.
reducevg
Removes PVs from a VG. When all PVs are removed from the VG, the VG is deleted.
reducevg datavg hdisk3 : removes PV hdisk3 from VG datavg.
reducevg datavg 000005265ac63976 : removes PV using it's PVID 000005265ac63976 from VG datavg (use when a disk was removed without first running reducevg).
reorgvg
Reorganizes the PP allocation for a VG. Using the reorgvg command with the VG name and no other arguments reorganizes only the first LV in the VG.
reorgvg datavg lvdata1 lvdata3 : reorganizes LVs lvdata1 and lvdata3 on VG datavg.
recreatevg
Recreates a VG (with unique IDs, names, and mount points) on a set of disks that are mirrored from another set of disks. Imports and varies on the VG. Procedure after the real duplication of the PV (like mirroring):
chdev -l hdisk5 -a pv=clear : to avoid potential collisions of LVM component names (PVID, VGname, ...) of hdisk5.
recreatevg -y newvg -L /newfs -Y newlv hdisk5 : newvg is the newly assigned VG name, /newfs and newlv are used for prefixes of the newly assigned file systems and LVs, and hdisk5 is the duplicated target PV name.
splitvg
Splits a single mirror copy of a fully mirrored VG.
splitvg -y snapvg -c 2 datavg : splits second mirror copy of the VG datavg and creates snapshot VG snapvg.
joinvg
joinvg datavg : joins the the original VG datavg with the snapshot VG snapvg.
varyoffvg
Deactivates a VG.
varyoffvg uservg : deactivates the VG uservg.
varyonvg
Activates a VG.
varyonvg -f datavg : used to force a varyon on VG datavg even when inconsistencies are detected (between the configuration data for each VG held in the ODM database and VGDA.
varyonvg -r uservg : varies on VG uservg in read-only mode.

=========================================================================================================================================================================>
 
System Paging Space Management
lsps
Lists paging space and attributes. Configuration file: /etc/swapspaces (contains a list of swap devices).
lsps : 
chps
Changes attributes of a paging space.
chps -a {y|n} paging00 : specifies that the paging space paging00 is active (y) or inactive (n) at subsequent system restarts.
chps -s 10 paging02 : adds ten LPs to paging02 without rebooting.
chps -d 5 paging01 : removes five LPs from paging01 without rebooting.
chps -d 50 hd6 : removes fifty LPs from hd6 without rebooting.
mkps
Adds an additional paging space to the system.
mkps -a -n -s20 datavg : creates a permanent paging space pagingxx in VG datavg of 20 LPs and activates it immediately.
rmps
Removes a paging space from the system (exept hd6).
rmps paging00 : removes deactivated paging space paging00.
swapoff
Deactivates one or more paging space.
swapoff paging01 : deactivates paging space paging01.
swapon
Activates a paging space.
swapon paging01 : activate paging space paging01.
swapon -a : activates all paging spaces defined in /etc/swapspaces.
swap
Displays paging characteristics and enables the allocation and deallocation of paging devices.
swap -l : displays device, major and minor numbers, and total and free space.
swap -a /dev/paging01 : activates paging space paging01 (like swapon).
swap -d /dev/paging01 : deactivates paging space paging01 (like swapoff).
migratepv
migratepv -l hd6 hdisk0 hdisk2 : moves hd6 from hdisk0 to PV hdisk2 within the same VG (always use VG rootvg for hd6 performance).


=========================================================================================================================================================================>
 
Communications Management
rc.tcpip
Script that initializes selected TCP/IP daemons using SRC at each system restart: inetd, lpd, portmap, sendmail, syslogd (started by default) and gated or routed, named, timed, xntpd,rwhod, snmpd, dhcpcd, mrouted, autoconf6 (not started by default unless they are uncommented).
stopsrc -g tcpip : stops all running TCP/IP daemons. 
stopsrc -s named : stops the named daemon. 
/etc/rc.tcpip : starts all selected TCP/IP daemons. Don't use startsrc -g tcpip (would start all subsystems in the tcpip group).
startsrc -s named : starts the named daemon.
refresh -s inetd : refresh the inetd subsystem (re-reads /etc/inetd.conf).
/etc/tcp.clean	sh /etc/tcp.clean : stops all running TCP/IP daemons (not portmap and nfsd) and removes all /etc/locks/lpd TCP/IP lock files.
inetd daemon
Provides Internet service management for a network. Starts by default using the /etc/inetd.conf configuration file. Daemons controlled by the inetd daemon: ftpd, rlogind, rexecd, rshd, talkd,telnetd, and uucpd (started by default) and tftpd, fingerd, and comsat (not started by default unless they are uncommented).
resfresh -s inetd : informs the inetd daemon of the changes to its configuration file. The ports inetd listens on are in /etc/services (unless they are commented).

lsdev
Displays devices in the system and their characteristics.
lsdev -Cc if : lists IP interfaces.
lscfg
Displays configuration, diagnostic, and VPD.
lscfg -l ent0 -v : displays the VPD for ent0.
lsattr
Displays attribute characteristics and possible attribute values for devices.
lsattr -HEl en0 : displays effective values for interface en0.
netstat
Shows network status.
netstat -in : shows status of IP interfaces with numeric addresses.
netstat -rn : shows status of TCP/IP routes with numeric addresses.
netstat -C : shows routing table, user-configured and current costs of each route.
netstat -v : shows device driver statistics.
arp
Displays and modifies address resolution.
arp -a : displays local ARP cache (ip to mac address table).
no
Manages network tuning parameters. Changes are valid until the next reboot.
no -a : displays kernel variable values.
no -o ipforwarding : displays if ipforwarding is on (=1) or off (=0).
no -o ipforwarding=1 : specifies the kernel should forward packets (acting as an IP router).
ifconfig
Configures or displays network interface parameters for TCP/IP.
ifconfig -a : displays information about all interfaces in the system.
ifconfig en0 : displays network interface parameters for en0.
ifconfig en0 inet 194.186.152.2 netmask 255.255.255.0 up : assigns IP-address 194.186.152.2 with network mask 255.255.255.0 to interface en0 of address family inet and turns on the network card.
ifconfig en0 down : turns off network card en0.
route
Makes manual entries into the network routing tables until next reboot.
route -rn : displays route table.
route add -inet -net 9.19.98.1 9.19.99.10 : adds a network route to the routing table for destination host 9.19.98.1 through gateway 9.19.99.10.
lsattr
Displays attribute characteristics and possible values of attributes for devices.
lsattr -El en0 : lists the current attribute values for en0.
nslookup
Queries Internet domain name servers.
nslookup : enters interactive mode.
nslookup nserver1 : returns the domain name and Internet address of nserver1. 
traceroute
Displays the route that IP packets take to a network host.
traceroute server2 : displays all the hops from local host to server2.
iptrace daemon
Provides interface-level packet tracing for Internet protocols.
ipreport
Generates a trace report from the specified trace file created by the iptrace command.
ping
Sends an echo request to a network host.
ping -c 6 server1 : checks the network connection to host server1 by sending 6 echo requests.
ping -f server2 : invokes the flood-ping option to host server2.
ping -R : displays the full round trip route of a packet.
spray
Sends a one-way stream of packets to a host and reports performance statistics using the RPC (default) or ICMP protocol (two-way stream).
spray server1 -c 1000 -d 4 : sends 1000 packets at intervals of 4 microseconds to server1.
host
Resolves a host name into an Internet address or an Internet address into a host name. System files: /etc/hosts (local hosts table).
host server1 : displays the Internet address and name aliases of host server1.
host 192.186.154.3 : displays the host whose address is 192.186.154.3.
hostid
Sets or displays the identifier of the current local host.
hostname
Sets or displays the name of the current host system.
hostname tulip : changes the hostname to tulip until the next reboot.
chdev -l inet0 -a hostname=server1 : changes the hostname permanently to server1.
mktcpip
Sets the required values for starting TCP/IP on a host.
rwho
Displays which users are logged in to hosts (that run rwhod) on the local network.
rwho -a : lists all users currently logged in to hosts on the local network.
ruptime
Displays the status of each host (that runs rwhod) that is on the local network.
ruptime -al : lists a status report of each host on the local network sorted by load average.
lsnamsv
Shows name service information stored in the database /etc/resolv.conf (name resolver).
chnamsv
Changes TCP/IP-based name service configuration on a host.
mknamsv
Configures TCP/IP-based name service on a host for a client.
rmnamsv
Unconfigures TCP/IP-based name service on a host.


=========================================================================================================================================================================>

 
User/Group Management
dispuid
Displays all valid user IDs on the system.
logins
Displays user and system login information.
logins -p : lists all the logins with no passwords.
lsuser
Displays attributes of user accounts.
lsuser ALL : displays all the attributes of all the users.
mkuser
Creates a new user account. System files: /etc/passwd (contains basic user attributes) and /etc/group (contains basic group attributes). The default attributes are in the/usr/lib/security/mkuser.default file.
mkuser erik : creates the erik user account.
passwd
Changes a user's password. System files: /etc/security/passwd (contains password information).
passwd hans : changes the password of user hans.
pwdadm
Administers users' passwords (by root or a member of the security group).
chsec
Changes the attributes in the security stanza files.
chsec -f /etc/security/login.cfg -s default -a pwdprompt="Password:" : changes the system-wide password (echo's user name) prompt to Password (doesn't echo user name.
chsec -f /etc/security/login.cfg -s default -a usernameecho=false : hides the user name from login and system messages.
mkuser.sys
Customizes a new user account.
chuser
Changes attributes for the specified user.
rmuser
Removes a user account.
rmuser -p erik : removes user erik.
rm -r /home/erik : removes erik's home directory.
dispgid
Displays all valid groups on the system.
lsgroup
Displays the attributes of groups.
lsgroup ALL : lists all groups.
chgroup
Changes attributes for groups (don't use in combination with NIS).
chgrpmem
Changes the administrators or members of a group.
mkgroup
Creates a new group.
rmgroup
Removes a group.
usrck
Verifies the correctness of a user definition.
grpck
Verifies the correctness of a group definition.
pwdck
Verifies the correctness of local authentication information.
last
Displays information about previous logins using the /var/adm/wtmp file.
last root : display all logins and logoffs by user root.
last -t 31081125 : displays all users still logged in at 11.25 am on August 31th.
who
Identifies the users currently logged in.
who /var/adm/wtmp : displays a history of logins and logouts, system startups and shutdowns.
wall
Writes a message to all users or users of a specific group that are logged in.
wall -g staff : broadcasts to group staff.
repquota
Summarizes quotas for a file system.
repquota -u /home : prints a summary of user quotas in the /home file system.
repquota -a : prints quotas for all file systems enabled with quotas in the /etc/filesystems file

edquota
Edits user and group quotas.
quota
Displays disk usage and quotas.
quota : displays the quotas of the current user.
quota -u erik : displays quotas as the root user for user erik.
quotacheck
Checks file system quota consistency.
quotacheck /home : checks the user and group quotas in the /home file system.
quotaon or
quotaoff
Turns on and off file system quotas.
quotaon -u /home : turns on user quotas for the /home file system.
quotaoff -v -a : turns off user and group quotas for all file systems (-a) in the /etc/filesystems file.

=========================================================================================================================================================================>

 
Print Management
The AIX print subsystem (default), a combination of the System V and Berkeley Software Distribution (BSD) printing standard, and the System V R4 print subsystem are available. Both print subsystems cannot be set to the active state at the same time using the normal procedures.
System file /etc/qconfig (stanzas that describe the printqueues and devices). Spooling uses the /var/spool/qdaemon directory. Daemon: qdaemon.


switch.prt	Displays the current active print subsystem, or switch between the active and inactive print subsystem. Read also AIX System V Printing.
switch.prt -d : displays the current print subsystem that is active.
AIX print subsystem
qprt
Starts a print job.
lpr
Enqueues print jobs.
lp
Sends requests to a line printer.
enq
Enqueues a file.
chprtsv
Changes a print service configuration on a client or server machine.
lsque
Displays the queue stanza name.
lsque -q ps : displays the name of queue stanza ps.
mkque
Adds a printer queue to the system.
mkquedev
Adds a printer queue device to the system.
rmque
Removes a printer queue from the system.
rmquedev
Removes a printer or plotter queue device from the system.
chque
Changes the queue name.
chvirprt
Changes the attribute values of a virtual printer.
lsallq
Lists the names of all configured queues.
lsallqdev
Lists all configured printer and plotter queue device names within a specified queue.
lsprtsv
Shows print service information stored in the database.
lsquedev
Displays the device stanza name.
chquedev
Changes the printer or plotter queue device names.
mkvirprt
Makes a virtual printer.
rmvirprt
Removes a virtual printer.
mkprtsv
Configures TCP/IP-based print service on a host.
rmprtsv
Unconfigures a print service on a client or server machine.
System V R4 print subsystem 
lp
Sends print requests.
cancel
Cancels print requests previously sent with the lp command.
lpstat
Displays the status of all print requests made by the user.
accept
Allows the queuing of print requests.
reject
Prevents queuing of print requests.
enable
Activates the named printers, enabling them to print requests.
disable
Deactivates the named printers, disabling them to print requests.
lpadmin
Configures the lp print service by defining printers and devices.
lpfilter
Administers filters used.
lpforms
Administers the use of preprinted forms.
lpmove
Moves print requests between destinations.
lpsched
Starts the print service.
lpshut
Stuts down the print service.
lpsystem
Registers remote systems with the print service.
lpusers
Set printing queue priorities.

=========================================================================================================================================================================>
 
Software Management
A fileset is the smallest installable base unit for the AIX operating system (example: bos.perf.pefstat). A package is a group of separately installable filesets that provide a set of related functions (example: bos.perf). A Licensed Program Product (LPP) is a complete software product including all packages associated with that licensed program (example: bos). A bundle is a list of software that can contain filesets, packages, and LPPs that are suited for a particular use (examples: CDE, KDE, GNOME).
Each fileset in a product can be divided into three parts: usr, root, and share. Parceling of a software product is used for diskless and dataless clients. Thus it can be installed on one machine (the server) and then be used remotely by other machines on a network (the clients). 
The usr part of a software product can be shared by machines with the same hardware architecture (stored in /usr).
The root part (optional) of a software product cannot be shared by machines. In a client/server environment, these are the files for which there must be a unique copy for each client of a server. Most of the root software is associated with the configuration of the machine or product (stored in the root (/) file tree. The /etc/objrepos directory contains the root part of an installable software product's VPD).
The share part (optional) can be shared among machines, even if they have different hardware architectures.The share part of a product is always packaged in a separately installable package (stored in /usr/share).
The format for a software product level in AIX 5.2 is as follows: versionnumber.releasenumber.modificationlevel.fixlevel
configassist
Displays the Configuration Assistant wizard (graphics display).
install_assist
Starts the Installation Assistant application (ASCII display).
geninstall
A generic software product installer for installp, InstallShield Multi-Platform (ISMP), the Red Hat Package Manager (RPM) installer and Uniform Device Interface (UDI).
geninstall â€“Ld /dev/cd0 : lists the contents of the CD media.
geninstall -d /tmp/RPM * : installs all RPM packages in the /tmp/RPM directory.
geninstall -d /dev/cd0 R:cdrecord : installs the cdrecord RPM package.
install_wizard
Invokes the Web-based System Manager Install Wizard or the SMIT install menu.
install_wizard -d /dev/cd0 : invokes the Web-based System Manager Install Wizard using an install CD in /dev/cd0.
gencopy
Allows software products of various packaging formats (installp, RPM, ISMP, UDI) to be copied. Wraps to the bffcreate command.
gencopy â€“Ld /dev/cd0 : lists the contents of the CD media.
gencopy â€“d /dev/cd0 I:bos.perf R:cdrecord : copies bos.perf and cdrecord images from CD media to the default directory (/usr/sys/inst.images).
installp
Install, update, and perform maintenance tasks on software.
installp -aXYd /dev/cd0 bos.perf : installs (automatically committed) all filesets within bos.perf from /dev/cd0, expands file systems if necessary (-X), and accepts software licenses (-Y).
installp -pad /dev/cd0 X11.Dt : previews installation of X11.Dt from /dev/cd0.
installp -u -V2 X11.Dt : removes fileset X11.Dt with a verbose display of successes, warnings and failures.
installp -ld /dev/cd0 : lists all software products and their separately installable options on /dev/cd0.
installp -cgX all : commits all applied updates and removes the filesets for the previous version.
installp -C : cleans up after a failed installation.
mkinstallp
Creates software packages in installp format.
rpm
Installs, upgrades, queries, and deletes Linux RPM packages and maintains the RPM package database (located in /var/opt/freeware/lib/rpm).
rpm -qa : queries installed RPM packages.
rpm -Uvh * : installs the RPM packages in the current directory.
lslpp
Displays information about installed filesets/fileset updates.
lslpp -l bos.net.nfs.client : displays the maintenance level and state.
lslpp -L all : lists all installed software.
lslpp -L bos.dosutils : check if software installed.
lslpp -f  bos.perf : displays the names of all the files of fileset bos.perf.
lslpp -ha : lists installation history of filesets.
lslpp -w /usr/sbin/nfsd : lists the fileset that the file belongs to.
lslpp -E bos.rte : displays the license agreements of the installed filesets.
lslpp -v :shows only the filesets that do not have the required prerequisites or are not completely installed.
lslpp -al ssp.basic									-->Show version of SSP (IBM SP switch) software
inulag
Manages license agreements (front end).
inulag -l : lists all available software license agreements.
epkg
Creates emergency fix (efix) packages that can be installed by the efix manager, emgr.
epkg perf : runs the epkg command in interactive mode and creates efix package perf.
emgr
Starts the emergency fix (efix) manager, which installs, removes, lists, and checks system efixes. The efix manager installs packages created with the epkg command and maintains a database containing efix information. Databases are in the /usr/emgrdata/DBS directory.
emgr -l : lists all efixes on the system.
emgr -X -e perf.040503.epkg.Z : installs efix package perf.040603.epkg.Z and automatically expand file systems if needed.
lppmgr
Manages an existing installp image source.
lppmgr -d /images -u : lists all duplicate and conflicting updates in image source directory /images.
lppmgr -d /images -u -r : removes all duplicate and conflicting updates in image source directory /images.
lppchk
Verifies that files of an installable software product (fileset) match the SWVPD database information for file sizes, checksum values, or symbolic links.
lppchk -v : verifies that all filesets have all required requisites and are completely installed.
lppchk -c X11.Dt : checks that file checksums and sizes of X11.Dt are consistent with SWVPD.
lppchk -l 'bos*' : verifies the symbolic links of all 'bos*' software products.
compare_report
Compares fileset levels to those available and generates a report of filesets needed.
compare_report -s -r /tmp/LatestFixData52 -l : compares the software installed on a system (-s) to the report of available updates (-r) LatestFixData52, available from the support Web site at IBM.

oslevel
Reports the latest installed maintenance level of the system.
oslevel -r : determines the highest recommended maintenance level reached for the current version of AIX.
oslevel -lr 5100-04: lists which fileset updates are missing if after installing ML 04 on 5100-03 the command oslevel -r still shows 5100-03 (so, preferrably no output!).
instfix
Installs filesets associated with keywords or fixes.
instfix -i | grep ML : displays all ML's installed.
instfix -ik "IY39231 IY38794" : checks if fixes IY39231 and IY38794 are installed.
instfix -k IY42424 -d /dev/fd0 : installs fix IY42424 from diskette.
install_all_
            updates
Updates installed system software to the latest level that is on the media and verifies the current recommended maintenance level.
install_all_updates -d /dev/cd0 : installs all installp updates on /dev/cd0 and verifies the current recommended maintenance level.
install_all_updates -d /images -rc : commit installs all installp updates and installs any installable rpm updates in directory /images.
whence
Displays the absolute path name.
whence nfsd : displays the full path of the nfsd program.
what
Displays identifying information in files.
which_fileset
Displays which fileset owns a command.
The bos.content_list fileset must be installed.
which_fileset topas : displays which fileset owns the topas command.
inutoc
Creates a .toc file.
inutoc : creates the .toc file for the /usr/sys/inst.images directory.


=========================================================================================================================================================================>
 
Backup and Restore Management
lsmksysb
Lists or restores the contents of a system backup.
lsmksysb : lists the contents of a system backup located on default device /dev/rmt0.
lsmksysb -f /dev/cd0 -s : lists the contents of a non-rootvg VG backup (-s).
lsmksysb -B : displays the volume group backup log.
lsmksysb -f /dev/cd0 : lists the contents of the system backup located on device /dev/cd0.
lsmksysb -f /dev/cd0 -r ./etc/inittab : restores /etc/inittab from the system backup on device /dev/cd0.
lsmksysb -r -d /tmp/etc ./etc : restores all files in the /etc directory of the rootvg backup on /dev/rmt0 and write the restored files to /tmp/etc.
mksysb
Creates a bootable system backup of the rootvg volume group. Uses /image.data (contains information on VGs, LVs, file systems, paging space, and PVs for an mksysb backup) and/bosinst.data (specifies requirements at the target system for an mksysb backup (INSTALL_METHODPROMPT, CONSOLE, DESKTOP, RECOVER_DEVICES, HDISKNAME, etc.).
mksysb -i -e /dev/rmt0 2>/tmp/mksysb.err : creates a system backup (-i generates the /image.data file) while excluding from the mksysb backup the user specified files and directories in /etc/exclude.rootvg.
Procedure to restore /etc/inittab:
Find out the blocksize of the fourth image if not default:
cd /tmp
tctl -f /dev/rmt0 rewind
chdev -l rmt0 -a block_size=512
restore -s2 -xqdvf /dev/rmt0.1 ./tapeblksz
cat ./tapeblksz
chdev -l rmt0 -a block_size=[number in the ./tapeblksz file]
Restore /etc/inittab:
cd /
tctl -f /dev/rmt0 rewind
restore -s4 -xqdvf /dev/rmt0.1 ./etc/inittab
mkszfile
Saves the system state for reinstallation on the current system or on another system in the /image.data file.
mkszfile : creates or overwrites /image.data.
mkcd
Creates a multi-volume CD (or CDs) or DVD from a mksysb or savevg backup image. Supported are: bootable and non-bootable CDs in Rock Ridge (ISO9660) or UDF (Universal Disk Format) format. Only CHRP platform supports booting from DVD.
mkcd -d /dev/cd0 : creates a bootable system backup on CD-R /dev/cd0.
mkcd -U -d /dev/cd1 -V rootvg : creates a mksysb image (UDF format) on DVD-RAM.
savevg
Finds and backs up all files belonging to a specified volume group.
savevg -i uservg : backs up VG uservg to the default tape drive (dev/rmt0) and creates a new /tmp/vgdata/uservg/uservg.data file (-i).
mkvgdata
Creates a /tmp/vgdata/vgname/vgname.data file containing information about a volume group for use by savevg and restvg.
mkvgdata uservg : creates a new /tmp/vgdata/uservg/uservg.data file.
restvg
Restores the user volume group and all its containers and files.
restvg -l -f /dev/rmt0 : displays VG information about the VG backed up on the tape in /dev/rmt0.
restvg -s -f /dev/rmt0 hdisk1: restores the VG image from /dev/rmt0 onto PV hdisk1 with the LVs created at the minimum size possible to accommodate the file systems (-s: shrink file systems).
listvgbackup
Lists or restores the contents of a volume group backup. listvgbackup -r and restorevgfiles are interchangeable (perform identical operations).
listvgbackup -f /dev/cd0 : lists the contents of the system backup on device /dev/cd0.
listvgbackup -r -s ./data/mydata : restores the /data/mydata file from a non-rootvg backup on device /dev/rmt0.
restorevgfiles
Restores files from a backup source.
restorevgfiles -f /dev/cd0 -s -d /tmp ./data/mydata : restores the /data/mydata file from a non-rootvg backup on /dev/cd0 to the /tmp directory.
backup
Backs up files and file systems including extended permissions (ACLs).
find . -print | backup -i -q -f /dev/rmt0 : backs up all the files and subdirectories in the current directory to /dev/rmt0 using relative path names, without prompting to prepare the backup medium (-q).
backup -0 -u -f /dev/rmt0 /home : backs up all the files (level 0) in the /home file system to /dev/rmt0 and updates /etc/dumpdates (-u).

restore
Extracts files from archives created with the backup command.
restore -Pa -vf /dev/rmt0 : restores only the permissions of the files on the tape archive.
restore -s4 -Tdvqf /dev/rmt0.1 : lists contents of a mksysb tape.
restore -s4 -xdvqf /dev/rmt0.1 ./etc/inittab : restores the inittab file from tape.
pax
Extracts, writes, and lists members of archive files; copies files and directory hierarchies.
tar
Manipulates archives. Use /opt/freeware/bin/tar for the Linux tar.
tar -cvf /dev/rmt0 * : backs up the current directory to /dev/rmt0.
tar -xvf /dev/rmt0 /etc/passwd : extracts the file /etc/passwd form tape.
tcopy
Copies a magnetic tape.
tcopy /dev/rmt0 /dev/rmt1 : duplicates tape from tape device /dev/rmt0 to /dev/rmt1.
tcopy /dev/rmt0 : shows the block size in bytes for each tape file.
cpio
Copies files into and out of archive storage and directories.
find /home -print | cpio -ocvB > /dev/rmt0 : backs up /home to /dev/rmt0 using absolute path names.
cpio -idmv </dev/rmt0 : restores all files from /dev/rmt0 while retaining previous file modification time (-m).
cpio -i "ma*" "myfile" </dev/rfd0 : restores all files that match ma* and the file myfile from diskette.
dd
Converts and copies a file.
dd if=/dev/rmt0 bs=128k count=1 | wc -c : reads a single block from /dev/rmt0 and finds out used block size.
chdev -l rmt0 -a block_size=512 : changes the block size of /dev/rmt0 to 512 bytes.
dd if=/dev/fd0 of=/tmp/fdcopy : copies the contents of the diskette into /tmp/fdcopy.
tctl
Gives subcommands to a streaming tape device. Default device is /dev/rmt0.
tctl fsf 3 : moves forward three file marks.
tctl -f /dev/rmt1 rewind : rewinds the rmt1 tape device.
tctl rewoffl : rewinds the tape and takes the tape drive offline.


=========================================================================================================================================================================>

 
ODM Management
ODM information is stored in the directories /etc/objrepos (default ODM directory, $ODMDIR env variable), /usr/lib/objrepos and /usr/share/lib/objrepos.
odmadd
Adds objects to created object classes.
odmchange
Changes the contents of a selected object in the specified object class.
odmcreate
Produces the .c (source) and .h (include) files necessary for ODM application development and creates empty object classes.
odmdelete
Deletes selected objects from a specified object class.
odmdrop
Removes an object class.
odmget
Retrieves objects from the specified object classes and places them into an odmadd input file.
odmshow
Displays an object class definition.
odmshow CuDv : displays  the object class definition for the Customized Device Database.

=========================================================================================================================================================================>

 
System Resource Controller (SRC)
lssrc
Gets the status of a subsystem, a group of subsystems, or a subserver.
lssrc -a : displays the status of all subsystems.
lssrc -g tcpip : display the status of the tcpip subsystem group.
startsrc
Starts a subsystem, a group of subsystems, or a subserver.
stopsrc
Stops a subsystem, a group of subsystems, or a subserver.
refresh
Requests a refresh of a subsystem or group of subsystems.
refresh -g tcpip : refresh the group tcpip.
refresh -s inetd : refresh the inetd subsystem (re-reads /etc/inetd.conf).
chssys
Changes a subsystem definition in the subsystem object class.
mkssys
Adds a subsystem definition to the subsystem object class.
rmssys
Removes a subsystem definition from the subsystem object class.
mkserver
Adds a subserver definition to the subserver object class.
rmserver
Removes a subserver definition from the subserver object class.

=========================================================================================================================================================================>
 
Process Management
utmpd
The utmpd daemon monitors /etc/utmp for validity of the user process entries every 300 seconds (default). Default there is no entry in /etc/inittab for utmpd.
utmpd 500 : runs utmpd every 500 seconds.
whodo
Reports the list of processes and their child processes belonging to users.
who -l : summarises the current activity on the system.
procwdx
Prints the current working directory of a process.
procwdx 21318 : displays the current working directory of process 21318.
truss
Traces system calls executed by a process as, records the received signals and the occurrence
of machine faults. The output of truss can become very large.
truss -e -o truss.out whoo : runs the who command under truss including the environment content (-e) and redirects the output to truss.out.


=========================================================================================================================================================================>
 
Scheduling
crontab
Submits, edits, lists, or removes cron jobs for the cron daemon. The cron daemon logs its activities in /var/adm/cron/log. 
Each crontab file entry contains six fields: minute hour day_of_month month weekday command
crontab -l : lists the user's crontab file.
crontab -e : edit the crontab file using an intermediate copy.
at
Runs commands at a later time.
at -l : reports the current user's scheduled jobs.
batch
Runs jobs when the system load level permits.
skulker
Cleans up file systems by removing unwanted files. Remove the comment from the skulker entry of the root crontab to enable operation.


=========================================================================================================================================================================>
 
Performance Management
The base priority of a thread is 40. The nice value defaults to 20 for foreground processes and 24 for background processes.
The CPUs on a system are shared among all of the threads by giving each thread a time slice of one clock tick (10 ms).
Install the bos.perf.tools (base tools), bos.sysmgt.trace, bos.perf.perfstat and perfagent.tools filesets. Commands no longer supported: bf (bigfoot), bfrpt, lockstat, stem, and syscalls.

topas
Reports selected local system statistics.
schedo
Manages CPU scheduler tunable parameters.
schedo -o 15 : changes the time slice of one clock tick to 15 ms.
bindprocessor
Binds or unbinds the kernel threads of a process to a processor.
bindprocessor 22358 2 : binds the threads in process 22358 to processor 2.
perfpmr
A set of tools and instructions for collecting the data needed to analyze a AIX performance problem.
fdpr
A performance tuning utility for improving execution time and real memory utilization of user-level application programs.
iostat
Reports CPU statistics and input/output statistics for the entire system, adapters, tty devices, disks and CD-ROMs.
iostat -s 2 4 : displays four reports at two second intervals starting with the sum of all activities (-s).
iostat -a : generates an adapter throughput report for all of the disk adapters.
lsattr -E -l sys0 -a iostat : displays the current iostat settings.
chdev -l sys0 -a iostat=false : disable the collection of iostat data.
lvmstat
Reports input/output statistics for LPs, LVs and VGs for hot-spot management.
lvmstat -v rootvg -e : enables statistics collection for all the LVs in VG rootvg.
lvmstat -v rootvg : reports statistics for all the LVs in VG rootvg.
lvmstat -v rootvg -C : clears the counter for VG rootvg.
lvmstat -l hd6 : reports statistics for LV hd6 (paging).
See migratelp to move LPs from one PP to another on a different PV.



=========================================================================================================================================================================>
 
DOS files Management
Install the bos.dosutils fileset for the DOS-commands or install mtools (AIX Toolbox for Linux Applications).

dosdir
Lists the directory for DOS files (default device is /dev/fd0).
dosread
Copies DOS files to AIX files.
dosread -a yourfile.txt yourfile : copies a text file from a DOS diskette and replaces each carriage return, line-feed sequence with a new-line character and interprets a Ctrl-Z as the end-of-line character.
dosdir | awk '!/There are/ {print $1}'|xargs -t -i dosread {} {} : copies every DOS file from a DOS diskette.
doswrite
Copies AIX files to DOS files.
doswrite -a myfile myfile.txt : copies file myfile to a DOS diskette and replaces new-line characters with carriage return, line-feed sequences (-a). Ctrl-Z is added at the end of file.
for i in *;do;doswrite $i $i;done : copies every file in the current directory to a DOS diskette.
dosdel
Deletes DOS files.
dosformat
Formats a DOS diskette.
Mtools is a public domain collection of tools to allow Unix systems to manipulate MS-DOS files
Documentation: Mtools (HTML) or Mtools (PDF).

floppyd	floppy daemon to run on your X server box 
floppyd_installtest	small utility to check for the presence of floppyd 
mattrib	change MS-DOS file attribute flags 
mbadblocks	tests a floppy disk, and marks the bad blocks in the FAT 
mcat	same as cat. Only usefull with floppyd. 
mcd	change MS-DOS directory 
mcopy	copy MS-DOS files to/from Unix 
mdel	delete an MS-DOS file 
mdeltree	recursively delete an MS-DOS directory 
mdir	display an MS-DOS directory 
mdu	list space occupied by directory and its contents 
mformat	add an MS-DOS filesystem to a low-level formatted floppy disk 
minfo	get information about an MS-DOS filesystem. 
mlabel	make an MS-DOS volume label 
mkmanifest	makes a list of short name equivalents 
mmd	make an MS-DOS subdirectory 
mmount	mount an MS-DOS disk 
mpartition	create an MS-DOS as a partition 
mrd	remove an MS-DOS subdirectory 
mmove	move or rename an MS-DOS file or subdirectory 
mren	rename an existing MS-DOS file 
mshowfat	shows the FAT map of a file 
mtoolstest	tests and displays the configuration 
mtype	display contents of an MS-DOS file 
mzip	zip disk specific commands 


=========================================================================================================================================================================>
 
CDE
dtconfig
/usr/dt/bin/dtconfig -d : disables desktop logins (-e enables desktop logins).
dtlogin
/usr/dt/bin/dtlogin -daemon : starts the desktop login manager manually.
xinit
Initializes the X Window System.
xinit /etc/dt/Xsession : starts the CDE desktop from command line interface (customized version, if present).
xinit /usr/dt/bin/Xsession : starts the CDE desktop from command line interface (default version).


=========================================================================================================================================================================>
 
Miscellaneus
 	
  
Abbreviations and Acronyms
APAR	 Authorized Program Analysis Report
CDE	 Common Desktop Environment
CHRP	 Common Hardware Reference Platform
CuDv	 Customized Devices object class (ODM)
DHCP	 Dynamic Host Configuration Protocol
ICMP	 Internet Control Message Protocol
ISA	 Instrumentation Systems and Automation Society
ISMP	 InstallShield Multi-Platform
JFS	 Journaled File System
JFS2	 Enhanced Journaled File System
LFT	 Low Function Terminal
LTG	 Logical Track Group
LPP	 Licensed Program Product
LV	 Logical Volume
LVCB	 Logical Volume Control Block
MCA	 Micro Channel Bus Architecture
ML	 Maintenance Level
MWC	 Mirror Write Consistency
NIS	 Network Information Service
NVRAM	 NonVolatile Random Access Memory
ODM	 Object Data Manager Database
PB	 PetaBytes (1 PB is equal to 1024 TB)
PCI	 Peripheral Component Interconnect
PCMCIA	 Personal Computer Memory Card International Association
PdDv	 Predefined Devices object class (ODM)
PV	 Physical Volume
PVID	 Physical Volume IDentifier
PP	 Physical Partition
PTF	 Program Temporary Fix
RPC	 Remote Procedure Call
PReP	 POWERPC Reference Platform
RPM	 Red Hat Package Manager
SRC	 System Resource Controler
SWVPD	 Software Vital Product Data
TB	 TeraBytes (1 TB is equal to 1024 GB)
UDI	 Uniform Device Interface
VG	 Volume Group
VGDA	 Volume Group Description Area
VGSA	 Volume Group Status Area
VPD	 Vital Product Data
	
	


=========================================================================================================================================================================>
  
System installation and maintenance management
alt_disk_install
Installs an alternate disk with a mksysb install image or clones the currently running system to an alternate disk.
Note: install bos.alt_disk_install fileset to use alt_disk_install.
alt_disk_install -C hdisk2 : Clones the current rootvg to hdisk2.
alt_disk_install -C -b update_all -l /dev/cd0 hdisk4 : Creates clone of the current rootvg on hdisk4, installs a ML on the clone and changes the bootlist to hdisk4.
alt_disk_install -X old_rootvg : Removes the original rootvg from the ODM, after booting from the new alternate disk (you can still reboot from old_rootvg).
nimadm
Performs Alternate Disk Migration (to a new version or release) of AIX using NIM resources.
nimadm -c aix1 -s spot2 -l lpp2 -d "hdisk1 hdisk2" -Y : migrates totarget NIM client aix1, using NIM SPOT resource spot2, the NIM lpp_source lpp2, and hdisk1 and hdisk2 target disks, and agreeing to all required software license agreements for the software being installed (-Y).
nim -o alt_disk_install -a source=rootvg -a disk='hdisk2' -a phase=12 holland : clones a rootvg on client holland to hdisk1, but only run phase1 and phase2 (leaving the /alt_inst file systems mounted).


=========================================================================================================================================================================>
 
Problem determination
sysdumpdev
Changes the primary or secondary dump device designation in a running system. The default primary dump device is LV /dev/hd6 and the default secondary dump device is /dev/sysdumpnull. A dedicated primary dump device LV /dev/lg_dumplv is created (if sufficient disk space is available) in systems with at least 4 Gigabytes of real memory.
sysdumpdev -l : displays current dump device settings.
sysdumpdev -P -p /dev/hd7 : changes the primary dump device permanently from the default to LV /dev/hd7.
sysdumpdev -e : estimates the dump size (in bytes) for the current running system.
sysdumpdev -L : displays statistical information about the last dump.
chdev -l sys0 -a autostart=true : automatically reboot after a crash (default is false).
dumpcheck
Checks the disk resources used by the system dump and logs in the system error log. Run default by cron at 3:00 pm local time each day.
/usr/lib/ras/dumpcheck -p : requests a dumpcheck. The result is printed to stdout (-p).
/usr/lib/ras/dumpcheck -r : discontinues running dumpcheck (removes the crontab entry).
kdb
Displays system images for examining a dump.
kdb /var/adm/ras/vmcore.0 /unix : starts kdb using the uncompressed dump file /var/adm/ras/vmcore.0 and kernel file /unix.
snap
Gathers system configuration information and compresses the information into a pax file.
snap -a -o /dev/rmt0 : gathers all system configuration information (needs approximately 8 MB space in directory /tmp/ibmsupt) and creates a compressed pax image (snap.pax.Z) of directory /tmp/ibmsupt.
snapcore
Gathers the core file, program, and libraries used by a program to directory /tmp/snapcore (default) and compresses the information into a pax image. The collected information allows debugging and resolving problems within an application.
snapcore -d /tmp/snapcore2 core.xx : gathers all needed information for core dump file core.xx and writes it to directory /tmp/snapcore2/snapcore_32811.pax.Z, where 32811 is the process id ($pid) of the snapcore command.
uncompress -c snapcore_32811.pax.Z | pax : displays the contents of the pax archive.
check_core	Used by snapcore to gather all information about a core dump. The bos.rte.serv_aid fileset must be installed.
/usr/lib/ras/check_core core.xx : displays a list containing the program that caused core dump core.xx and the used libraries.
shconf
Manages the system hang detection parameters for the system hang daemon shdaemon.
shconf -d : displays if priority problem detection and lost I/O detection are enabled or not.
shconf -E -l prio -H : displays the current shdaemon settings.


=========================================================================================================================================================================>
 
System initialization and boot management
The numeric 1 key (F1 on graphical display), when pressed during POST (double beep), starts the SMS interface.
The numeric 5 key (F5 on graphical display), when pressed during POST, initiates a system boot in service mode using the default service mode boot list. Sequence: 1. diskette (if installed), 2. CD-ROM (if installed), 3. hard disk, 4. tape drive (if installed), 5. network (a. Token ring, b. Ethernet).
The numeric 6 key (F6 on graphical display) works like the numeric 5 key, but uses the customized service mode bootlist. This is the preferred method of loading AIX diagnostics from the boot hard disk.
ipl_varyon *	Used to vary on the root volume group during system boot processing.
ipl_varyon -i : Inquiry mode - skips ipl device processing. Checks which disks are already bootable.
bosboot
Creates boot image. It does not update the bootlist in the NVRAM.
bosboot -a -d /dev/hdisk0 : Re-create boot image on hdisk0.
bosboot -a -d /dev/ipldevice -D : creates a boot image with the KDB debugger enabled.
mklv
Creates a logical volume.
mklv -y hd5 -t boot rootvg 1 : re-create boot LV (BLV) hd5.
lslv
Displays information about a logical volume.
lslv -l hd5 : determines the boot disk.
mkboot
Creates the boot image, the boot record, and the service record.
mkboot -c -d /dev/hdisk0 : clears the boot record of PV hdisk0.
chpv
Changes the characteristics of a physical volume in a volume group.
chpv -c hdisk1 : clears the boot record of PV hdisk1.
bootinfo	Determines and displays various boot information, including boot device type and boot device name (NOT supported in AIX 4.2 or later).
bootinfo -b : returns the last boot device.
bootinfo -B hdisk0 : returns 1 if disk is bootable, 0 if not.
bootlist
Displays or alters the list or ordering of boot devices available to the system.
Normal boot list: possible boot devices for normal mode.
Service boot list: possible boot devices for service mode.
Previous boot device: last device from which the system booted.
Support of these boot lists is model dependent.
bootlist -m normal -o : displays the normal boot list.
bootlist -m service -o : displays the service boot list (if available).
bootlist -m normal cd0 hdisk0 hdisk1 : makes changes to the normal boot list.
bootlist -m prevboot : invalidates the last device from which the system booted.
halt or fasthalt
Writes data to disk (sync) and then stops the system. The system does not restart. Do not use this command if other users are logged into the system.
reboot or
fastboot
Restarts the system. Can be used if no other users are logged into the system.
shutdown
Halts the operating system. Checks the existence of the executable /etc/rc.shutdown file (added by the administrator) that specifies all the applications and other user processes to close down.
By default the shutdown command powers down the system (if supported and issued).
shutdown -Fr : fast system shutdown and restart.
shutdown -m +1 : brings the system down to maintenance (single user) mode after waiting one minute.
shutdown -l : logs the output during the shutdown to /etc/shutdown.log.
last
Displays information about previous logins using the /var/adm/wtmp file.
last reboot : displays the time between reboots.
last shutdown : lists last shutdowns of the system.
uptime
Shows how long the system has been up.
uptime : displays the current time, the length of time the system has been up, the number of users online, and the load average.
sync
Updates the i-node table and writes buffered files to the hard disk.
sync;sync;sync;reboot : writes everything from the buffer to the hard disk and reboots the system.
lsfont
Lists the fonts available for use by the display.
chfont
Changes the default font selected at boot time.
mkfont
Adds the font code associated with a display to the system.
mkfontdir
Creates a fonts.dir file from a directory of font files.
chlang
Sets LANG environment variable in the /etc/environment file for next login.

chtz
Changes the system time zone information in the /etc/environment file.

chhwkbd
Changes the low-function terminal (LFT) keyboard attributes stored in the Object Data Manager (ODM) database.
lskbd
Lists the keyboard maps currently available to the low-function terminal (LFT) subsystem.
chkbd
Changes the default keyboard map used by the low-function terminal (LFT) at system startup.
chkey
Changes your encryption key.
lslicense
Displays the number of fixed licenses and the status of floating licensing. There are two types of user licensing, fixed and floating. Fixed licensing is always enabled. Floating licensing can be enabled or disabled.
lslicense -A : displays the number of available fixed licences on the system.
chlicense
Changes the number of fixed licenses and the status of the floating licensing (updates login.cfg).
chlicense -I -u 50I -u 50 : changes the fixed license number immediately to 50 (without rebooting).
chlicense -f on : enables the floating licensing.
lsitab
Lists records in the /etc/inittab file.

chitab
Changes records in the /etc/inittab file.

mkitab
Adds records to the /etc/inittab file.

rmitab
Removes records from the /etc/inittab file.

telinit
or
init
Initializes and controls processes.
0-9 Tells the init process to put the system in one of the run levels 0-9. S,s,M,m Tells the init process to enter the maintenance mode. a,b,c Tells the init process to examine only those records in the /etc/inittab file with a, b, or c in the run-level field. Q,q Tells the init process to re-examine the entire /etc/inittab file. N Sends a signal that stops processes from being respawned.
telinit q : requests the init command to re-examine the /etc/inittab file.
who
Identifies the users currently logged in.
who -r : displays the runlevel.
who /var/adm/wtmp : displays a history of logins, logouts, system startups, and system shutdowns.
restbase
Restores customized information from the boot image. Attention: The command is executed only during system boot phase 1. Do not execute it in a run-time environment.
savebase
Saves base customized device data in the ODM onto the boot device.
savebase -d /dev/hdisk0 : save the ODM to the boot logical volume.


=========================================================================================================================================================================>
To Allow Login Again
Once the user's account is locked, the user will not be able to log in until the system administrator resets the user's unsuccessful_login_count attribute in the 
/etc/security/lastlog file to be less than the value of loginretries. To do this, enter the following:

# chsec -f /etc/security/lastlog -s USERNAME -a unsuccessful_login_count=0

Typically 0 is used, but any number less than the value of loginretries can be used.

Setting an Expiration Date on the Account

The expires attribute can also be used to prevent access to an account.

       expires
            Identifies the expiration date of the account. The Value parameter
            is a 10-character string in the MMDDhhmmyy form, where MM = month,
            DD = day, hh = hour, mm = minute, and yy = last 2 digits of the
            years 1939 through 2038. All characters are numeric. If the Value
            parameter is 0, the account does not expire. The default is 0. See
            the date command for more information.

For example to set an expiration of December 31, 2013 11:59 pm

# chuser expires=1231235913 USERNAME

A login attempt would give this output:

login: lockme
lockme's Password:
Your account has expired; please see the system administrator.

To Allow Login Again
Either set expires to 0 or set to a future date for another expiration at that time:
# chuser expires=0 USERNAME
or
# chuser expires=1231235914  (for Dec 31, 2014 @ 11:59 PM)

=========================================================================================================================================================================>
Kernel 32 bit or 64 bit ?
By Surya13:34No comments
HPUX : Identify 32-bit or 64-bit kernel
Here are the steps to identify whether you are running a 32-bit or 64-bit kernel.

getconf KERNEL_BITS will return whether it is a 32 bit or 64 bit.
hpux1 # getconf KERNEL_BITS

32                                         --> 32-bit

hpux2 # getconf KERNEL_BITS

64                                         --> 64-bit
Check the vmunix's filetype.
hpux1 # file /stand/vmunix

/stand/vmunix:  PA-RISC1.1 executable      -->   32-bit

hpux2 # file /stand/vmunix

/stand/vmunix:  ELF-64 executable          -->   64-bit
AIX : Identify 32-bit or 64-bit kernel
# bootinfo â€“y : will give whether 32 or 64 bit kernel (OS)

root@red-lpar:/ $  bootinfo -y

64

root@red-lpar:/ $
Solaris : Identify 32-bit or 64-bit kernel
Most Solaris recomended patch clusters come in either 32- or 64-bit versions. How do you find out which one is appropriate for your platform? Use the isainfo command.
$ isainfo -b

64

$
The -b option prints the number of bits in the address space of the native instruction set. In this case, 64 bits.
$ isainfo -kv

64-bit sparcv9 kernel modules

$
The -k option prints the name of the instruction set used by the operating system kernel components, i.e. sparcv9; -v provides more detailed information, i.e. 64-bit sparcv9.
Linux: Identify 32-bit or 64-bit kernel
#uname -a
will tell you the kernel - the end bit tells you the architecture.

=========================================================================================================================================================================>

Different RUN levels in Linux,Solaris,HPUX and AIX
By Surya11:11No comments
RedHat Linux - Run Levels:
0: Halt
1: Single user mode
2: Multiuser, without NFS
3: Full multiuser mode
4: Unused
5: X11
6: Reboot
Solaris - Run Level
S: Single user state (useful for recovery)
0: Access Sun Firmware ( ok> prompt)
1: System administrator mode
2: Multi-user w/o NFS
3: Multi-user with NFS ( default run level)
4: Unused
5: Completely shutdown the host (like performing a power-off @ OBP) [ thanks to Marco ]
6: Reboot but depend upon initdefault entry in /etc/inittab
AIX - Run Levels
0-1: Reserved for future use
2: Multiuser mode with NFS resources shared (default run level)
3-9: Defined according to the user's preferences
m,M,s,S: Single-user mode (maintenance level)
a,b,c: Starts processes assigned to the new run levels while leaving the existing processes at the current level running
Q,q: init command to reexamine the /etc/inittab file
HP-UX
0 :System halted
S :Single-user mode, booted to system console only, with only root filesystem mounted (as read-only)
s :Single-user mode, identical to S except the current terminal acts as the system console
1 :Single-user mode with local filesystems mounted (read-write)
2 :Multi-user mode with most daemons started and Common Desktop Environment launched
3 :Identical to runlevel 2 with NFS exported
4 :Multi-user mode with VUE started instead of CDE
5,6 :Not used/User-definable
Command to see Run level:-
$ who -r
Output:
. run-level 3 Mar 3 14:04 3 0 S
Solaris/Linux changing runlevels after bootup
You need to use init command, for example change runlevel to 2.
# /sbin/init 2
Solaris changing the default runlevel
An entry with initdefault (in /etc/inittab file) is scanned only when init is initially invoked. init uses this entry to determine which run level to enter initially.
Open /etc/inittab file:
# vi /etc/inittab

Find out this entry:
is:3:initdefault:
Change is:3 to number you want, don't use S, 0, 6 ;). Save file.

=========================================================================================================================================================================>

Unix Create a Symbolic Link
By Surya10:332 comments
Q. How do I create links under UNIX / Linux operating systems?
A. You need to use ln command, which is a standard Unix / Linux / BSD command, used to create links to files. There are two types of links under UNIX, hard and soft link:
Hardlink vs. Softlink in Linux or UNIX
[a] Hard links cannot links directories ( cannot link /tmp with /home/you/tmp)
[b] Hard links cannot cross file system boundaries ( cannot link /tmp mounted on /tmp to 2nd hard disk mounted on /harddisk2)
[c] Symbolic links refer to a symbolic path indicating the abstract location of another file
[d] Hard links, refer to the specific location of physical data.
UNIX Create Symbolic link Command
To create a symbolic link, enter
$ ln -s {/path/to/file-name} {link-name}
$ ln -s /shared/sales/data/file.txt sales.data.txt
$ vi sales.data.txt
$ ls -l sales.data.txt
To delete a link, enter
$ rm {link-name}
$ rm sales.data.txt
$ ls -l
$ ls -l /shared/sales/data/file.txt
If you delete the soft link itself (sales.data.txt) , the data file would still be there ( /shared/sales/data/file.txt ). However, if you delete /shared/sales/data/file.txt, sales.data.txt becomes a broken link and data is lost.
UNIX Create Hardlink Command
To create hard link, enter (without the -s option):
$ ln {file.txt} {hard-link}
$ ln /tmp/file link-here
You can delete hard link with rm command itself:
$ rm {hard-link}
$ rm link-here
If you delete a hard link, your data would be there. If you delete /tmp/file your data still be accessible via link-here hard link file.
UNIX Create Soft-link between Directories
$ ln -s {path to actual directory} {Link-Name}
$ ls -ld {link-Name} <== To verify the link


===========================================================================================================================================================================>
IBM AIX Administrarion - AIX File Hierarchy, Connecting to network, Devices, File System, Logical volume Manager, Paging Space, Scheduling cron jobs,
						Security and user Administration, Software installation and maintenance, System Backup, System startup and shutdown, System storage.
=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>


=========================================================================================================================================================================>





































----------------------------
AIX To Solaris 
Path : in both servers 

10.0.252.11 to 192.168.25.167



in  10.0.252.11---

which rsync


<AIX Path>					<Solaris>				
 |||						 |||	
/usr/bin/rsync -ltpvrog  -e ssh  --rsync-path=/opt/sfw/bin/rsync root@192.168.25.167:/batchdump/doc-root/*  /batchdump/doc-root/




from Solaris to AIX

192.168.25.167 to 10.0.252.11  

   

/opt/sfw/bin/rsync -ltpvrog  -e ssh  --rsync-path=/usr/bin/rsync  /preprod-doc-root/* root@10.0.252.112:/preprod-doc-root/




----------------

67  70
